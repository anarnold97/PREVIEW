<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" class="chrometwo"><head><title>Planning your migration to Red Hat OpenShift Virtualization</title><link rel="stylesheet" type="text/css" href="Common_Content/css/default.css"/><meta name="generator" content="publican v4.3.2"/><meta name="description" content="Install the Migration Toolkit for Virtualization (MTV) Operator and configure MTV to plan a cold or warm migration of virtual machines to Red Hat OpenShift Virtualization on an OpenShift platform. Map the source and destination infrastructure for your migration, including storage and networking, and create validation rules."/><link rel="next" href="#con_planning-intro_mtv" title="Chapter 1. Planning a migration"/><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><script type="text/javascript" src="Common_Content/scripts/jquery-1.7.1.min.js"> </script><script type="text/javascript" src="Common_Content/scripts/utils.js"> </script><script type="text/javascript" src="Common_Content/scripts/highlight.js/highlight.pack.js"> </script></head><body><div id="chrometwo"><div id="main"><div xml:lang="en-US" class="book" id="idm46552710041952"><div class="titlepage"><div><div class="producttitle"><span class="productname">Migration Toolkit for Virtualization</span> <span class="productnumber">2.10</span></div><div><h1 class="title">Planning your migration to Red Hat OpenShift Virtualization</h1></div><div><h2 class="subtitle">Planning your migration of virtual machines from VMware vSphere, Red Hat Virtualization or OpenStack platforms, or other platforms to Red Hat OpenShift Virtualization by using the Migration Toolkit for Virtualization</h2></div><div><div xml:lang="en-US" class="authorgroup"><div class="author"><h3 class="author"><span class="firstname">Red Hat Modernization and Migration</span> <span class="surname">Documentation Team</span></h3><code class="email"><a class="email" href="mailto:ccs-mms-docs@redhat.com">ccs-mms-docs@redhat.com</a></code></div></div></div><div><a href="#idm46552704715808">Legal Notice</a></div><div><div class="abstract"><p class="title"><strong>Abstract</strong></p><div class="para">
				Install the Migration Toolkit for Virtualization (MTV) Operator and configure MTV to plan a cold or warm migration of virtual machines to Red Hat OpenShift Virtualization on an OpenShift platform. Map the source and destination infrastructure for your migration, including storage and networking, and create validation rules.
			</div></div></div></div><hr/></div><div class="toc"><ul class="toc"><li><span class="chapter"><a href="#con_planning-intro_mtv">1. Planning a migration</a></span><ul><li><span class="section"><a href="#types_of_migration">1.1. Types of migration</a></span></li></ul></li><li><span class="chapter"><a href="#assembly_cold-warm-migration_mtv">2. Cold and warm migration in MTV</a></span><ul><li><span class="section"><a href="#about-cold-warm-migration_mtv">2.1. About cold and warm migration</a></span><ul><li><span class="section"><a href="#cold-migration_mtv">2.1.1. Cold migration</a></span></li><li><span class="section"><a href="#warm-migration_mtv">2.1.2. Warm migration</a></span></li><li><span class="section"><a href="#precopy_stage">2.1.3. Precopy stage</a></span></li><li><span class="section"><a href="#cutover_stage">2.1.4. Cutover stage</a></span></li><li><span class="section"><a href="#warm-migration-versus-cold-migration">2.1.5. Advantages and disadvantages of cold and warm migrations</a></span></li><li><span class="section"><a href="#conclusions">2.1.6. Conclusions</a></span></li></ul></li><li><span class="section"><a href="#mtv-migration-speed-comparison_mtv">2.2. Migration speed comparison</a></span></li></ul></li><li><span class="chapter"><a href="#assembly_live-migration_mtv">3. Live migration in MTV</a></span><ul><li><span class="section"><a href="#benefits-live-migration_mtv">3.1. Benefits of live migration</a></span></li><li><span class="section"><a href="#live-migration-mtv-cnv_mtv">3.2. Live migration, MTV, and OpenShift Virtualization</a></span></li><li><span class="section"><a href="#live-migration-limitations_mtv">3.3. Limitations of live migration</a></span></li><li><span class="section"><a href="#live-migration-workflow_mtv">3.4. Live migration workflow</a></span></li></ul></li><li><span class="chapter"><a href="#assembly_software-requirements-for-migration_mtv">4. Software requirements for migration</a></span><ul><li><span class="section"><a href="#about-storage_mtv">4.1. Storage support and default modes</a></span></li><li><span class="section"><a href="#network-prerequisites_mtv">4.2. Network prerequisites</a></span><ul><li><span class="section"><a href="#ports_mtv">4.2.1. Ports</a></span></li></ul></li><li><span class="section"><a href="#ref_source-vm-prerequisites_mtv">4.3. Source VM prerequisites</a></span></li><li><span class="section"><a href="#ref_source-vm-migration-considerations_mtv">4.4. Source VM migration considerations</a></span></li><li><span class="section"><a href="#encryption-support_mtv">4.5. MTV encryption support</a></span></li></ul></li><li><span class="chapter"><a href="#assembly_provider-specific-requirements-for-migration_mtv">5. Provider-specific requirements for migration</a></span><ul><li><span class="section"><a href="#rhv-prerequisites_mtv">5.1. Red Hat Virtualization prerequisites</a></span></li><li><span class="section"><a href="#openstack-prerequisites_mtv">5.2. OpenStack prerequisites</a></span><ul><li><span class="section"><a href="#openstack-token-authentication_mtv">5.2.1. Using token authentication with an OpenStack source provider</a></span></li><li><span class="section"><a href="#openstack-application-credential-authentication_mtv">5.2.2. Using application credential authentication with an OpenStack source provider</a></span></li></ul></li><li><span class="section"><a href="#vmware-prerequisites_mtv">5.3. VMware prerequisites</a></span><ul><li><span class="section"><a href="#vmware-privileges_mtv">5.3.1. VMware privileges</a></span></li><li><span class="section"><a href="#creating-vmware-role-mtv-permissions_mtv">5.3.2. Creating a VMware role to grant MTV privileges</a></span></li><li><span class="section"><a href="#creating-vddk-image_mtv">5.3.3. Creating a VDDK image</a></span></li><li><span class="section"><a href="#increasing-nfc-memory-vmware-host_mtv">5.3.4. Increasing the NFC service memory of an ESXi host</a></span></li><li><span class="section"><a href="#vddk-validator-containers_mtv">5.3.5. VDDK validator containers need requests and limits</a></span></li></ul></li><li><span class="section"><a href="#ova-prerequisites_mtv">5.4. Open Virtual Appliance (OVA) prerequisites</a></span></li><li><span class="section"><a href="#cnv-prerequisites_mtv">5.5. OpenShift Virtualization prerequisites</a></span><ul><li><span class="section"><a href="#cnv-cnv-live-prerequisites_mtv">5.5.1. OpenShift Virtualization live migration prerequisites</a></span></li></ul></li><li><span class="section"><a href="#compatibility-guidelines_mtv">5.6. Software compatibility guidelines</a></span><ul><li><span class="section"><a href="#openshift-operator-life-cycles">5.6.1. OpenShift Operator Life Cycles</a></span></li></ul></li></ul></li><li><span class="chapter"><a href="#assembly_installing-mtv-operator_mtv">6. Installing and configuring the MTV Operator</a></span><ul><li><span class="section"><a href="#installing-mtv-operator_web">6.1. Installing the MTV Operator by using the Red Hat OpenShift web console</a></span></li><li><span class="section"><a href="#installing-mtv-operator_cli">6.2. Installing the MTV Operator by using the command-line interface</a></span></li><li><span class="section"><a href="#configuring-mtv-operator_mtv">6.3. Configuring the MTV Operator</a></span></li><li><span class="section"><a href="#ref_mtv-operator-parameters_mtv">6.4. MTV Operator parameters</a></span></li><li><span class="section"><a href="#ref_max-concurrent-vms_mtv">6.5. Configuring the controller_max_vm_inflight parameter</a></span></li></ul></li><li><span class="chapter"><a href="#assembly_migrating-vms-web-console_mtv">7. Migrating virtual machines by using the Red Hat OpenShift web console</a></span><ul><li><span class="section"><a href="#mtv-ui_mtv">7.1. The MTV user interface</a></span></li><li><span class="section"><a href="#mtv-overview-page_mtv">7.2. The MTV Overview page</a></span><ul><li><span class="section"><a href="#overview-tab_mtv">7.2.1. Overview tab</a></span></li><li><span class="section"><a href="#overview-yaml-tab_mtv">7.2.2. YAML tab</a></span></li><li><span class="section"><a href="#overview-health-tab_mtv">7.2.3. Health tab</a></span></li><li><span class="section"><a href="#overview-history-tab_mtv">7.2.4. History tab</a></span></li><li><span class="section"><a href="#overview-settings-tab_mtv">7.2.5. Settings tab</a></span></li></ul></li><li><span class="section"><a href="#con_migrating-vms-by-using-mtv-ui_mtv">7.3. Migrating virtual machines by using the MTV user interface</a></span></li><li><span class="section"><a href="#proc_renaming-vms-for-migration_mtv">7.4. Renaming virtual machines</a></span></li><li><span class="section"><a href="#proc_configuring-target-power-state-vms_mtv">7.5. Configuring the target power state of VMs</a></span></li></ul></li><li><span class="chapter"><a href="#assembly_migrating-vms-cli_mtv">8. Migrating virtual machines by using the command-line interface</a></span><ul><li><span class="section"><a href="#non-admin-permissions_cli">8.1. Permissions needed by non-administrators to work with migration plan components</a></span></li></ul></li><li><span class="chapter"><a href="#assembly_mapping-networks-storage_mtv">9. Mapping networks and storage in migration plans</a></span><ul><li><span class="section"><a href="#about-network-maps_mtv">9.1. About network maps in migration plans</a></span></li><li><span class="section"><a href="#about-storage-maps_mtv">9.2. About storage maps in migration plans</a></span></li><li><span class="section"><a href="#con_creating-ownerless-storage-maps-ui_mtv">9.3. Creating ownerless storage maps in the MTV UI</a></span></li></ul></li><li><span class="chapter"><a href="#assembly_planning-migration-vmware_mtv">10. Planning migration of virtual machines from VMware vSphere</a></span><ul><li><span class="section"><a href="#creating-yaml-based-network-maps-ui_vmware">10.1. Creating ownerless network maps in the MTV UI</a></span></li><li><span class="section"><a href="#creating-form-based-storage-maps-ui-vmware_vmware">10.2. Creating ownerless storage maps using the form page of the MTV UI</a></span></li><li><span class="section"><a href="#creating-yaml-based-stoarge-maps-ui_vmware">10.3. Creating ownerless storage maps using YAML or JSON definitions in the MTV UI</a></span></li><li><span class="section"><a href="#adding-source-provider_vmware">10.4. Adding a VMware vSphere source provider</a></span></li><li><span class="section"><a href="#selecting-migration-network-for-vmware-source-provider_vmware">10.5. Selecting a migration network for a VMware source provider</a></span></li><li><span class="section"><a href="#adding-source-provider_dest_vmware">10.6. Adding an OpenShift Virtualization destination provider</a></span></li><li><span class="section"><a href="#selecting-migration-network-for-virt-provider_dest_vmware">10.7. Selecting a migration network for an OpenShift Virtualization provider</a></span></li><li><span class="section"><a href="#creating-plan-wizard-vmware_vmware">10.8. Creating a VMware vSphere migration plan by using the MTV wizard</a></span></li><li><span class="section"><a href="#con_migration-of-luks-encrypted-disks_vmware">10.9. Migration of LUKS-encrypted disks</a></span></li><li><span class="section"><a href="#proc_enabling-nbde-with-clevis_vmware">10.10. Enabling Network-Bound Disk Encryption with Clevis</a></span></li></ul></li><li><span class="chapter"><a href="#assembly_planning-migration-rhv_mtv">11. Planning a migration of virtual machines from Red Hat Virtualization</a></span><ul><li><span class="section"><a href="#creating-yaml-based-network-maps-ui_rhv">11.1. Creating ownerless network maps in the MTV UI</a></span></li><li><span class="section"><a href="#creating-form-based-storage-maps-ui-ova_rhv">11.2. Creating ownerless storage maps using the form page of the MTV UI</a></span></li><li><span class="section"><a href="#creating-yaml-based-stoarge-maps-ui_rhv">11.3. Creating ownerless storage maps using YAML or JSON definitions in the MTV UI</a></span></li><li><span class="section"><a href="#adding-source-provider_rhv">11.4. Adding a Red Hat Virtualization source provider</a></span></li><li><span class="section"><a href="#adding-source-provider_dest_rhv">11.5. Adding an OpenShift Virtualization destination provider</a></span></li><li><span class="section"><a href="#selecting-migration-network-for-virt-provider_dest_rhv">11.6. Selecting a migration network for an OpenShift Virtualization provider</a></span></li><li><span class="section"><a href="#creating-plan-wizard-rhv_rhv">11.7. Creating a Red Hat Virtualization migration plan by using the MTV wizard</a></span></li></ul></li><li><span class="chapter"><a href="#assembly_planning-migration-osp_mtv">12. Planning migration of virtual machines from OpenStack</a></span><ul><li><span class="section"><a href="#creating-yaml-based-network-maps-ui_ostack">12.1. Creating ownerless network maps in the MTV UI</a></span></li><li><span class="section"><a href="#creating-form-based-storage-maps-ui-ostack_ostack">12.2. Creating ownerless storage maps using the form page of the MTV UI</a></span></li><li><span class="section"><a href="#creating-yaml-based-stoarge-maps-ui_ostack">12.3. Creating ownerless storage maps using YAML or JSON definitions in the MTV UI</a></span></li><li><span class="section"><a href="#adding-source-provider_ostack">12.4. Adding an OpenStack source provider</a></span></li><li><span class="section"><a href="#adding-source-provider_dest_ostack">12.5. Adding an OpenShift Virtualization destination provider</a></span></li><li><span class="section"><a href="#selecting-migration-network-for-virt-provider_dest_ostack">12.6. Selecting a migration network for an OpenShift Virtualization provider</a></span></li><li><span class="section"><a href="#creating-plan-wizard-ostack_ostack">12.7. Creating an OpenStack migration plan by using the MTV wizard</a></span></li></ul></li><li><span class="chapter"><a href="#assembly_planning-migration-ova_mtv">13. Planning a migration of virtual machines from OVA</a></span><ul><li><span class="section"><a href="#creating-yaml-based-network-maps-ui_ova">13.1. Creating ownerless network maps in the MTV UI</a></span></li><li><span class="section"><a href="#creating-form-based-storage-maps-ui-ova_ova">13.2. Creating ownerless storage maps using the form page of the MTV UI</a></span></li><li><span class="section"><a href="#creating-yaml-based-stoarge-maps-ui_ova">13.3. Creating ownerless storage maps using YAML or JSON definitions in the MTV UI</a></span></li><li><span class="section"><a href="#adding-source-provider_ova">13.4. Adding an Open Virtual Appliance (OVA) source provider</a></span></li><li><span class="section"><a href="#adding-source-provider_dest_ova">13.5. Adding an OpenShift Virtualization destination provider</a></span></li><li><span class="section"><a href="#selecting-migration-network-for-virt-provider_dest_ova">13.6. Selecting a migration network for an OpenShift Virtualization provider</a></span></li><li><span class="section"><a href="#creating-plan-wizard-ova_ova">13.7. Creating an Open Virtualization Appliance (OVA) migration plan by using the MTV wizard</a></span></li><li><span class="section"><a href="#proc_configuring-ova-web-upload_ova">13.8. Configuring OVA file upload by web browser</a></span></li></ul></li><li><span class="chapter"><a href="#assembly_planning-migration-cnv_mtv">14. Planning a migration of virtual machines from OpenShift Virtualization</a></span><ul><li><span class="section"><a href="#creating-yaml-based-network-maps-ui_cnv">14.1. Creating ownerless network maps in the MTV UI</a></span></li><li><span class="section"><a href="#creating-form-based-storage-maps-ui-cnv_cnv">14.2. Creating ownerless storage maps using the form page of the MTV UI</a></span></li><li><span class="section"><a href="#creating-yaml-based-stoarge-maps-ui_cnv">14.3. Creating ownerless storage maps using YAML or JSON definitions in the MTV UI</a></span></li><li><span class="section"><a href="#adding-source-provider_cnv">14.4. Adding a Red Hat OpenShift Virtualization source provider</a></span></li><li><span class="section"><a href="#adding-source-provider_dest_cnv">14.5. Adding an OpenShift Virtualization destination provider</a></span></li><li><span class="section"><a href="#selecting-migration-network-for-virt-provider_dest_cnv">14.6. Selecting a migration network for an OpenShift Virtualization provider</a></span></li><li><span class="section"><a href="#creating-plan-wizard-cnv_cnv">14.7. Creating an OpenShift Virtualization migration plan by using the MTV wizard</a></span><ul><li><span class="section"><a href="#creating-plan-wizard-cnv-live_cnv">14.7.1. Creating a migration plan for a live migration by using the MTV wizard</a></span></li></ul></li></ul></li></ul></div><section class="chapter" id="con_planning-intro_mtv"><div class="titlepage"><div><div><h1 class="title">Chapter 1. Planning a migration</h1></div></div></div><p class="_abstract _abstract">
			You can use the Migration Toolkit for Virtualization (MTV) to plan your migration of virtual machines from the following source providers to OpenShift Virtualization destination providers:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					VMware vSphere
				</li><li class="listitem">
					Red Hat Virtualization
				</li><li class="listitem">
					OpenStack
				</li><li class="listitem">
					Open Virtual Appliances (OVAs) that were created by VMware vSphere
				</li><li class="listitem">
					Remote OpenShift Virtualization clusters
				</li></ul></div><section class="section" id="types_of_migration"><div class="titlepage"><div><div><h2 class="title">1.1. Types of migration</h2></div></div></div><p>
				MTV supports three types of migration: cold, warm, and live.
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Cold migration is available for all of the source providers listed above. This type of migration migrates VMs that are powered <span class="strong strong"><strong><span class="emphasis"><em>off</em></span></strong></span> and does not require common stored storage.
					</li><li class="listitem"><p class="simpara">
						Warm migration is available only for VMware vSphere and Red Hat Virtualization. This type of migration migrates VMs that are powered <span class="strong strong"><strong><span class="emphasis"><em>on</em></span></strong></span> and does require common stored storage.
					</p><p class="simpara">
						These two types of migration are discussed in detail in <a class="link" href="#about-cold-warm-migration_mtv" title="2.1. About cold and warm migration">About cold and warm migration</a>.
					</p></li><li class="listitem"><p class="simpara">
						Live migration is available <span class="strong strong"><strong><span class="emphasis"><em>only</em></span></strong></span> for migrations between OpenShift Virtualization clusters or between namespaces on the same OpenShift Virtualization cluster. It requires MTV version 2.10 or later and OpenShift Virtualization version 4.20 or later.
					</p><p class="simpara">
						Live migration is discussed in detail in <a class="link" href="#assembly_live-migration_mtv" title="Chapter 3. Live migration in MTV">Live migration in MTV</a>.
					</p></li></ul></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					Live migration is a Technology Preview feature only. Technology Preview features are not supported with Red Hat production service level agreements (SLAs) and might not be functionally complete. Red Hat does not recommend using them in production. These features provide early access to upcoming product features, enabling customers to test functionality and provide feedback during the development process. For more information about the support scope of Red Hat Technology Preview features, see <a class="link" href="https://access.redhat.com/support/offerings/techpreview/">https://access.redhat.com/support/offerings/techpreview/</a>.
				</p></div></div></section></section><section class="chapter" id="assembly_cold-warm-migration_mtv"><div class="titlepage"><div><div><h1 class="title">Chapter 2. Cold and warm migration in MTV</h1></div></div></div><p class="_abstract _abstract">
			Cold migration is when a powered <span class="strong strong"><strong><span class="emphasis"><em>off</em></span></strong></span> virtual machine (VM) is migrated to a separate host. The VM is powered off, and there is no need for common shared storage.
		</p><p>
			Warm migration is when a powered <span class="strong strong"><strong><span class="emphasis"><em>on</em></span></strong></span> VM is migrated to a separate host. A source host state is cloned to the destination host.
		</p><section class="section" id="about-cold-warm-migration_mtv"><div class="titlepage"><div><div><h2 class="title">2.1. About cold and warm migration</h2></div></div></div><p class="_abstract _abstract">
				Choose cold migration to move powered-off VMs from multiple sources to OpenShift Virtualization, or choose warm migration to minimize downtime for powered-on VMs. Cold migration works with VMware vSphere, Red Hat Virtualization, OpenStack, Open Virtual Appliances (OVAs) that were created by VMware vSphere, and remote OpenShift Virtualization clusters; warm migration works with VMware vSphere and Red Hat Virtualization.
			</p><section class="section" id="cold-migration_mtv"><div class="titlepage"><div><div><h3 class="title">2.1.1. Cold migration</h3></div></div></div><p>
					Cold migration is the default migration type. The source virtual machines are shut down while the data is copied.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						VMware only: In cold migrations, in situations in which a package manager cannot be used during the migration, MTV does not install the <code class="literal">qemu-guest-agent</code> daemon on the migrated VMs. This has some impact on the functionality of the migrated VMs, but overall, they are still expected to function.
					</p><p>
						To enable MTV to automatically install <code class="literal">qemu-guest-agent</code> on the migrated VMs, ensure that your package manager can install the daemon during the first boot of the VM after migration.
					</p><p>
						If that is not possible, use your preferred automated or manual procedure to install <code class="literal">qemu-guest-agent</code> manually.
					</p></div></div></section><section class="section" id="warm-migration_mtv"><div class="titlepage"><div><div><h3 class="title">2.1.2. Warm migration</h3></div></div></div><p>
					Most of the data is copied during the <span class="emphasis"><em>precopy</em></span> stage while the source virtual machines (VMs) are running.
				</p><p>
					Then the VMs are shut down and the remaining data is copied during the <span class="emphasis"><em>cutover</em></span> stage.
				</p></section><section class="section" id="precopy_stage"><div class="titlepage"><div><div><h3 class="title">2.1.3. Precopy stage</h3></div></div></div><p>
					The VMs are not shut down during the precopy stage.
				</p><p>
					The VM disks are copied incrementally by using <a class="link" href="https://kb.vmware.com/s/article/1020128">changed block tracking (CBT)</a> snapshots. The snapshots are created at one-hour intervals by default. You can change the snapshot interval by updating the <code class="literal">forklift-controller</code> deployment.
				</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
						You must enable CBT for each source VM and each VM disk.
					</p><p>
						A VM can support up to 28 CBT snapshots. If the source VM has too many CBT snapshots and the <code class="literal">Migration Controller</code> service is not able to create a new snapshot, warm migration might fail. The <code class="literal">Migration Controller</code> service deletes each snapshot when the snapshot is no longer required.
					</p></div></div><p>
					The precopy stage runs until the cutover stage is started manually or is scheduled to start.
				</p></section><section class="section" id="cutover_stage"><div class="titlepage"><div><div><h3 class="title">2.1.4. Cutover stage</h3></div></div></div><p>
					The VMs are shut down during the cutover stage and the remaining data is migrated. Data stored in RAM is not migrated.
				</p><p>
					You can start the cutover stage manually by using the MTV console or you can schedule a cutover time in the <code class="literal">Migration</code> manifest.
				</p></section><section class="section" id="warm-migration-versus-cold-migration"><div class="titlepage"><div><div><h3 class="title">2.1.5. Advantages and disadvantages of cold and warm migrations</h3></div></div></div><p>
					The table that follows offers a more detailed description of the advantages and disadvantages of cold migration and warm migration. It assumes that you have installed Red Hat Enterprise Linux (RHEL) 9 on the Red Hat OpenShift platform on which you installed MTV:
				</p><div class="table" id="idm46552708227136"><p class="title"><strong>Table 2.1. Advantages and disadvantages of cold and warm migrations</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"/><col style="width: 33%; " class="col_2"/><col style="width: 33%; " class="col_3"/></colgroup><thead><tr><th align="left" valign="top" id="idm46552704231488" scope="col"> </th><th align="left" valign="top" id="idm46552704230560" scope="col"><span class="strong strong"><strong>Cold migration</strong></span></th><th align="left" valign="top" id="idm46552710815712" scope="col"><span class="strong strong"><strong>Warm migration</strong></span></th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm46552704231488">
								<p>
									<span class="strong strong"><strong>Duration</strong></span>
								</p>
								</td><td align="left" valign="top" headers="idm46552704230560">
								<p>
									Correlates to the amount of data on the disks. Each block is copied once.
								</p>
								</td><td align="left" valign="top" headers="idm46552710815712">
								<p>
									Correlates to the amount of data on the disks and VM utilization. Blocks may be copied multiple times.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm46552704231488">
								<p>
									<span class="strong strong"><strong>Fail fast</strong></span>
								</p>
								</td><td align="left" valign="top" headers="idm46552704230560">
								<p>
									Convert and then transfer. Each VM is converted to be compatible with OpenShift and, if the conversion is successful, the VM is transferred. If a VM cannot be converted, the migration fails immediately.
								</p>
								</td><td align="left" valign="top" headers="idm46552710815712">
								<p>
									Transfer and then convert. For each VM, MTV creates a snapshot and transfers it to Red Hat OpenShift. When you start the cutover, MTV creates the last snapshot, transfers it, and then converts the VM.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm46552704231488">
								<p>
									<span class="strong strong"><strong>Tools</strong></span>
								</p>
								</td><td align="left" valign="top" headers="idm46552704230560">
								<p>
									<code class="literal">virt-v2v</code> (Red Hat Enterprise Linux 9), used to convert virtual machines from a foreign hypervisor to run on Kernel-based Virtual Machines (KVMs).
								</p>
								</td><td align="left" valign="top" headers="idm46552710815712">
								<p>
									Containerized Data Importer (CDI), a persistent storage management add-on, and <code class="literal">virt-v2v</code> (Red Hat Enterprise Linux 9)
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm46552704231488">
								<p>
									<span class="strong strong"><strong>Data transferred</strong></span>
								</p>
								</td><td align="left" valign="top" headers="idm46552704230560">
								<p>
									Approximate sum of all disks
								</p>
								</td><td align="left" valign="top" headers="idm46552710815712">
								<p>
									Approximate sum of all disks and VM utilization
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm46552704231488">
								<p>
									<span class="strong strong"><strong>VM downtime</strong></span>
								</p>
								</td><td align="left" valign="top" headers="idm46552704230560">
								<p>
									High: The VMs are shut down, and the disks are transferred.
								</p>
								</td><td align="left" valign="top" headers="idm46552710815712">
								<p>
									Low: Disks are transferred in the background. The VMs are shut down during the cutover stage, and the remaining data is migrated. Data stored in RAM is not migrated.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm46552704231488">
								<p>
									<span class="strong strong"><strong>Parallelism</strong></span>
								</p>
								</td><td align="left" valign="top" headers="idm46552704230560">
								<p>
									Disks are transferred sequentially for each VM. For remote migration to a destination that does not have MTV installed, disks are transferred in parallel using CDI.
								</p>
								</td><td align="left" valign="top" headers="idm46552710815712">
								<p>
									Disks are transferred in parallel by different pods.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm46552704231488">
								<p>
									<span class="strong strong"><strong>Connection use</strong></span>
								</p>
								</td><td align="left" valign="top" headers="idm46552704230560">
								<p>
									Keeps the connection to the Source only during the disk transfer.
								</p>
								</td><td align="left" valign="top" headers="idm46552710815712">
								<p>
									Keeps the connection to the Source during the disk transfer, but the connection is released between snapshots.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm46552704231488">
								<p>
									<span class="strong strong"><strong>Tools</strong></span>
								</p>
								</td><td align="left" valign="top" headers="idm46552704230560">
								<p>
									MTV only.
								</p>
								</td><td align="left" valign="top" headers="idm46552710815712">
								<p>
									MTV and CDI from OpenShift Virtualization.
								</p>
								</td></tr></tbody></table></div></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						The preceding table describes the situation for VMs that are running because the main benefit of warm migration is the reduced downtime, and there is no reason to initiate warm migration for VMs that are down. However, performing warm migration for VMs that are down is not the same as cold migration, even when MTV uses <code class="literal">virt-v2v</code> and RHEL 9. For VMs that are down, MTV transfers the disks using CDI, unlike in cold migration.
					</p></div></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						When importing from VMware, there are additional factors which impact the migration speed such as limits related to ESXi, vSphere. or VDDK.
					</p></div></div></section><section class="section" id="conclusions"><div class="titlepage"><div><div><h3 class="title">2.1.6. Conclusions</h3></div></div></div><p>
					Based on the preceding information, we can draw the following conclusions about cold migration vs. warm migration:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							The shortest downtime of VMs can be achieved by using warm migration.
						</li><li class="listitem">
							The shortest duration for VMs with a large amount of data on a single disk can be achieved by using cold migration.
						</li><li class="listitem">
							The shortest duration for VMs with a large amount of data that is spread evenly across multiple disks can be achieved by using warm migration.
						</li></ul></div></section></section><section class="section" id="mtv-migration-speed-comparison_mtv"><div class="titlepage"><div><div><h2 class="title">2.2. Migration speed comparison</h2></div></div></div><p class="_abstract _abstract">
				Compare cold and warm migration speeds to choose the best migration type for your workload. Both have similar transfer speeds, but warm migration runs in the background with hourly snapshots while cold migration requires VM shutdown.
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Comparison</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									The observed speeds for the warm migration single disk transfer and disk conversion are approximately the same as for the cold migration.
								</li><li class="listitem">
									The benefit of warm migration is that the transfer of the snapshot happens in the background while the VM is powered <span class="strong strong"><strong><span class="emphasis"><em>on</em></span></strong></span>.
								</li><li class="listitem">
									The default snapshot time is taken every 60 minutes. If VMs change substantially, more data needs to be transferred than in cold migration when the VM is powered <span class="strong strong"><strong><span class="emphasis"><em>off</em></span></strong></span>.
								</li><li class="listitem">
									The cutover time, meaning the shutdown of the VM and last snapshot transfer, depends on how much the VM has changed since the last snapshot.
								</li></ul></div></dd></dl></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					Live migration reduces downtime even further than warm migration, but live migration is available only for migration between OpenShift Virtualization clusters or between namespaces on the same OpenShift Virtualization cluster. Therefore it is not included in the comparison above.
				</p></div></div></section></section><section class="chapter" id="assembly_live-migration_mtv"><div class="titlepage"><div><div><h1 class="title">Chapter 3. Live migration in MTV</h1></div></div></div><p class="_abstract _abstract">
			You can use <span class="emphasis"><em>live migration</em></span> to migrate VMs between OpenShift Virtualization clusters or namespaces on the same OpenShift Virtualization cluster with minimal downtime. Live migration makes it easier to perform Day 2 tasks, such as maintenance and workload balancing after you have migrated your VMs to OpenShift Virtualization.
		</p><p>
			Live migration is supported by Migration Toolkit for Virtualization (MTV) version 2.10.0 and later. It requires OpenShift Virtualization 4.20 or later on both your source and target clusters.
		</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
				Live migration is a Technology Preview feature only. Technology Preview features are not supported with Red Hat production service level agreements (SLAs) and might not be functionally complete. Red Hat does not recommend using them in production. These features provide early access to upcoming product features, enabling customers to test functionality and provide feedback during the development process. For more information about the support scope of Red Hat Technology Preview features, see <a class="link" href="https://access.redhat.com/support/offerings/techpreview/">https://access.redhat.com/support/offerings/techpreview/</a>.
			</p></div></div><section class="section" id="benefits-live-migration_mtv"><div class="titlepage"><div><div><h2 class="title">3.1. Benefits of live migration</h2></div></div></div><p class="_abstract _abstract">
				Use live migration to perform Day 2 operations like maintenance and workload balancing with minimal service disruption. You can migrate VMs between OpenShift Virtualization clusters and namespaces while they run, avoiding the need for scheduled downtime.
			</p><p>
				Live migration has the following benefits:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<span class="strong strong"><strong>Additional migration functionality</strong></span>: Live migration supports migrating virtual machines (VMs) between OpenShift Virtualization clusters and between namespaces on the same OpenShift Virtualization clusters, making Day 2 operations easier and safer to perform.
					</li><li class="listitem">
						<span class="strong strong"><strong>Improved service continuity</strong></span>: Live migration lets you quickly migrate VMs from one cluster to another, allowing you to eliminate the need for scheduled downtime during cluster maintenance or upgrades. This allows you to provide more consistent and reliable services.
					</li><li class="listitem">
						<span class="strong strong"><strong>Greater operational flexibility</strong></span>: Live migration allows your IT team to manage your infrastructure dynamically without harming business operations. Your team can respond to changing demands or perform necessary maintenance without complex, disruptive procedures.
					</li><li class="listitem">
						<span class="strong strong"><strong>Enhanced performance and scalability</strong></span>: Live migration gives you the ability to balance workloads across clusters. This helps ensure that applications have the resources they need, leading to better overall system performance and scalability.
					</li></ul></div></section><section class="section" id="live-migration-mtv-cnv_mtv"><div class="titlepage"><div><div><h2 class="title">3.2. Live migration, MTV, and OpenShift Virtualization</h2></div></div></div><p class="_abstract _abstract">
				Live migration is a joint operation between Migration Toolkit for Virtualization (MTV) and OpenShift Virtualization that leverages the strengths of MTV when you migrate VMs from one OpenShift Virtualization cluster to another.
			</p><p>
				Tasks and responsibilities are divided between MTV and OpenShift Virtualization:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						MTV manages the high-level orchestration that is needed to perform a live migration of OpenShift Virtualization Kubevirt VMs from one cluster to another.
					</li><li class="listitem">
						OpenShift Virtualization is responsible for the low-level migration mechanics, such as the actual state and storage transfer between the clusters.
					</li></ul></div><p>
				Orchestration is done by the <code class="literal">ForkliftController</code> component of MTV, rather than by OpenShift Virtualization, because <code class="literal">ForkliftController</code> is already designed to manage the migration pipeline, which includes the following responsibilities:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Build an inventory of source resources and map them to the destination cluster.
					</li><li class="listitem">
						Create and run the migration plan.
					</li><li class="listitem">
						Ensure that all necessary shared resources, such as instance types, SSH keys, secrets, and config maps, are available and accessible on the destination cluster.
					</li></ul></div></section><section class="section" id="live-migration-limitations_mtv"><div class="titlepage"><div><div><h2 class="title">3.3. Limitations of live migration</h2></div></div></div><p class="_abstract _abstract">
				Perform a live migration to migrate VMs between OpenShift Virtualization clusters or between namespaces on the same OpenShift Virtualization cluster with a minimum of downtime.
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Limitations</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Live migration is available <span class="strong strong"><strong><span class="emphasis"><em>only</em></span></strong></span> for migrations between OpenShift Virtualization clusters or between namespaces on the same OpenShift Virtualization cluster. It is not available for any other source provider, whether the provider is supported by Migration Toolkit for Virtualization (MTV) or not.
								</li><li class="listitem">
									Live migration does not establish connectivity between OpenShift Virtualization clusters. Establishing such connectivity is the responsibility of the cluster administrator.
								</li><li class="listitem">
									Live migration does not migrate resources unrelated to VMs, such as services, routes, or other application components, that may be necessary for application availability after a migration.
								</li></ul></div></dd></dl></div></section><section class="section" id="live-migration-workflow_mtv"><div class="titlepage"><div><div><h2 class="title">3.4. Live migration workflow</h2></div></div></div><p class="_abstract _abstract">
				Live migration follows a unique workflow. Understanding how Migration Toolkit for Virtualization (MTV) orchestrates with OpenShift Virtualization helps you troubleshoot migration issues.
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
						Start: When you click <span class="strong strong"><strong>Start plan</strong></span>, MTV initiates the migration plan.
					</li><li class="listitem">
						PreHook: If you added a pre-migration hook, MTV runs it now.
					</li><li class="listitem">
						Create empty <code class="literal">DataVolumes</code>: MTV creates empty target <code class="literal">DataVolumes</code> in the target OpenShift Virtualization cluster. OpenShift Virtualization uses <code class="literal">KubeVirt</code> to handle the actual storage migration.
					</li><li class="listitem">
						Ensure resources: MTV copies all secrets or config maps that are mounted by a source VM to the target namespace.
					</li><li class="listitem">
						Create target VMs: MTV creates target VMs in a running state and creates a <code class="literal">VirtualMachineInstanceMigration</code> resource on each cluster. The VMs have a special <code class="literal">KubeVirt</code> annotation indicating to start them in migration target mode.
					</li><li class="listitem">
						Wait for state transfer: MTV waits for <code class="literal">KubeVirt</code> to handle the state transfer and for the destination VMs to report as ready. <code class="literal">KubeVirt</code> also handles the shutdown of the source VMs after the state transfer.
					</li><li class="listitem">
						PostHook: If you added a post-migration hook, MTV runs it now.
					</li><li class="listitem">
						Completed: MTV indicates that the migration is finished.
					</li></ol></div></section></section><section class="chapter" id="assembly_software-requirements-for-migration_mtv"><div class="titlepage"><div><div><h1 class="title">Chapter 4. Software requirements for migration</h1></div></div></div><p class="_abstract _abstract">
			Review the following software requirements to ensure that your environment is prepared for migration.
		</p><p>
			Migration Toolkit for Virtualization (MTV) has software requirements for all providers as well as specific software requirements per provider.
		</p><p>
			You must install <a class="link" href="#compatibility-guidelines_mtv" title="5.6. Software compatibility guidelines">compatible versions</a> of Red Hat OpenShift and OpenShift Virtualization.
		</p><section class="section" id="about-storage_mtv"><div class="titlepage"><div><div><h2 class="title">4.1. Storage support and default modes</h2></div></div></div><p class="_abstract _abstract">
				Migration Toolkit for Virtualization (MTV) uses the following default volume and access modes for supported storage.
			</p><div class="table" id="idm46552704556656"><p class="title"><strong>Table 4.1. Default volume and access modes</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"/><col style="width: 33%; " class="col_2"/><col style="width: 33%; " class="col_3"/></colgroup><thead><tr><th align="left" valign="top" id="idm46552705724224" scope="col">Provisioner</th><th align="left" valign="top" id="idm46552705723136" scope="col">Volume mode</th><th align="left" valign="top" id="idm46552705722048" scope="col">Access mode</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm46552705724224">
							<p>
								kubernetes.io/aws-ebs
							</p>
							</td><td align="left" valign="top" headers="idm46552705723136">
							<p>
								Block
							</p>
							</td><td align="left" valign="top" headers="idm46552705722048">
							<p>
								ReadWriteOnce
							</p>
							</td></tr><tr><td align="left" valign="top" headers="idm46552705724224">
							<p>
								kubernetes.io/azure-disk
							</p>
							</td><td align="left" valign="top" headers="idm46552705723136">
							<p>
								Block
							</p>
							</td><td align="left" valign="top" headers="idm46552705722048">
							<p>
								ReadWriteOnce
							</p>
							</td></tr><tr><td align="left" valign="top" headers="idm46552705724224">
							<p>
								kubernetes.io/azure-file
							</p>
							</td><td align="left" valign="top" headers="idm46552705723136">
							<p>
								Filesystem
							</p>
							</td><td align="left" valign="top" headers="idm46552705722048">
							<p>
								ReadWriteMany
							</p>
							</td></tr><tr><td align="left" valign="top" headers="idm46552705724224">
							<p>
								kubernetes.io/cinder
							</p>
							</td><td align="left" valign="top" headers="idm46552705723136">
							<p>
								Block
							</p>
							</td><td align="left" valign="top" headers="idm46552705722048">
							<p>
								ReadWriteOnce
							</p>
							</td></tr><tr><td align="left" valign="top" headers="idm46552705724224">
							<p>
								kubernetes.io/gce-pd
							</p>
							</td><td align="left" valign="top" headers="idm46552705723136">
							<p>
								Block
							</p>
							</td><td align="left" valign="top" headers="idm46552705722048">
							<p>
								ReadWriteOnce
							</p>
							</td></tr><tr><td align="left" valign="top" headers="idm46552705724224">
							<p>
								kubernetes.io/hostpath-provisioner
							</p>
							</td><td align="left" valign="top" headers="idm46552705723136">
							<p>
								Filesystem
							</p>
							</td><td align="left" valign="top" headers="idm46552705722048">
							<p>
								ReadWriteOnce
							</p>
							</td></tr><tr><td align="left" valign="top" headers="idm46552705724224">
							<p>
								manila.csi.openstack.org
							</p>
							</td><td align="left" valign="top" headers="idm46552705723136">
							<p>
								Filesystem
							</p>
							</td><td align="left" valign="top" headers="idm46552705722048">
							<p>
								ReadWriteMany
							</p>
							</td></tr><tr><td align="left" valign="top" headers="idm46552705724224">
							<p>
								openshift-storage.cephfs.csi.ceph.com
							</p>
							</td><td align="left" valign="top" headers="idm46552705723136">
							<p>
								Filesystem
							</p>
							</td><td align="left" valign="top" headers="idm46552705722048">
							<p>
								ReadWriteMany
							</p>
							</td></tr><tr><td align="left" valign="top" headers="idm46552705724224">
							<p>
								openshift-storage.rbd.csi.ceph.com
							</p>
							</td><td align="left" valign="top" headers="idm46552705723136">
							<p>
								Block
							</p>
							</td><td align="left" valign="top" headers="idm46552705722048">
							<p>
								ReadWriteOnce
							</p>
							</td></tr><tr><td align="left" valign="top" headers="idm46552705724224">
							<p>
								kubernetes.io/rbd
							</p>
							</td><td align="left" valign="top" headers="idm46552705723136">
							<p>
								Block
							</p>
							</td><td align="left" valign="top" headers="idm46552705722048">
							<p>
								ReadWriteOnce
							</p>
							</td></tr><tr><td align="left" valign="top" headers="idm46552705724224">
							<p>
								kubernetes.io/vsphere-volume
							</p>
							</td><td align="left" valign="top" headers="idm46552705723136">
							<p>
								Block
							</p>
							</td><td align="left" valign="top" headers="idm46552705722048">
							<p>
								ReadWriteOnce
							</p>
							</td></tr></tbody></table></div></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					If the OpenShift Virtualization storage does not support <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.20/html/storage/dynamic-provisioning">dynamic provisioning</a>, you must apply the following settings:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							<code class="literal">Filesystem</code> volume mode
						</p><p class="simpara">
							<code class="literal">Filesystem</code> volume mode is slower than <code class="literal">Block</code> volume mode.
						</p></li><li class="listitem"><p class="simpara">
							<code class="literal">ReadWriteOnce</code> access mode
						</p><p class="simpara">
							<code class="literal">ReadWriteOnce</code> access mode does not support live virtual machine migration.
						</p></li></ul></div><p>
					See <a class="link" href="https://docs.redhat.com/en/documentation/openshift_container_platform/4.20/html-single/virtualization/index#virt-customizing-storage-profile_virt-configuring-storage-profile">Enabling a statically-provisioned storage class</a> for details on editing the storage profile.
				</p></div></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					If your migration uses block storage and persistent volumes created with an EXT4 file system, increase the file system overhead in the Containerized Data Importer (CDI) to be more than 10%. The default overhead that is assumed by CDI does not completely include the reserved place for the root partition. If you do not increase the file system overhead in CDI by this amount, your migration might fail.
				</p></div></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					When you migrate from OpenStack, or when you run a cold migration from Red Hat Virtualization to the Red Hat OpenShift cluster that MTV is deployed on, the migration allocates persistent volumes without CDI. In these cases, you might need to adjust the file system overhead.
				</p><p>
					If the configured file system overhead, which has a default value of 10%, is too low, the disk transfer will fail due to lack of space. In such a case, you would want to increase the file system overhead.
				</p><p>
					In some cases, however, you might want to decrease the file system overhead to reduce storage consumption.
				</p><p>
					You can change the file system overhead by changing the value of the <code class="literal">controller_filesystem_overhead</code> in the <code class="literal">spec</code> portion of the <code class="literal">forklift-controller</code> CR, as described in <a class="link" href="#configuring-mtv-operator_mtv" title="6.3. Configuring the MTV Operator">Configuring the MTV Operator</a>.
				</p></div></div></section><section class="section" id="network-prerequisites_mtv"><div class="titlepage"><div><div><h2 class="title">4.2. Network prerequisites</h2></div></div></div><p class="_abstract _abstract">
				Network prerequisites apply to all migrations from a source provider to OpenShift Virtualization.
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Prerequisites</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Do not change IP addresses, VLANs, and other network configuration settings during a migration. The MAC addresses of the virtual machines (VMs) are preserved during migration.
								</li><li class="listitem">
									The network connections between the source environment, the OpenShift Virtualization cluster, and the replication repository must be reliable and uninterrupted.
								</li><li class="listitem">
									If you are mapping more than one source and destination network, you must create a network attachment definition for each additional destination network. For more information, see <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.20/html/virtualization/virtual-machines#virt-creating-network-attachment-definition">network attachment definition</a>.
								</li></ul></div></dd></dl></div><section class="section" id="ports_mtv"><div class="titlepage"><div><div><h3 class="title">4.2.1. Ports</h3></div></div></div><p>
					The firewalls must enable traffic over the following ports:
				</p><div class="table" id="idm46552705277952"><p class="title"><strong>Table 4.2. Network ports required for migrating from VMware vSphere</strong></p><div class="table-contents"><table class="gt-4-cols lt-7-rows"><colgroup><col style="width: 17%; " class="col_1"/><col style="width: 17%; " class="col_2"/><col style="width: 17%; " class="col_3"/><col style="width: 17%; " class="col_4"/><col style="width: 33%; " class="col_5"/></colgroup><thead><tr><th align="left" valign="top" id="idm46552705336688" scope="col">Port</th><th align="left" valign="top" id="idm46552705653856" scope="col">Protocol</th><th align="left" valign="top" id="idm46552705652768" scope="col">Source</th><th align="left" valign="top" id="idm46552705651680" scope="col">Destination</th><th align="left" valign="top" id="idm46552705650592" scope="col">Purpose</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm46552705336688">
								<p>
									443
								</p>
								</td><td align="left" valign="top" headers="idm46552705653856">
								<p>
									TCP
								</p>
								</td><td align="left" valign="top" headers="idm46552705652768">
								<p>
									OpenShift nodes
								</p>
								</td><td align="left" valign="top" headers="idm46552705651680">
								<p>
									VMware vCenter
								</p>
								</td><td align="left" valign="top" headers="idm46552705650592">
								<p>
									VMware provider inventory
								</p>
								<p>
									Disk transfer authentication
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm46552705336688">
								<p>
									443
								</p>
								</td><td align="left" valign="top" headers="idm46552705653856">
								<p>
									TCP
								</p>
								</td><td align="left" valign="top" headers="idm46552705652768">
								<p>
									OpenShift nodes
								</p>
								</td><td align="left" valign="top" headers="idm46552705651680">
								<p>
									VMware ESXi hosts
								</p>
								</td><td align="left" valign="top" headers="idm46552705650592">
								<p>
									Disk transfer authentication
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm46552705336688">
								<p>
									902
								</p>
								</td><td align="left" valign="top" headers="idm46552705653856">
								<p>
									TCP
								</p>
								</td><td align="left" valign="top" headers="idm46552705652768">
								<p>
									OpenShift nodes
								</p>
								</td><td align="left" valign="top" headers="idm46552705651680">
								<p>
									VMware ESXi hosts
								</p>
								</td><td align="left" valign="top" headers="idm46552705650592">
								<p>
									Disk transfer data copy
								</p>
								</td></tr></tbody></table></div></div><div class="table" id="idm46552695740976"><p class="title"><strong>Table 4.3. Network ports required for migrating from Red Hat Virtualization</strong></p><div class="table-contents"><table class="gt-4-cols lt-7-rows"><colgroup><col style="width: 17%; " class="col_1"/><col style="width: 17%; " class="col_2"/><col style="width: 17%; " class="col_3"/><col style="width: 17%; " class="col_4"/><col style="width: 33%; " class="col_5"/></colgroup><thead><tr><th align="left" valign="top" id="idm46552705555264" scope="col">Port</th><th align="left" valign="top" id="idm46552705554176" scope="col">Protocol</th><th align="left" valign="top" id="idm46552705553088" scope="col">Source</th><th align="left" valign="top" id="idm46552705552000" scope="col">Destination</th><th align="left" valign="top" id="idm46552705550912" scope="col">Purpose</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm46552705555264">
								<p>
									443
								</p>
								</td><td align="left" valign="top" headers="idm46552705554176">
								<p>
									TCP
								</p>
								</td><td align="left" valign="top" headers="idm46552705553088">
								<p>
									OpenShift nodes
								</p>
								</td><td align="left" valign="top" headers="idm46552705552000">
								<p>
									RHV Engine
								</p>
								</td><td align="left" valign="top" headers="idm46552705550912">
								<p>
									RHV provider inventory
								</p>
								<p>
									Disk transfer authentication
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm46552705555264">
								<p>
									54322
								</p>
								</td><td align="left" valign="top" headers="idm46552705554176">
								<p>
									TCP
								</p>
								</td><td align="left" valign="top" headers="idm46552705553088">
								<p>
									OpenShift nodes
								</p>
								</td><td align="left" valign="top" headers="idm46552705552000">
								<p>
									RHV hosts
								</p>
								</td><td align="left" valign="top" headers="idm46552705550912">
								<p>
									Disk transfer data copy
								</p>
								</td></tr></tbody></table></div></div><div class="table" id="idm46552705561664"><p class="title"><strong>Table 4.4. Network ports required for migrating from OpenStack</strong></p><div class="table-contents"><table class="gt-4-cols lt-7-rows"><colgroup><col style="width: 17%; " class="col_1"/><col style="width: 17%; " class="col_2"/><col style="width: 17%; " class="col_3"/><col style="width: 17%; " class="col_4"/><col style="width: 33%; " class="col_5"/></colgroup><thead><tr><th align="left" valign="top" id="idm46552705906656" scope="col">Port</th><th align="left" valign="top" id="idm46552711027488" scope="col">Protocol</th><th align="left" valign="top" id="idm46552711026400" scope="col">Source</th><th align="left" valign="top" id="idm46552711025312" scope="col">Destination</th><th align="left" valign="top" id="idm46552711024224" scope="col">Purpose</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm46552705906656">
								<p>
									8776
								</p>
								</td><td align="left" valign="top" headers="idm46552711027488">
								<p>
									Cinder
								</p>
								</td><td align="left" valign="top" headers="idm46552711026400">
								<p>
									OpenShift nodes
								</p>
								</td><td align="left" valign="top" headers="idm46552711025312">
								<p>
									OpenStack hosts
								</p>
								</td><td align="left" valign="top" headers="idm46552711024224">
								<p>
									Block storage API
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm46552705906656">
								<p>
									8774
								</p>
								</td><td align="left" valign="top" headers="idm46552711027488">
								<p>
									Nova
								</p>
								</td><td align="left" valign="top" headers="idm46552711026400">
								<p>
									OpenShift nodes
								</p>
								</td><td align="left" valign="top" headers="idm46552711025312">
								<p>
									OpenStack hosts
								</p>
								</td><td align="left" valign="top" headers="idm46552711024224">
								<p>
									Virtualization API
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm46552705906656">
								<p>
									5000
								</p>
								</td><td align="left" valign="top" headers="idm46552711027488">
								<p>
									Keystone
								</p>
								</td><td align="left" valign="top" headers="idm46552711026400">
								<p>
									OpenShift nodes
								</p>
								</td><td align="left" valign="top" headers="idm46552711025312">
								<p>
									OpenStack hosts
								</p>
								</td><td align="left" valign="top" headers="idm46552711024224">
								<p>
									Authentication API
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm46552705906656">
								<p>
									9696
								</p>
								</td><td align="left" valign="top" headers="idm46552711027488">
								<p>
									Neutron
								</p>
								</td><td align="left" valign="top" headers="idm46552711026400">
								<p>
									OpenShift nodes
								</p>
								</td><td align="left" valign="top" headers="idm46552711025312">
								<p>
									OpenStack hosts
								</p>
								</td><td align="left" valign="top" headers="idm46552711024224">
								<p>
									Network API
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm46552705906656">
								<p>
									9292
								</p>
								</td><td align="left" valign="top" headers="idm46552711027488">
								<p>
									Glance
								</p>
								</td><td align="left" valign="top" headers="idm46552711026400">
								<p>
									OpenShift nodes
								</p>
								</td><td align="left" valign="top" headers="idm46552711025312">
								<p>
									OpenStack hosts
								</p>
								</td><td align="left" valign="top" headers="idm46552711024224">
								<p>
									Image service API
								</p>
								</td></tr></tbody></table></div></div><div class="table" id="idm46552708844096"><p class="title"><strong>Table 4.5. Network ports required for migrating from Open Virtual Appliance (OVA) files</strong></p><div class="table-contents"><table class="gt-4-cols lt-7-rows"><colgroup><col style="width: 17%; " class="col_1"/><col style="width: 17%; " class="col_2"/><col style="width: 17%; " class="col_3"/><col style="width: 17%; " class="col_4"/><col style="width: 33%; " class="col_5"/></colgroup><thead><tr><th align="left" valign="top" id="idm46552705478848" scope="col">Port</th><th align="left" valign="top" id="idm46552705477760" scope="col">Protocol</th><th align="left" valign="top" id="idm46552705476672" scope="col">Source</th><th align="left" valign="top" id="idm46552705475584" scope="col">Destination</th><th align="left" valign="top" id="idm46552706311024" scope="col">Purpose</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm46552705478848">
								<p>
									2049
								</p>
								</td><td align="left" valign="top" headers="idm46552705477760">
								<p>
									TCP
								</p>
								</td><td align="left" valign="top" headers="idm46552705476672">
								<p>
									OpenShift nodes
								</p>
								</td><td align="left" valign="top" headers="idm46552705475584">
								<p>
									Server containing the OVA files
								</p>
								</td><td align="left" valign="top" headers="idm46552706311024">
								<p>
									NFS service
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm46552705478848">
								<p>
									111
								</p>
								</td><td align="left" valign="top" headers="idm46552705477760">
								<p>
									TCP or UCP
								</p>
								</td><td align="left" valign="top" headers="idm46552705476672">
								<p>
									OpenShift nodes
								</p>
								</td><td align="left" valign="top" headers="idm46552705475584">
								<p>
									Server containing the OVA files
								</p>
								</td><td align="left" valign="top" headers="idm46552706311024">
								<p>
									RPC Portmapper, only needed for NFSv4.0
								</p>
								</td></tr></tbody></table></div></div><div class="table" id="idm46552710011776"><p class="title"><strong>Table 4.6. Network ports required for migrating from OpenShift Virtualization</strong></p><div class="table-contents"><table class="gt-4-cols lt-7-rows"><colgroup><col style="width: 17%; " class="col_1"/><col style="width: 17%; " class="col_2"/><col style="width: 17%; " class="col_3"/><col style="width: 17%; " class="col_4"/><col style="width: 33%; " class="col_5"/></colgroup><thead><tr><th align="left" valign="top" id="idm46552709849408" scope="col">Port</th><th align="left" valign="top" id="idm46552709848320" scope="col">Protocol</th><th align="left" valign="top" id="idm46552709847232" scope="col">Source</th><th align="left" valign="top" id="idm46552709846144" scope="col">Destination</th><th align="left" valign="top" id="idm46552709845056" scope="col">Purpose</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm46552709849408">
								<p>
									6443
								</p>
								</td><td align="left" valign="top" headers="idm46552709848320">
								<p>
									API
								</p>
								</td><td align="left" valign="top" headers="idm46552709847232">
								<p>
									OpenShift nodes
								</p>
								</td><td align="left" valign="top" headers="idm46552709846144">
								<p>
									OpenShift Virtualization host
								</p>
								</td><td align="left" valign="top" headers="idm46552709845056">
								<p>
									Access API to get information from a VM’s manifest
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm46552709849408">
								<p>
									443
								</p>
								</td><td align="left" valign="top" headers="idm46552709848320">
								<p>
									TCP
								</p>
								</td><td align="left" valign="top" headers="idm46552709847232">
								<p>
									OpenShift nodes
								</p>
								</td><td align="left" valign="top" headers="idm46552709846144">
								<p>
									OpenShift Virtualization host
								</p>
								</td><td align="left" valign="top" headers="idm46552709845056">
								<p>
									Download VM data using the <code class="literal">virtualMachineExport</code> resource
								</p>
								</td></tr></tbody></table></div></div></section></section><section class="section" id="ref_source-vm-prerequisites_mtv"><div class="titlepage"><div><div><h2 class="title">4.3. Source VM prerequisites</h2></div></div></div><p class="_abstract _abstract">
				Source VM prerequisites apply to all migrations from a source provider to OpenShift Virtualization.
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Prerequisites</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									ISO images and CD-ROMs are unmounted.
								</li><li class="listitem">
									Each NIC contains an IPv4 address, an IPv6 address, or both.
								</li><li class="listitem"><p class="simpara">
									The OS of each VM is certified and supported as a guest OS for conversions.
								</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
										You can check that the OS is supported by referring to the table in <a class="link" href="https://access.redhat.com/articles/1351473">Converting virtual machines from other hypervisors to KVM with virt-v2v</a>. See the columns of the table that refer to RHEL 8 hosts and RHEL 9 hosts.
									</p></div></div></li></ul></div></dd></dl></div></section><section class="section" id="ref_source-vm-migration-considerations_mtv"><div class="titlepage"><div><div><h2 class="title">4.4. Source VM migration considerations</h2></div></div></div><p class="_abstract _abstract">
				Review these considerations when planning your migration of VMs from a source provider to OpenShift Virtualization.
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">VM naming</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<span class="strong strong"><strong>DNS compliance in OpenShift Virtualization:</strong></span> VM names must be DNS-compliant and unique in the OpenShift Virtualization environment. Migration Toolkit for Virtualization (MTV) automatically adjusts non-compliant VM names in the target cluster. Alternatively, you can rename target VMs in the MTV UI. For information about renaming VMs, see <a class="link" href="#proc_renaming-vms-for-migration_mtv" title="7.4. Renaming virtual machines">Renaming virtual machines</a>.
								</li></ul></div></dd><dt><span class="term">Windows-specific considerations</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>VSS requirement for Windows warm migrations:</strong></span> For VMs running Microsoft Windows, the Volume Shadow Copy Service (VSS) inside the guest VM is used to quiesce the file system and applications. When performing a warm migration of a Microsoft Windows VM from VMware, you must start VSS on the Windows guest OS for the snapshot and <code class="literal">Quiesce guest file system</code> to succeed. If you do not start VSS on the Windows guest OS, the snapshot creation during the Warm migration fails with the following error:
								</p><pre class="screen">An error occurred while taking a snapshot: Failed to restart the virtual machine</pre><p class="simpara">
									If you set the VSS service to <code class="literal">Manual</code> and start a snapshot creation with <code class="literal">Quiesce guest file system = yes</code>, the VMware Snapshot provider service requests VSS to start the shadow copy in the background.
								</p></li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Measured Boot limitation:</strong></span> Microsoft Windows VMs, which use the Measured Boot feature, cannot be migrated. Measured Boot is a mechanism to prevent any kind of device changes by checking each start-up component, including the firmware, all the way to the boot driver. For more information, see <a class="link" href="https://learn.microsoft.com/en-us/windows/compatibility/measured-boot">Measured Boot</a> in the Microsoft documentation.
								</p><p class="simpara">
									The alternative to migration is to re-create the Windows VM directly on OpenShift Virtualization.
								</p></li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Secure Boot limitation:</strong></span> VMs with Secure Boot enabled currently might not be migrated automatically. This is because Secure Boot would prevent the VMs from booting on the destination provider. Secure boot is a security standard developed by members of the PC industry to ensure that a device boots using only software that is trusted by the Original Equipment Manufacturer (OEM).
								</p><p class="simpara">
									<span class="strong strong"><strong>Workaround:</strong></span> The current workaround is to disable Secure Boot on the destination. For more details, see <a class="link" href="https://learn.microsoft.com/en-us/windows-hardware/manufacture/desktop/disabling-secure-boot?view=windows-11">Disabling Secure Boot</a> in the Microsoft documentation.
								</p><p class="simpara">
									<a class="link" href="https://issues.redhat.com/browse/MTV-1548">(MTV-1548)</a>
								</p></li></ul></div></dd><dt><span class="term">Operating system compatibility</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<span class="strong strong"><strong>Limited support for dual-boot OS VMs:</strong></span> MTV has limited support for the migration of dual-boot OS VMs. In the case of a dual-boot OS VM, MTV attempts to convert the first boot disk it finds. Alternatively, you can specify the root device in the MTV UI.
								</li></ul></div></dd></dl></div></section><section class="section" id="encryption-support_mtv"><div class="titlepage"><div><div><h2 class="title">4.5. MTV encryption support</h2></div></div></div><p class="_abstract _abstract">
				Migrate encrypted VMs to maintain security during migration to Migration Toolkit for Virtualization (MTV). You can migrate Linux VMs encrypted with Linux Unified Key Setup (LUKS) and Windows VMs encrypted with BitLocker.
			</p></section></section><section class="chapter" id="assembly_provider-specific-requirements-for-migration_mtv"><div class="titlepage"><div><div><h1 class="title">Chapter 5. Provider-specific requirements for migration</h1></div></div></div><p class="_abstract _abstract">
			Review the specific software requirements per source provider.
		</p><section class="section" id="rhv-prerequisites_mtv"><div class="titlepage"><div><div><h2 class="title">5.1. Red Hat Virtualization prerequisites</h2></div></div></div><p class="_abstract _abstract">
				The following prerequisites apply to Red Hat Virtualization migrations:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						To create a source provider, you must have at least the <code class="literal">UserRole</code> and <code class="literal">ReadOnlyAdmin</code> roles assigned to you. These are the minimum required permissions, however, any other administrator or superuser permissions will also work.
					</li></ul></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					You must keep the <code class="literal">UserRole</code> and <code class="literal">ReadOnlyAdmin</code> roles until the virtual machines of the source provider have been migrated. Otherwise, the migration will fail.
				</p></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						To migrate virtual machines:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
								You must have one of the following:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem">
										RHV admin permissions. These permissions allow you to migrate any virtual machine in the system.
									</li><li class="listitem">
										<code class="literal">DiskCreator</code> and <code class="literal">UserVmManager</code> permissions on every virtual machine you want to migrate.
									</li></ul></div></li><li class="listitem">
								You must use a <a class="link" href="#compatibility-guidelines_mtv" title="5.6. Software compatibility guidelines">compatible version</a> of Red Hat Virtualization.
							</li><li class="listitem"><p class="simpara">
								You must have the Manager CA certificate, unless it was replaced by a third-party certificate, in which case, specify the Manager Apache CA certificate.
							</p><p class="simpara">
								You can obtain the Manager CA certificate by navigating to <a class="link" href="https://&lt;engine_host&gt;/ovirt-engine/services/pki-resource?resource=ca-certificate&amp;format=X509-PEM-CA">https://&lt;engine_host&gt;/ovirt-engine/services/pki-resource?resource=ca-certificate&amp;format=X509-PEM-CA</a> in a browser.
							</p></li><li class="listitem">
								If you are migrating a virtual machine with a direct logical unit number (LUN) disk, ensure that the nodes in the OpenShift Virtualization destination cluster that the VM is expected to run on can access the backend storage.
							</li></ul></div></li></ul></div><div class="admonition note"><div class="admonition_header">Note</div><div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Unlike disk images that <span class="emphasis"><em>are copied</em></span> from a source provider to a target provider, LUNs are <span class="emphasis"><em>detached</em></span>, <span class="emphasis"><em>but not removed</em></span>, from virtual machines in the source provider and then attached to the virtual machines (VMs) that are created in the target provider.
						</li><li class="listitem">
							LUNs are not removed from the source provider during the migration in case fallback to the source provider is required. However, before re-attaching the LUNs to VMs in the source provider, ensure that the LUNs are not used by VMs on the target environment at the same time, which might lead to data corruption.
						</li></ul></div></div></div></section><section class="section" id="openstack-prerequisites_mtv"><div class="titlepage"><div><div><h2 class="title">5.2. OpenStack prerequisites</h2></div></div></div><p class="_abstract _abstract">
				To migrate from OpenStack to OpenShift Virtualization, verify you have a compatible OpenStack version and configure authentication. You can use token authentication, application credentials, or standard username and password credentials with MTV.
			</p><p>
				You can use these methods to migrate VMs from OpenStack source providers by using the command-line interface (CLI) the same way you migrate other VMs, except for how you prepare the <code class="literal">Secret</code> manifest.
			</p><section class="section" id="openstack-token-authentication_mtv"><div class="titlepage"><div><div><h3 class="title">5.2.1. Using token authentication with an OpenStack source provider</h3></div></div></div><p class="_abstract _abstract">
					You can use token authentication, instead of username and password authentication, when you create an OpenStack source provider.
				</p><p>
					MTV supports both of the following types of token authentication:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Token with user ID
						</li><li class="listitem">
							Token with user name
						</li></ul></div><p>
					For each type of token authentication, you need to use data from OpenStack to create a <code class="literal">Secret</code> manifest.
				</p><div class="formalpara"><p class="title"><strong>Prerequisites</strong></p><p>
						Have an OpenStack account.
					</p></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In the dashboard of the OpenStack web console, click <span class="strong strong"><strong>Project &gt; API Access</strong></span>.
						</li><li class="listitem"><p class="simpara">
							Expand <span class="strong strong"><strong>Download OpenStack RC file</strong></span> and click <span class="strong strong"><strong>OpenStack RC file</strong></span>.
						</p><p class="simpara">
							The file that is downloaded, referred to here as <code class="literal">&lt;openstack_rc_file&gt;</code>, includes the following fields used for token authentication:
						</p><pre class="programlisting language-terminal">OS_AUTH_URL
OS_PROJECT_ID
OS_PROJECT_NAME
OS_DOMAIN_NAME
OS_USERNAME</pre></li><li class="listitem"><p class="simpara">
							To get the data needed for token authentication, run the following command:
						</p><pre class="programlisting language-terminal">$ openstack token issue</pre><p class="simpara">
							The output, referred to here as <code class="literal">&lt;openstack_token_output&gt;</code>, includes the <code class="literal">token</code>, <code class="literal">userID</code>, and <code class="literal">projectID</code> that you need for authentication using a token with user ID.
						</p></li><li class="listitem"><p class="simpara">
							Create a <code class="literal">Secret</code> manifest similar to the following:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									For authentication using a token with user ID:
								</p><pre class="programlisting language-yaml">cat &lt;&lt; EOF | oc apply -f -
apiVersion: v1
kind: Secret
metadata:
  name: openstack-secret-tokenid
  namespace: openshift-mtv
  labels:
    createdForProviderType: openstack
type: Opaque
stringData:
  authType: token
  token: &lt;token_from_openstack_token_output&gt;
  projectID: &lt;projectID_from_openstack_token_output&gt;
  userID: &lt;userID_from_openstack_token_output&gt;
  url: &lt;OS_AUTH_URL_from_openstack_rc_file&gt;
EOF</pre></li><li class="listitem"><p class="simpara">
									For authentication using a token with user name:
								</p><pre class="programlisting language-yaml">cat &lt;&lt; EOF | oc apply -f -
apiVersion: v1
kind: Secret
metadata:
  name: openstack-secret-tokenname
  namespace: openshift-mtv
  labels:
    createdForProviderType: openstack
type: Opaque
stringData:
  authType: token
  token: &lt;token_from_openstack_token_output&gt;
  domainName: &lt;OS_DOMAIN_NAME_from_openstack_rc_file&gt;
  projectName: &lt;OS_PROJECT_NAME_from_openstack_rc_file&gt;
  username: &lt;OS_USERNAME_from_openstack_rc_file&gt;
  url: &lt;OS_AUTH_URL_from_openstack_rc_file&gt;
EOF</pre></li></ul></div></li></ol></div></section><section class="section" id="openstack-application-credential-authentication_mtv"><div class="titlepage"><div><div><h3 class="title">5.2.2. Using application credential authentication with an OpenStack source provider</h3></div></div></div><p class="_abstract _abstract">
					You can use application credential authentication, instead of username and password authentication, when you create an OpenStack source provider.
				</p><p>
					MTV supports both of the following types of application credential authentication:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Application credential ID
						</li><li class="listitem">
							Application credential name
						</li></ul></div><p>
					For each type of application credential authentication, you need to use data from OpenStack to create a <code class="literal">Secret</code> manifest.
				</p><div class="formalpara"><p class="title"><strong>Prerequisites</strong></p><p>
						You have an OpenStack account.
					</p></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In the dashboard of the OpenStack web console, click <span class="strong strong"><strong>Project</strong></span> &gt; <span class="strong strong"><strong>API Access</strong></span>.
						</li><li class="listitem"><p class="simpara">
							Expand <span class="strong strong"><strong>Download OpenStack RC file</strong></span> and click <span class="strong strong"><strong>OpenStack RC file</strong></span>.
						</p><p class="simpara">
							The file that is downloaded, referred to here as <code class="literal">&lt;openstack_rc_file&gt;</code>, includes the following fields used for application credential authentication:
						</p><pre class="programlisting language-terminal">OS_AUTH_URL
OS_PROJECT_ID
OS_PROJECT_NAME
OS_DOMAIN_NAME
OS_USERNAME</pre></li><li class="listitem"><p class="simpara">
							To get the data needed for application credential authentication, run the following command:
						</p><pre class="programlisting language-terminal">$ openstack application credential create --role member --role reader --secret redhat forklift</pre><p class="simpara">
							The output, referred to here as <code class="literal">&lt;openstack_credential_output&gt;</code>, includes:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									The <code class="literal">id</code> and <code class="literal">secret</code> that you need for authentication using an application credential ID
								</li><li class="listitem">
									The <code class="literal">name</code> and <code class="literal">secret</code> that you need for authentication using an application credential name
								</li></ul></div></li><li class="listitem"><p class="simpara">
							Create a <code class="literal">Secret</code> manifest similar to the following:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									For authentication using the application credential ID:
								</p><pre class="programlisting language-yaml">cat &lt;&lt; EOF | oc apply -f -
apiVersion: v1
kind: Secret
metadata:
  name: openstack-secret-appid
  namespace: openshift-mtv
  labels:
    createdForProviderType: openstack
type: Opaque
stringData:
  authType: applicationcredential
  applicationCredentialID: &lt;id_from_openstack_credential_output&gt;
  applicationCredentialSecret: &lt;secret_from_openstack_credential_output&gt;
  url: &lt;OS_AUTH_URL_from_openstack_rc_file&gt;
EOF</pre></li><li class="listitem"><p class="simpara">
									For authentication using the application credential name:
								</p><pre class="programlisting language-yaml">cat &lt;&lt; EOF | oc apply -f -
apiVersion: v1
kind: Secret
metadata:
  name: openstack-secret-appname
  namespace: openshift-mtv
  labels:
    createdForProviderType: openstack
type: Opaque
stringData:
  authType: applicationcredential
  applicationCredentialName: &lt;name_from_openstack_credential_output&gt;
  applicationCredentialSecret: &lt;secret_from_openstack_credential_output&gt;
  domainName: &lt;OS_DOMAIN_NAME_from_openstack_rc_file&gt;
  username: &lt;OS_USERNAME_from_openstack_rc_file&gt;
  url: &lt;OS_AUTH_URL_from_openstack_rc_file&gt;
EOF</pre></li></ul></div></li></ol></div></section></section><section class="section" id="vmware-prerequisites_mtv"><div class="titlepage"><div><div><h2 class="title">5.3. VMware prerequisites</h2></div></div></div><p class="_abstract _abstract">
				It is strongly recommended to create a VDDK image to accelerate migrations. For more information, see <a class="link" href="#creating-vddk-image_mtv" title="5.3.3. Creating a VDDK image">Creating a VDDK image</a>.
			</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
					Virtual machine (VM) migrations do not work without VDDK when a VM is backed by VMware vSAN.
				</p></div></div><p>
				The following prerequisites apply to VMware migrations:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						You must use a <a class="link" href="#compatibility-guidelines_mtv" title="5.6. Software compatibility guidelines">compatible version</a> of VMware vSphere.
					</li><li class="listitem">
						You must be logged in as a user with at least the minimal set of <a class="link" href="#vmware-privileges_mtv" title="5.3.1. VMware privileges">VMware privileges</a>.
					</li><li class="listitem">
						To access the virtual machine using a pre-migration hook, <a class="link" href="https://www.vmware.com/support/ws5/doc/new_guest_tools_ws.html">VMware Tools</a> must be installed on the source virtual machine.
					</li><li class="listitem">
						The VM operating system must be certified and supported for use as a <a class="link" href="https://access.redhat.com/articles/973163#ocpvirt">guest operating system with OpenShift Virtualization</a> <span class="emphasis"><em>and</em></span> for <a class="link" href="https://access.redhat.com/articles/1351473">conversion to KVM with <code class="literal">virt-v2v</code></a>.
					</li><li class="listitem">
						If you are running a warm migration, you must enable <a class="link" href="https://kb.vmware.com/s/article/1020128">changed block tracking (CBT)</a> on the VMs and on the VM disks.
					</li><li class="listitem">
						If you are migrating more than 10 VMs from an ESXi host in the same migration plan, you must increase the Network File Copy (NFC) service memory of the host.
					</li><li class="listitem">
						It is strongly recommended to disable hibernation because Migration Toolkit for Virtualization (MTV) does not support migrating hibernated VMs.
					</li></ul></div><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
					For virtual machines (VMs) running Microsoft Windows, Volume Shadow Copy Service (VSS) inside the guest VM is used to quiesce the file system and applications. 
				</p><p>
					When performing a warm migration of a Microsoft Windows virtual machine from VMware, you must start VSS on the Windows guest operating system in order for the snapshot and <code class="literal">Quiesce guest file system</code> to succeed.
				</p><p>
					If you do not start VSS on the Windows guest operating system, the snapshot creation during the Warm migration fails with the following error:
				</p><pre class="programlisting language-terminal">An error occurred while taking a snapshot: Failed to restart the virtual machine</pre><p>
					If you set the VSS service to <code class="literal">Manual</code> and start a snapshot creation with <code class="literal">Quiesce guest file system = yes</code>. In the background, the VMware Snapshot provider service requests VSS to start the shadow copy.
				</p></div></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					In case of a power outage, data might be lost for a VM with disabled hibernation. However, if hibernation is not disabled, migration will fail.
				</p></div></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					Neither MTV nor OpenShift Virtualization support conversion of Btrfs for migrating VMs from VMware.
				</p></div></div><section class="section" id="vmware-privileges_mtv"><div class="titlepage"><div><div><h3 class="title">5.3.1. VMware privileges</h3></div></div></div><p>
					The following minimal set of VMware privileges is required to migrate virtual machines to OpenShift Virtualization with the Migration Toolkit for Virtualization (MTV).
				</p><div class="table" id="idm46552704304512"><p class="title"><strong>Table 5.1. VMware privileges</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"/><col style="width: 50%; " class="col_2"/></colgroup><thead><tr><th align="left" valign="top" id="idm46552704299680" scope="col">Privilege</th><th align="left" valign="top" id="idm46552706284096" scope="col">Description</th></tr></thead><tbody><tr><td colspan="2" align="left" valign="top" headers="idm46552704299680 idm46552706284096">
								<p>
									<code class="literal">Virtual machine.Interaction</code> privileges:
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm46552704299680">
								<p>
									<code class="literal">Virtual machine.Interaction.Power Off</code>
								</p>
								</td><td align="left" valign="top" headers="idm46552706284096">
								<p>
									Allows powering off a powered-on virtual machine. This operation powers down the guest operating system.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm46552704299680">
								<p>
									<code class="literal">Virtual machine.Interaction.Power On</code>
								</p>
								</td><td align="left" valign="top" headers="idm46552706284096">
								<p>
									Allows powering on a powered-off virtual machine and resuming a suspended virtual machine.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm46552704299680">
								<p>
									<code class="literal">Virtual machine.Guest operating system management by VIX API</code>
								</p>
								</td><td align="left" valign="top" headers="idm46552706284096">
								<p>
									Allows managing a virtual machine by the VMware Virtual Infrastructure eXtension (VIX) API.
								</p>
								</td></tr><tr><td colspan="2" align="left" valign="top" headers="idm46552704299680 idm46552706284096">
								<p>
									<code class="literal">Virtual machine.Provisioning</code> privileges:
								</p>
								<div class="admonition note"><div class="admonition_header">Note</div><div><p>
										All <code class="literal">Virtual machine.Provisioning</code> privileges are required.
									</p></div></div>
								</td></tr><tr><td align="left" valign="top" headers="idm46552704299680">
								<p>
									<code class="literal">Virtual machine.Provisioning.Allow disk access</code>
								</p>
								</td><td align="left" valign="top" headers="idm46552706284096">
								<p>
									Allows opening a disk on a virtual machine for random read and write access. Used mostly for remote disk mounting.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm46552704299680">
								<p>
									<code class="literal">Virtual machine.Provisioning.Allow file access</code>
								</p>
								</td><td align="left" valign="top" headers="idm46552706284096">
								<p>
									Allows operations on files associated with a virtual machine, including VMX, disks, logs, and NVRAM.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm46552704299680">
								<p>
									<code class="literal">Virtual machine.Provisioning.Allow read-only disk access</code>
								</p>
								</td><td align="left" valign="top" headers="idm46552706284096">
								<p>
									Allows opening a disk on a virtual machine for random read access. Used mostly for remote disk mounting.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm46552704299680">
								<p>
									<code class="literal">Virtual machine.Provisioning.Allow virtual machine download</code>
								</p>
								</td><td align="left" valign="top" headers="idm46552706284096">
								<p>
									Allows read operations on files associated with a virtual machine, including VMX, disks, logs, and NVRAM.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm46552704299680">
								<p>
									<code class="literal">Virtual machine.Provisioning.Allow virtual machine files upload</code>
								</p>
								</td><td align="left" valign="top" headers="idm46552706284096">
								<p>
									Allows write operations on files associated with a virtual machine, including VMX, disks, logs, and NVRAM.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm46552704299680">
								<p>
									<code class="literal">Virtual machine.Provisioning.Clone template</code>
								</p>
								</td><td align="left" valign="top" headers="idm46552706284096">
								<p>
									Allows cloning of a template.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm46552704299680">
								<p>
									<code class="literal">Virtual machine.Provisioning.Clone virtual machine</code>
								</p>
								</td><td align="left" valign="top" headers="idm46552706284096">
								<p>
									Allows cloning of an existing virtual machine and allocation of resources.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm46552704299680">
								<p>
									<code class="literal">Virtual machine.Provisioning.Create template from virtual machine</code>
								</p>
								</td><td align="left" valign="top" headers="idm46552706284096">
								<p>
									Allows creation of a new template from a virtual machine.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm46552704299680">
								<p>
									<code class="literal">Virtual machine.Provisioning.Customize guest</code>
								</p>
								</td><td align="left" valign="top" headers="idm46552706284096">
								<p>
									Allows customization of a virtual machine’s guest operating system without moving the virtual machine.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm46552704299680">
								<p>
									<code class="literal">Virtual machine.Provisioning.Deploy template</code>
								</p>
								</td><td align="left" valign="top" headers="idm46552706284096">
								<p>
									Allows deployment of a virtual machine from a template.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm46552704299680">
								<p>
									<code class="literal">Virtual machine.Provisioning.Mark as template</code>
								</p>
								</td><td align="left" valign="top" headers="idm46552706284096">
								<p>
									Allows marking an existing powered-off virtual machine as a template.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm46552704299680">
								<p>
									<code class="literal">Virtual machine.Provisioning.Mark as virtual machine</code>
								</p>
								</td><td align="left" valign="top" headers="idm46552706284096">
								<p>
									Allows marking an existing template as a virtual machine.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm46552704299680">
								<p>
									<code class="literal">Virtual machine.Provisioning.Modify customization specification</code>
								</p>
								</td><td align="left" valign="top" headers="idm46552706284096">
								<p>
									Allows creation, modification, or deletion of customization specifications.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm46552704299680">
								<p>
									<code class="literal">Virtual machine.Provisioning.Promote disks</code>
								</p>
								</td><td align="left" valign="top" headers="idm46552706284096">
								<p>
									Allows promote operations on a virtual machine’s disks.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm46552704299680">
								<p>
									<code class="literal">Virtual machine.Provisioning.Read customization specifications</code>
								</p>
								</td><td align="left" valign="top" headers="idm46552706284096">
								<p>
									Allows reading a customization specification.
								</p>
								</td></tr><tr><td colspan="2" align="left" valign="top" headers="idm46552704299680 idm46552706284096">
								<p>
									<code class="literal">Virtual machine.Snapshot management</code> privileges:
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm46552704299680">
								<p>
									<code class="literal">Virtual machine.Snapshot management.Create snapshot</code>
								</p>
								</td><td align="left" valign="top" headers="idm46552706284096">
								<p>
									Allows creation of a snapshot from the virtual machine’s current state.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm46552704299680">
								<p>
									<code class="literal">Virtual machine.Snapshot management.Remove Snapshot</code>
								</p>
								</td><td align="left" valign="top" headers="idm46552706284096">
								<p>
									Allows removal of a snapshot from the snapshot history.
								</p>
								</td></tr><tr><td colspan="2" align="left" valign="top" headers="idm46552704299680 idm46552706284096">
								<p>
									<code class="literal">Datastore</code> privileges:
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm46552704299680">
								<p>
									<code class="literal">Datastore.Browse datastore</code>
								</p>
								</td><td align="left" valign="top" headers="idm46552706284096">
								<p>
									Allows exploring the contents of a datastore.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm46552704299680">
								<p>
									<code class="literal">Datastore.Low level file operations</code>
								</p>
								</td><td align="left" valign="top" headers="idm46552706284096">
								<p>
									Allows performing low-level file operations - read, write, delete, and rename - in a datastore.
								</p>
								</td></tr><tr><td colspan="2" align="left" valign="top" headers="idm46552704299680 idm46552706284096">
								<p>
									<code class="literal">Sessions</code> privileges:
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm46552704299680">
								<p>
									<code class="literal">Sessions.Validate session</code>
								</p>
								</td><td align="left" valign="top" headers="idm46552706284096">
								<p>
									Allows verification of the validity of a session.
								</p>
								</td></tr><tr><td colspan="2" align="left" valign="top" headers="idm46552704299680 idm46552706284096">
								<p>
									<code class="literal">Cryptographic</code> privileges:
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm46552704299680">
								<p>
									<code class="literal">Cryptographic.Decrypt</code>
								</p>
								</td><td align="left" valign="top" headers="idm46552706284096">
								<p>
									Allows decryption of an encrypted virtual machine.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm46552704299680">
								<p>
									<code class="literal">Cryptographic.Direct access</code>
								</p>
								</td><td align="left" valign="top" headers="idm46552706284096">
								<p>
									Allows access to encrypted resources.
								</p>
								</td></tr></tbody></table></div></div><div class="admonition tip"><div class="admonition_header">Tip</div><div><p>
					Create a role in VMware with the permissions described in the preceding table and then apply this role to the <span class="strong strong"><strong>Inventory</strong></span> section, as described in <a class="link" href="#creating-vmware-role-mtv-permissions_mtv" title="5.3.2. Creating a VMware role to grant MTV privileges">Creating a VMware role to apply MTV permissions</a>.
				</p></div></div></section><section class="section" id="creating-vmware-role-mtv-permissions_mtv"><div class="titlepage"><div><div><h3 class="title">5.3.2. Creating a VMware role to grant MTV privileges</h3></div></div></div><p class="_abstract _abstract">
					You can create a role in VMware to grant privileges for Migration Toolkit for Virtualization (MTV) and then grant those privileges to users with that role.
				</p><p>
					The procedure that follows explains how to do this in general. For detailed instructions, see VMware documentation.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In the vCenter Server UI, create a role that includes the set of privileges described in the table in <a class="link" href="#vmware-prerequisites_mtv" title="5.3. VMware prerequisites">VMware prerequisites</a>.
						</li><li class="listitem"><p class="simpara">
							In the vSphere inventory UI, grant privileges for users with this role to the appropriate vSphere logical objects at one of the following levels:
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
									At the user or group level: Assign privileges to the appropriate logical objects in the data center and use the <span class="strong strong"><strong>Propagate to child objects</strong></span> option.
								</li><li class="listitem">
									At the object level: Apply the same role individually to all the relevant vSphere logical objects involved in the migration, for example, hosts, vSphere clusters, data centers, or networks.
								</li></ol></div></li></ol></div></section><section class="section" id="creating-vddk-image_mtv"><div class="titlepage"><div><div><h3 class="title">5.3.3. Creating a VDDK image</h3></div></div></div><p class="_abstract _abstract">
					It is strongly recommended that Migration Toolkit for Virtualization (MTV) should be used with the VMware Virtual Disk Development Kit (VDDK) SDK when transferring virtual disks from VMware vSphere.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						Creating a VDDK image, although optional, is highly recommended. Using MTV without VDDK is not recommended and could result in significantly lower migration speeds.
					</p></div></div><p>
					To make use of this feature, you download the VDDK, build a VDDK image, and push the VDDK image to your image registry.
				</p><p>
					The VDDK package contains symbolic links, therefore, the procedure of creating a VDDK image must be performed on a file system that preserves symbolic links (symlinks).
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						Storing the VDDK image in a public registry might violate the VMware license terms.
					</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.20/html/registry/setting-up-and-configuring-the-registry#configuring-registry-storage-baremetal">Red Hat OpenShift image registry</a>.
						</li><li class="listitem">
							You have <code class="literal">podman</code> installed.
						</li><li class="listitem">
							You are working on a file system that preserves symbolic links (symlinks).
						</li><li class="listitem">
							If you are using an external registry, OpenShift Virtualization must be able to access it.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Create and navigate to a temporary directory:
						</p><pre class="programlisting language-terminal">$ mkdir /tmp/&lt;dir_name&gt; &amp;&amp; cd /tmp/&lt;dir_name&gt;</pre></li><li class="listitem">
							In a browser, navigate to the <a class="link" href="https://developer.vmware.com/web/sdk/8.0/vddk">VMware VDDK version 8 download page</a>.
						</li><li class="listitem"><p class="simpara">
							Select version 8.0.1 and click <span class="strong strong"><strong>Download</strong></span>.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								To migrate to OpenShift Virtualization 4.12, download VDDK version 7.0.3.2 from the <a class="link" href="https://developer.vmware.com/web/sdk/7.0/vddk">VMware VDDK version 7 download page</a>.
							</p></div></div></li><li class="listitem">
							Save the VDDK archive file in the temporary directory.
						</li><li class="listitem"><p class="simpara">
							Extract the VDDK archive:
						</p><pre class="programlisting language-terminal">$ tar -xzf VMware-vix-disklib-&lt;version&gt;.x86_64.tar.gz</pre></li><li class="listitem"><p class="simpara">
							Create a <code class="literal">Dockerfile</code>:
						</p><pre class="programlisting language-terminal">$ cat &gt; Dockerfile &lt;&lt;EOF
FROM registry.access.redhat.com/ubi8/ubi-minimal
USER 1001
COPY vmware-vix-disklib-distrib /vmware-vix-disklib-distrib
RUN mkdir -p /opt
ENTRYPOINT ["cp", "-r", "/vmware-vix-disklib-distrib", "/opt"]
EOF</pre></li><li class="listitem"><p class="simpara">
							Build the VDDK image:
						</p><pre class="programlisting language-terminal">$ podman build . -t &lt;registry_route_or_server_path&gt;/vddk:&lt;tag&gt;</pre></li><li class="listitem"><p class="simpara">
							Push the VDDK image to the registry:
						</p><pre class="programlisting language-terminal">$ podman push &lt;registry_route_or_server_path&gt;/vddk:&lt;tag&gt;</pre></li><li class="listitem">
							Ensure that the image is accessible to your OpenShift Virtualization environment.
						</li></ol></div></section><section class="section" id="increasing-nfc-memory-vmware-host_mtv"><div class="titlepage"><div><div><h3 class="title">5.3.4. Increasing the NFC service memory of an ESXi host</h3></div></div></div><p class="_abstract _abstract">
					If you are migrating more than 10 VMs from an ESXi host in the same migration plan, you must increase the Network File copy (NFC) service memory of the host. Otherwise, the migration fails because the NFC service memory is limited to 10 parallel connections.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Log in to the ESXi host as root.
						</li><li class="listitem"><p class="simpara">
							Change the value of <code class="literal">maxMemory</code> to <code class="literal">1000000000</code> in <code class="literal">/etc/vmware/hostd/config.xml</code>:
						</p><pre class="programlisting language-xml">...
      &lt;nfcsvc&gt;
         &lt;path&gt;libnfcsvc.so&lt;/path&gt;
         &lt;enabled&gt;true&lt;/enabled&gt;
         &lt;maxMemory&gt;1000000000&lt;/maxMemory&gt;
         &lt;maxStreamMemory&gt;10485760&lt;/maxStreamMemory&gt;
      &lt;/nfcsvc&gt;
...</pre></li><li class="listitem"><p class="simpara">
							Restart <code class="literal">hostd</code>:
						</p><pre class="programlisting language-terminal"># /etc/init.d/hostd restart</pre><p class="simpara">
							You do not need to reboot the host.
						</p></li></ol></div></section><section class="section" id="vddk-validator-containers_mtv"><div class="titlepage"><div><div><h3 class="title">5.3.5. VDDK validator containers need requests and limits</h3></div></div></div><p class="_abstract _abstract">
					If you have the <a class="link" href="https://docs.openshift.com/container-platform/4.20/applications/quotas/quotas-setting-per-project.html">cluster or project resource quotas set</a>, you must ensure that you have a sufficient quota for the MTV pods to perform the migration. 
				</p><p>
					You can see the defaults, which you can override in the <code class="literal">ForkliftController</code> custom resource (CR), listed as follows. If necessary, you can adjust these defaults. 
				</p><p>
					These settings are highly dependent on your environment. If there are many migrations happening at once and the quotas are not set enough for the migrations, then the migrations can fail. This can also be correlated to the <code class="literal">MAX_VM_INFLIGHT</code> setting that determines how many VMs/disks are migrated at once.
				</p><p>
					The following defaults can be overriden in the <code class="literal">ForkliftController</code> CR:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Defaults that affect both cold and warm migrations:
						</p><p class="simpara">
							For cold migration, it is likely to be more resource intensive as it performs the disk copy. For warm migration, you could potentially reduce the requests.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									virt_v2v_container_limits_cpu: <code class="literal">4000m</code>
								</li><li class="listitem">
									virt_v2v_container_limits_memory: <code class="literal">8Gi</code>
								</li><li class="listitem">
									virt_v2v_container_requests_cpu: <code class="literal">1000m</code>
								</li><li class="listitem"><p class="simpara">
									virt_v2v_container_requests_memory: <code class="literal">1Gi</code>
								</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
										Cold and warm migration using <code class="literal">virt-v2v</code> can be resource-intensive. For more details, see <a class="link" href="https://libguestfs.org/virt-v2v.1.html#compute-power-and-ram">Compute power and RAM</a>.
									</p></div></div></li></ul></div></li><li class="listitem"><p class="simpara">
							Defaults that affect any migrations with hooks:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									hooks_container_limits_cpu: <code class="literal">1000m</code>
								</li><li class="listitem">
									hooks_container_limits_memory: <code class="literal">1Gi</code>
								</li><li class="listitem">
									hooks_container_requests_cpu: <code class="literal">100m</code>
								</li><li class="listitem">
									hooks_container_requests_memory: <code class="literal">150Mi</code>
								</li></ul></div></li><li class="listitem"><p class="simpara">
							Defaults that affect any OVA migrations:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									ova_container_limits_cpu: <code class="literal">1000m</code>
								</li><li class="listitem">
									ova_container_limits_memory: <code class="literal">1Gi</code>
								</li><li class="listitem">
									ova_container_requests_cpu: <code class="literal">100m</code>
								</li><li class="listitem">
									ova_container_requests_memory: <code class="literal">150Mi</code>
								</li></ul></div></li></ul></div></section></section><section class="section" id="ova-prerequisites_mtv"><div class="titlepage"><div><div><h2 class="title">5.4. Open Virtual Appliance (OVA) prerequisites</h2></div></div></div><p class="_abstract _abstract">
				Open Virtual Appliance (OVA) migrations to OpenShift Virtualization require VMware vSphere files in NFS-shared directories. OVA files can be compressed Open Virtualization Format (OVF) packages with <code class="literal">.ova</code> extensions or extracted packages. Migration Toolkit for Virtualization (MTV) scans root and first-level subfolders for compressed packages, and up to second-level subfolders for extracted packages.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					Migration of OVA files that were not created by VMware vSphere but are compatible with vSphere might succeed. However, migration of such files is not supported by MTV. MTV supports only OVA files created by VMware vSphere.
				</p></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">Prerequisites</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									The NFS share is writable by the QEMU group (GID 107) if you plan to use the web upload feature for OVA files.
								</li><li class="listitem"><p class="simpara">
									The OVA files are in one or more folders under an NFS shared directory in one of the following structures:
								</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
											In one or more compressed OVF packages that hold all the VM information.
										</p><p class="simpara">
											The filename of each compressed package <span class="strong strong"><strong>must</strong></span> have the <code class="literal">.ova</code> extension. Several compressed packages can be stored in the same folder.
										</p><p class="simpara">
											When this structure is used, MTV scans the root folder and the first-level subfolders for compressed packages.
										</p><p class="simpara">
											For example, if the NFS share is <code class="literal">/nfs</code>, then:
										</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem">
													The folder <code class="literal">/nfs</code> is scanned.
												</li><li class="listitem">
													The folder <code class="literal">/nfs/subfolder1</code> is scanned.
												</li><li class="listitem">
													However, <code class="literal">/nfs/subfolder1/subfolder2</code> is not scanned.
												</li></ul></div></li><li class="listitem"><p class="simpara">
											In extracted OVF packages.
										</p><p class="simpara">
											When this structure is used, MTV scans the root folder, first-level subfolders, and second-level subfolders for extracted OVF packages.
										</p><p class="simpara">
											However, there can be only one <code class="literal">.ovf</code> file in a folder. Otherwise, the migration will fail.
										</p><p class="simpara">
											For example, if the NFS share is <code class="literal">/nfs</code>, then:
										</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem">
													The OVF file <code class="literal">/nfs/vm.ovf</code> is scanned.
												</li><li class="listitem">
													The OVF file <code class="literal">/nfs/subfolder1/vm.ovf</code> is scanned.
												</li><li class="listitem">
													The OVF file <code class="literal">/nfs/subfolder1/subfolder2/vm.ovf</code> is scanned.
												</li><li class="listitem">
													However, the OVF file <code class="literal">/nfs/subfolder1/subfolder2/subfolder3/vm.ovf</code> is not scanned.
												</li></ul></div></li></ul></div></li><li class="listitem">
									If you plan to upload OVA files using the web browser, ensure that each .ova file has a unique filename.
								</li></ul></div></dd></dl></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					You can optionally configure OVA file upload by web browser to upload OVA files directly to the NFS share. For more information, see <a class="link" href="#proc_configuring-ova-web-upload_ova" title="13.8. Configuring OVA file upload by web browser">Configuring OVA file upload by web browser</a>.
				</p></div></div></section><section class="section" id="cnv-prerequisites_mtv"><div class="titlepage"><div><div><h2 class="title">5.5. OpenShift Virtualization prerequisites</h2></div></div></div><p class="_abstract _abstract">
				To migrate between OpenShift Virtualization clusters, verify that both clusters have matching Migration Toolkit for Virtualization (MTV) versions and the source uses OpenShift Virtualization 4.16 or later. You can migrate forward to newer OpenShift Virtualization versions if both are compatible with your MTV version.
			</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					It is strongly recommended to migrate only between clusters with the same version of OpenShift Virtualization, although migration from an earlier version of OpenShift Virtualization to a later one is supported.
				</p></div></div><section class="section" id="cnv-cnv-live-prerequisites_mtv"><div class="titlepage"><div><div><h3 class="title">5.5.1. OpenShift Virtualization live migration prerequisites</h3></div></div></div><p class="_abstract _abstract">
					In addition to the regular <a class="link" href="#cnv-prerequisites_mtv" title="5.5. OpenShift Virtualization prerequisites">OpenShift Virtualization prerequisites</a>, live migration has the following additional prerequisites:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Migration Toolkit for Virtualization (MTV) 2.10.0 or later installed. MTV treats all OpenShift Virtualization migrations run on MTV 2.9 or earlier as cold migrations, even if they are configured as live migrations.
						</li><li class="listitem">
							OpenShift Virtualization 4.20.0 or later installed on both source and target clusters.
						</li><li class="listitem">
							In the MTV Operator, in the <code class="literal">spec</code> portion of the <code class="literal">forklift-controller</code> YAML, <code class="literal">feature_ocp_live_migration</code> is set to <code class="literal">true</code>. You must have <code class="literal">cluster-admin</code> privileges to set this field.
						</li><li class="listitem">
							In the <code class="literal">KubeVirt</code> resource of both clusters in the <code class="literal">featureGates</code> of the YAML,<code class="literal">DecentralizedLiveMigration</code> is listed. You must have <code class="literal">cluster-admin</code> privileges to set this field.
						</li><li class="listitem">
							Connectivity between the clusters must be established, including connectivity for state transfer. Technologies such as Submariner can be used for this purpose.
						</li><li class="listitem">
							The target cluster has <code class="literal">VirtualMachineInstanceTypes</code> and <code class="literal">VirtualMachinePreferences</code> that match those used by the VMs on the source cluster.
						</li></ul></div></section></section><section class="section" id="compatibility-guidelines_mtv"><div class="titlepage"><div><div><h2 class="title">5.6. Software compatibility guidelines</h2></div></div></div><p class="_abstract _abstract">
				You must install compatible software versions. The table that follows lists the relevant software versions for this version of Migration Toolkit for Virtualization (MTV).
			</p><div class="table" id="idm46552705221712"><p class="title"><strong>Table 5.2. Compatible software versions</strong></p><div class="table-contents"><table class="gt-4-cols lt-7-rows"><colgroup><col style="width: 17%; " class="col_1"/><col style="width: 17%; " class="col_2"/><col style="width: 17%; " class="col_3"/><col style="width: 17%; " class="col_4"/><col style="width: 17%; " class="col_5"/><col style="width: 17%; " class="col_6"/></colgroup><thead><tr><th align="left" valign="top" id="idm46552705439552" scope="col">Migration Toolkit for Virtualization</th><th align="left" valign="top" id="idm46552705438448" scope="col">Red Hat OpenShift</th><th align="left" valign="top" id="idm46552705437360" scope="col">OpenShift Virtualization</th><th align="left" valign="top" id="idm46552705094032" scope="col">VMware vSphere</th><th align="left" valign="top" id="idm46552705092944" scope="col">Red Hat Virtualization</th><th align="left" valign="top" id="idm46552705091856" scope="col">OpenStack</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm46552705439552">
							<p>
								2.10
							</p>
							</td><td align="left" valign="top" headers="idm46552705438448">
							<p>
								4.20, 4.19, 4.18
							</p>
							</td><td align="left" valign="top" headers="idm46552705437360">
							<p>
								4.20, 4.19, 4.18
							</p>
							</td><td align="left" valign="top" headers="idm46552705094032">
							<p>
								6.5 or later
							</p>
							</td><td align="left" valign="top" headers="idm46552705092944">
							<p>
								4.4 SP1 or later
							</p>
							</td><td align="left" valign="top" headers="idm46552705091856">
							<p>
								16.1 or later
							</p>
							</td></tr></tbody></table></div></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					Migration from Red Hat Virtualization 4.3
				</p><p>
					MTV was tested only with Red Hat Virtualization 4.4 SP1. Migration from Red Hat Virtualization (RHV) 4.3 has not been tested with MTV 2.10. While not supported, basic migrations from RHV 4.3 are expected to work.
				</p><p>
					Generally it is advised to upgrade Red Hat Virtualization Manager to the previously mentioned supported version before the migration to OpenShift Virtualization.
				</p><p>
					Therefore, it is recommended to upgrade RHV to the supported version above before the migration to OpenShift Virtualization.
				</p><p>
					However, migrations from RHV 4.3.11 were tested with MTV 2.3, and might work in practice in many environments using MTV 2.10. In this case, it is recommended to upgrade Red Hat Virtualization Manager to the previously mentioned supported version before the migration to OpenShift Virtualization.
				</p></div></div><section class="section" id="openshift-operator-life-cycles"><div class="titlepage"><div><div><h3 class="title">5.6.1. OpenShift Operator Life Cycles</h3></div></div></div><p>
					For more information about the software maintenance Life Cycle classifications for Operators shipped by Red Hat for use with OpenShift Container Platform, see <a class="link" href="https://access.redhat.com/support/policy/updates/openshift_operators#platform-agnostic">OpenShift Operator Life Cycles</a>.
				</p></section></section></section><section class="chapter" id="assembly_installing-mtv-operator_mtv"><div class="titlepage"><div><div><h1 class="title">Chapter 6. Installing and configuring the MTV Operator</h1></div></div></div><p class="_abstract _abstract">
			You can install the MTV Operator by using the Red Hat OpenShift web console or CLI. Migration Toolkit for Virtualization (MTV) version 2.4 and later includes the MTV plugin for the web console.
		</p><section class="section" id="installing-mtv-operator_web"><div class="titlepage"><div><div><h2 class="title">6.1. Installing the MTV Operator by using the Red Hat OpenShift web console</h2></div></div></div><p class="_abstract _abstract">
				You can install the MTV Operator by using the Red Hat OpenShift web console.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Red Hat OpenShift 4.20, 4.19, 4.18 installed.
					</li><li class="listitem">
						OpenShift Virtualization Operator installed on an OpenShift migration target cluster.
					</li><li class="listitem">
						You must be logged in as a user with <code class="literal">cluster-admin</code> permissions.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						In the Red Hat OpenShift web console, click <span class="strong strong"><strong>Operators</strong></span> → <span class="strong strong"><strong>OperatorHub</strong></span>.
					</li><li class="listitem">
						Use the <span class="strong strong"><strong>Filter by keyword</strong></span> field to search for <span class="strong strong"><strong>mtv-operator</strong></span>.
					</li><li class="listitem">
						Click <span class="strong strong"><strong>Migration Toolkit for Virtualization Operator</strong></span> and then click <span class="strong strong"><strong>Install</strong></span>.
					</li><li class="listitem">
						Click <span class="strong strong"><strong>Create ForkliftController</strong></span> when the button becomes active.
					</li><li class="listitem"><p class="simpara">
						Click <span class="strong strong"><strong>Create</strong></span>.
					</p><p class="simpara">
						Your ForkliftController appears in the list that is displayed.
					</p></li><li class="listitem">
						Click <span class="strong strong"><strong>Workloads</strong></span> → <span class="strong strong"><strong>Pods</strong></span> to verify that the MTV pods are running.
					</li><li class="listitem"><p class="simpara">
						Click <span class="strong strong"><strong>Operators</strong></span> → <span class="strong strong"><strong>Installed Operators</strong></span> to verify that <span class="strong strong"><strong>Migration Toolkit for Virtualization Operator</strong></span> appears in the <span class="strong strong"><strong>openshift-mtv</strong></span> project with the status <span class="strong strong"><strong>Succeeded</strong></span>.
					</p><p class="simpara">
						When the plugin is ready you will be prompted to reload the page. The <span class="strong strong"><strong>Migration</strong></span> menu item is automatically added to the navigation bar, displayed on the left of the Red Hat OpenShift web console.
					</p></li></ol></div></section><section class="section" id="installing-mtv-operator_cli"><div class="titlepage"><div><div><h2 class="title">6.2. Installing the MTV Operator by using the command-line interface</h2></div></div></div><p class="_abstract _abstract">
				You can install the MTV Operator by using the command-line interface (CLI).
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Red Hat OpenShift 4.20, 4.19, 4.18 installed.
					</li><li class="listitem">
						OpenShift Virtualization Operator installed on an OpenShift migration target cluster.
					</li><li class="listitem">
						You must be logged in as a user with <code class="literal">cluster-admin</code> permissions.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create the openshift-mtv project:
					</p><pre class="programlisting language-terminal">$ cat &lt;&lt; EOF | oc apply -f -
apiVersion: project.openshift.io/v1
kind: Project
metadata:
  name: openshift-mtv
EOF</pre></li><li class="listitem"><p class="simpara">
						Create an <code class="literal">OperatorGroup</code> CR called <code class="literal">migration</code>:
					</p><pre class="programlisting language-terminal">$ cat &lt;&lt; EOF | oc apply -f -
apiVersion: operators.coreos.com/v1
kind: OperatorGroup
metadata:
  name: migration
  namespace: openshift-mtv
spec:
  targetNamespaces:
    - openshift-mtv
EOF</pre></li><li class="listitem"><p class="simpara">
						Create a <code class="literal">Subscription</code> CR for the Operator:
					</p><pre class="programlisting language-terminal">$ cat &lt;&lt; EOF | oc apply -f -
apiVersion: operators.coreos.com/v1alpha1
kind: Subscription
metadata:
  name: mtv-operator
  namespace: openshift-mtv
spec:
  channel: release-v2.10
  installPlanApproval: Automatic
  name: mtv-operator
  source: redhat-operators
  sourceNamespace: openshift-marketplace
  startingCSV: "mtv-operator.v2.10.2"
EOF</pre></li><li class="listitem"><p class="simpara">
						Create a <code class="literal">ForkliftController</code> CR:
					</p><pre class="programlisting language-terminal">$ cat &lt;&lt; EOF | oc apply -f -
apiVersion: forklift.konveyor.io/v1beta1
kind: ForkliftController
metadata:
  name: forklift-controller
  namespace: openshift-mtv
spec:
  olm_managed: true
EOF</pre></li><li class="listitem"><p class="simpara">
						Verify that the MTV pods are running:
					</p><pre class="programlisting language-terminal">$ oc get pods -n openshift-mtv</pre><p class="simpara">
						The following is example output:
					</p><p class="simpara">
						Example:
					</p></li></ol></div><pre class="screen">NAME                                                    READY   STATUS    RESTARTS   AGE
forklift-api-bb45b8db4-cpzlg                            1/1     Running   0          6m34s
forklift-controller-7649db6845-zd25p                    2/2     Running   0          6m38s
forklift-must-gather-api-78fb4bcdf6-h2r4m               1/1     Running   0          6m28s
forklift-operator-59c87cfbdc-pmkfc                      1/1     Running   0          28m
forklift-ui-plugin-5c5564f6d6-zpd85                     1/1     Running   0          6m24s
forklift-validation-7d84c74c6f-fj9xg                    1/1     Running   0          6m30s
forklift-volume-populator-controller-85d5cb64b6-mrlmc   1/1     Running   0          6m36s</pre></section><section class="section" id="configuring-mtv-operator_mtv"><div class="titlepage"><div><div><h2 class="title">6.3. Configuring the MTV Operator</h2></div></div></div><p class="_abstract _abstract">
				Configure the MTV Operator through the <span class="strong strong"><strong>Settings</strong></span> section of the <span class="strong strong"><strong>Overview</strong></span> page or by modifying the <code class="literal">ForkliftController</code> custom resource (CR). Some configurations are available only in the CR.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					You can only use the string values "true" and "false" for feature gates, such as plugins and some services, in the <code class="literal">ForkliftController</code> CR. The <code class="literal">ForkliftController</code> API does not accept boolean values for these settings.
				</p></div></div><p>
				For information about the <span class="strong strong"><strong>Settings</strong></span> section of the <span class="strong strong"><strong>Overview</strong></span> page, see <a class="link" href="#overview-settings-tab_mtv" title="7.2.5. Settings tab">Settings tab</a>.
			</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Change a parameter’s value in the <code class="literal">spec</code> section of the <code class="literal">ForkliftController</code> CR by adding the parameter and value as follows:
					</p><pre class="programlisting language-yaml">spec:
  &lt;parameter: value&gt;</pre><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								Replace <code class="literal">&lt;parameter: value&gt;</code> with one of the parameters from the MTV Operator parameters table. For more information, see <a class="link" href="#ref_mtv-operator-parameters_mtv" title="6.4. MTV Operator parameters">MTV Operator parameters</a>.
							</li></ul></div></li></ul></div></section><section class="section" id="ref_mtv-operator-parameters_mtv"><div class="titlepage"><div><div><h2 class="title">6.4. MTV Operator parameters</h2></div></div></div><p class="_abstract _abstract">
				The MTV Operator parameters table contains a description of each MTV Operator parameter and its default value.
			</p><div class="table" id="idm46552704736896"><p class="title"><strong>Table 6.1. MTV Operator parameters</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"/><col style="width: 33%; " class="col_2"/><col style="width: 33%; " class="col_3"/></colgroup><thead><tr><th align="left" valign="top" id="idm46552705998608" scope="col">Parameter</th><th align="left" valign="top" id="idm46552705997520" scope="col">Description</th><th align="left" valign="top" id="idm46552705996432" scope="col">Default value</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm46552705998608">
							<p>
								<code class="literal">controller_max_vm_inflight</code>
							</p>
							</td><td align="left" valign="top" headers="idm46552705997520">
							<p>
								The maximum number of disks or VMs that can transfer or migrate simultaneously. Varies with provider. For more information, see <a class="link" href="#ref_max-concurrent-vms_mtv" title="6.5. Configuring the controller_max_vm_inflight parameter">Configuring the controller_max_vm_inflight parameter</a>.
							</p>
							</td><td align="left" valign="top" headers="idm46552705996432">
							<p>
								<code class="literal">20</code>
							</p>
							</td></tr><tr><td align="left" valign="top" headers="idm46552705998608">
							<p>
								<code class="literal">must_gather_api_cleanup_max_age</code>
							</p>
							</td><td align="left" valign="top" headers="idm46552705997520">
							<p>
								The duration in hours for retaining <code class="literal">must gather</code> reports before they are automatically deleted.
							</p>
							</td><td align="left" valign="top" headers="idm46552705996432">
							<p>
								<code class="literal">-1</code> (disabled)
							</p>
							</td></tr><tr><td align="left" valign="top" headers="idm46552705998608">
							<p>
								<code class="literal">controller_container_limits_cpu</code>
							</p>
							</td><td align="left" valign="top" headers="idm46552705997520">
							<p>
								The CPU limit allocated to the main controller container.
							</p>
							</td><td align="left" valign="top" headers="idm46552705996432">
							<p>
								<code class="literal">500m</code>
							</p>
							</td></tr><tr><td align="left" valign="top" headers="idm46552705998608">
							<p>
								<code class="literal">controller_container_limits_memory</code>
							</p>
							</td><td align="left" valign="top" headers="idm46552705997520">
							<p>
								The memory limit allocated to the main controller container.
							</p>
							</td><td align="left" valign="top" headers="idm46552705996432">
							<p>
								<code class="literal">800Mi</code>
							</p>
							</td></tr><tr><td align="left" valign="top" headers="idm46552705998608">
							<p>
								<code class="literal">controller_precopy_interval</code>
							</p>
							</td><td align="left" valign="top" headers="idm46552705997520">
							<p>
								The interval in minutes at which a new snapshot is requested before initiating a warm migration.
							</p>
							</td><td align="left" valign="top" headers="idm46552705996432">
							<p>
								<code class="literal">60</code>
							</p>
							</td></tr><tr><td align="left" valign="top" headers="idm46552705998608">
							<p>
								<code class="literal">controller_snapshot_status_check_rate_seconds</code>
							</p>
							</td><td align="left" valign="top" headers="idm46552705997520">
							<p>
								The frequency in seconds with which the system checks the status of snapshot creation or removal during a warm migration.
							</p>
							</td><td align="left" valign="top" headers="idm46552705996432">
							<p>
								<code class="literal">10</code>
							</p>
							</td></tr><tr><td align="left" valign="top" headers="idm46552705998608">
							<p>
								<code class="literal">controller_filesystem_overhead</code>
							</p>
							</td><td align="left" valign="top" headers="idm46552705997520">
							<p>
								Percentage of space in persistent volumes allocated as file system overhead when the <code class="literal">storageclass</code> is <code class="literal">filesystem</code>.
							</p>
							<p>
								<span class="strong strong"><strong><code class="literal">ForkliftController</code> CR only.</strong></span>
							</p>
							</td><td align="left" valign="top" headers="idm46552705996432">
							<p>
								<code class="literal">10</code>
							</p>
							</td></tr><tr><td align="left" valign="top" headers="idm46552705998608">
							<p>
								<code class="literal">controller_block_overhead</code>
							</p>
							</td><td align="left" valign="top" headers="idm46552705997520">
							<p>
								Fixed amount of additional space allocated in persistent block volumes. This setting is applicable for any <code class="literal">storageclass</code> that is block-based. It can be used when data, such as encryption headers, is written to the persistent volumes in addition to the content of the virtual disk.
							</p>
							<p>
								<span class="strong strong"><strong><code class="literal">ForkliftController</code> CR only.</strong></span>
							</p>
							</td><td align="left" valign="top" headers="idm46552705996432">
							<p>
								<code class="literal">0</code>
							</p>
							</td></tr><tr><td align="left" valign="top" headers="idm46552705998608">
							<p>
								<code class="literal">vsphere_osmap_configmap_name</code>
							</p>
							</td><td align="left" valign="top" headers="idm46552705997520">
							<p>
								Config map for vSphere source providers. This config map maps the operating system of the incoming VM to a OpenShift Virtualization preference name. This config map needs to be in the namespace where the MTV Operator is deployed.
							</p>
							<p>
								To see the list of preferences in your OpenShift Virtualization environment, open the OpenShift web console and click <span class="strong strong"><strong>Virtualization</strong></span> &gt; <span class="strong strong"><strong>Preferences</strong></span>.
							</p>
							<p>
								Add values to the config map when this parameter has the default value, <code class="literal">forklift-vsphere-osmap.</code> To override or delete values, specify a config map that is different from <code class="literal">forklift-vsphere-osmap</code>.
							</p>
							<p>
								<span class="strong strong"><strong><code class="literal">ForkliftController</code> CR only.</strong></span>
							</p>
							</td><td align="left" valign="top" headers="idm46552705996432">
							<p>
								<code class="literal">forklift-vsphere-osmap</code>
							</p>
							</td></tr><tr><td align="left" valign="top" headers="idm46552705998608">
							<p>
								<code class="literal">ovirt_osmap_configmap_name</code>
							</p>
							</td><td align="left" valign="top" headers="idm46552705997520">
							<p>
								Config map for RHV source providers. This config map maps the operating system of the incoming VM to a OpenShift Virtualization preference name. This config map needs to be in the namespace where the MTV Operator is deployed.
							</p>
							<p>
								To see the list of preferences in your OpenShift Virtualization environment, open the OpenShift web console and click <span class="strong strong"><strong>Virtualization</strong></span> → <span class="strong strong"><strong>Preferences</strong></span>.
							</p>
							<p>
								You can add values to the config map when this parameter has the default value, <code class="literal">forklift-ovirt-osmap.</code> To override or delete values, specify a config map that is different from <code class="literal">forklift-ovirt-osmap</code>.
							</p>
							<p>
								<span class="strong strong"><strong><code class="literal">ForkliftController</code> CR only.</strong></span>
							</p>
							</td><td align="left" valign="top" headers="idm46552705996432">
							<p>
								<code class="literal">forklift-ovirt-osmap</code>
							</p>
							</td></tr><tr><td align="left" valign="top" headers="idm46552705998608">
							<p>
								<code class="literal">controller_retain_precopy_importer_pods</code>
							</p>
							</td><td align="left" valign="top" headers="idm46552705997520">
							<p>
								Whether to retain importer pods so that the Containerized Data Importer (CDI) does not delete them during migration.
							</p>
							<p>
								<span class="strong strong"><strong><code class="literal">ForkliftController</code> CR only.</strong></span>
							</p>
							</td><td align="left" valign="top" headers="idm46552705996432">
							<p>
								<code class="literal">false</code>
							</p>
							</td></tr></tbody></table></div></div></section><section class="section" id="ref_max-concurrent-vms_mtv"><div class="titlepage"><div><div><h2 class="title">6.5. Configuring the controller_max_vm_inflight parameter</h2></div></div></div><p class="_abstract _abstract">
				The value of <code class="literal">controller_max_vm_inflight</code> parameter, which is shown in the UI as <span class="strong strong"><strong>Max concurrent virtual machine migrations</strong></span>, varies by the source provider of the migration
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						For all migrations except Open Virtual Appliance (OVA) or VMware migrations, the parameter specifies the maximum number of <span class="emphasis"><em>disks</em></span> that Migration Toolkit for Virtualization (MTV) can transfer simultaneously. In these migrations, MTV migrates the disks in parallel. This means that if the combined number of disks that you want to migrate is greater than the value of the setting, additional disks must wait until the queue is free, without regard for whether a VM has finished migrating.
					</p><p class="simpara">
						For example, if the value of the parameter is 15, and VM A has 5 disks, VM B has 5 disks, and VM C has 6 disks, all the disks except for the 16th disk start migrating at the same time. Once any of them has migrated, the 16th disk can be migrated, even though not all the disks on VM A and the disks on VM B have finished migrating.
					</p></li><li class="listitem"><p class="simpara">
						For OVA migrations, the parameter specifies the maximum number of <span class="emphasis"><em>VMs</em></span> that MTV can migrate simultaneously, meaning that all additional disks must wait until at least one VM has been completely migrated.
					</p><p class="simpara">
						For example, if the value of the parameter is 2, and VM A has 5 disks, VM B has 5 disks, and VM C has 6 disks, all the disks on VM C must wait to migrate until either all the disks on VM A or on VM B finish migrating.
					</p></li><li class="listitem"><p class="simpara">
						For VMware migrations, the parameter has the following meanings:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
								Cold migration:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem">
										To local OpenShift Virtualization: VMs for each ESXi host that can migrate simultaneously.
									</li><li class="listitem">
										To remote OpenShift Virtualization: Disks for each ESXi host that can migrate simultaneously.
									</li></ul></div></li><li class="listitem">
								Warm migration: Disks for each ESXi host that can migrate simultaneously.
							</li></ul></div></li></ul></div></section></section><section class="chapter" id="assembly_migrating-vms-web-console_mtv"><div class="titlepage"><div><div><h1 class="title">Chapter 7. Migrating virtual machines by using the Red Hat OpenShift web console</h1></div></div></div><p class="_abstract _abstract">
			Use the MTV user interface to migrate VMs. It is located in the <span class="strong strong"><strong>Virtualization</strong></span> section of the Red Hat OpenShift web console.
		</p><section class="section" id="mtv-ui_mtv"><div class="titlepage"><div><div><h2 class="title">7.1. The MTV user interface</h2></div></div></div><p class="_abstract _abstract">
				The Migration Toolkit for Virtualization (MTV) user interface is integrated into the OpenShift web console.
			</p><p>
				In the left panel, you can choose a page related to a component of the migration progress, for example, <span class="strong strong"><strong>Providers</strong></span>. Or, if you are an administrator, you can choose <span class="strong strong"><strong>Overview</strong></span>, which contains information about migrations and lets you configure MTV settings.
			</p><p>
				In pages related to components, you can click on the <span class="strong strong"><strong>Projects</strong></span> list, which is in the upper-left portion of the page, and see which projects (namespaces) you are allowed to work with.
			</p></section><section class="section" id="mtv-overview-page_mtv"><div class="titlepage"><div><div><h2 class="title">7.2. The MTV Overview page</h2></div></div></div><p class="_abstract _abstract">
				The Migration Toolkit for Virtualization (MTV) <span class="strong strong"><strong>Overview</strong></span> page displays system-wide information about migrations and a list of <span class="strong strong"><strong>Settings</strong></span> you can change.
			</p><p>
				If you have Administrator privileges, you can access the <span class="strong strong"><strong>Overview</strong></span> page by clicking <span class="strong strong"><strong>Migration for Virtualization</strong></span> &gt; <span class="strong strong"><strong>Overview</strong></span> in the Red Hat OpenShift web console.
			</p><p>
				The <span class="strong strong"><strong>Overview</strong></span> page has 3 tabs:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Overview
					</li><li class="listitem">
						YAML
					</li><li class="listitem">
						Health
					</li><li class="listitem">
						History
					</li><li class="listitem">
						Settings
					</li></ul></div><section class="section" id="overview-tab_mtv"><div class="titlepage"><div><div><h3 class="title">7.2.1. Overview tab</h3></div></div></div><p>
					The <span class="strong strong"><strong>Overview</strong></span> tab is to help you quickly create providers and find information about the whole system:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							In the upper pane, is the <span class="strong strong"><strong>Welcome</strong></span> section, which includes buttons that let you open the <span class="strong strong"><strong>Create provider</strong></span> UI for each vendor (VMware, Open Virtual Appliance, OpenStack, Red Hat Virtualization, and OpenShift Virtualization). You can close this section by clicking the Options menu 
							<span class="inlinemediaobject"><img src="images/modules/images/kebab.png" height="20" alt="kebab"/></span>
							 in the upper-right corner and selecting <span class="strong strong"><strong>Hide from view</strong></span>. You can reopen it by clicking <span class="strong strong"><strong>Show the welcome card</strong></span> in the upper-right corner.
						</li><li class="listitem"><p class="simpara">
							In the center-left pane is a "donut" chart named <span class="strong strong"><strong>Virtual machines</strong></span>. This chart shows the number of running, failed, and successful virtual machine migrations that MTV ran for the time interval that you select. You can choose a different interval by clicking the list in the upper-right corner of the pane. You can select a different interval by clicking the list. The options are: Last 24 hours, Last 10 days, Last 31 days, and All. By clicking on each division of the chart, you can navigate to the <span class="strong strong"><strong>History</strong></span> tab for information about the migrations.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								Data for this chart includes only the most recent run of a migration plan that was modified due to a failure. For example, if a plan with 3 VMs fails 4 times, then this chart shows that 3 VMs failed, not 12.
							</p></div></div></li><li class="listitem">
							In the center-right pane is an area chart named <span class="strong strong"><strong>Migration history</strong></span>. This chart shows the number of migrations that succeeded, failed, or were running during the interval shown in the title of the chart. You can choose a different interval by clicking the Options menu 
							<span class="inlinemediaobject"><img src="images/modules/images/kebab.png" height="20" alt="kebab"/></span>
							 in the upper-right corner of the pane. The options are: Last 24 hours, Last 10 days, and Last 31 days. By clicking on each division of the chart, you can navigate to the <span class="strong strong"><strong>History</strong></span> tab for information about the migrations.
						</li><li class="listitem"><p class="simpara">
							In the lower-left pane is a "donut" chart named <span class="strong strong"><strong>Migration plans</strong></span>. This chart shows the current number of migration plans grouped by their status. This includes plans that were not started, cannot be started, are incomplete, archived, paused, or have an unknown status. By clicking the <span class="strong strong"><strong>Show all plans</strong></span> link, you can quickly navigate to the <span class="strong strong"><strong>Migration plans</strong></span> page.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								Since a single migration might involve many virtual machines, the number of migrations performed using MTV might vary significantly from the number of migrated virtual machines.
							</p></div></div></li><li class="listitem">
							In the lower-right pane is a table named <span class="strong strong"><strong>MTV health</strong></span>. This table lists all of the MTV pods. The most important one, <code class="literal">forklift-controller</code>, is first. The remaining pods are listed in alphabetical order. The <span class="strong strong"><strong>View all</strong></span> link opens the <span class="strong strong"><strong>Health</strong></span> tab. The status and creation time of each pod are listed. You can also see a link to the logs of each pod.
						</li></ul></div></section><section class="section" id="overview-yaml-tab_mtv"><div class="titlepage"><div><div><h3 class="title">7.2.2. YAML tab</h3></div></div></div><p>
					The <span class="strong strong"><strong>YAML</strong></span> tab displays the <code class="literal">ForkliftController</code> custom resource (CR) that defines the operation of the MTV Operator. You can modify the CR in this tab.
				</p></section><section class="section" id="overview-health-tab_mtv"><div class="titlepage"><div><div><h3 class="title">7.2.3. Health tab</h3></div></div></div><p>
					The <span class="strong strong"><strong>Health</strong></span> tab has two panes:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							In the upper pane, there is a table named <span class="strong strong"><strong>Health</strong></span>. It lists all the MTV pods. The most important one, <code class="literal">forklift-controller</code>, is first. The remaining pods are listed in alphabetical order. For each pod, the status, and creation time of the pod are listed, and there is a link to the logs of the pod.
						</li><li class="listitem">
							In the lower pane, there is a table named <span class="strong strong"><strong>Conditions</strong></span>. It lists the following possible types (states) of the MTV Operator, the status of the type, the last time the condition was updated, the reason for the update, and a message about the condition.
						</li></ul></div></section><section class="section" id="overview-history-tab_mtv"><div class="titlepage"><div><div><h3 class="title">7.2.4. History tab</h3></div></div></div><p>
					The <span class="strong strong"><strong>History</strong></span> tab displays information about migrations.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							In the upper-left of the page, there is a filter that you can use to display only migrations of a certain status, for example, <span class="strong strong"><strong>Succeeded</strong></span>.
						</li><li class="listitem">
							To the right of the filter is the <span class="strong strong"><strong>Group by plan</strong></span> toggle switch, which lets you display either all migrations or view only the most recent migration run per plan within the specified time range.
						</li></ul></div></section><section class="section" id="overview-settings-tab_mtv"><div class="titlepage"><div><div><h3 class="title">7.2.5. Settings tab</h3></div></div></div><p>
					The table that follows describes the settings that are visible in the <span class="strong strong"><strong>Settings</strong></span> tab, their default values, and other possible values that can be set or chosen, if needed.
				</p><div class="table" id="idm46552696146576"><p class="title"><strong>Table 7.1. MTV settings</strong></p><div class="table-contents"><table class="gt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"/><col style="width: 25%; " class="col_2"/><col style="width: 25%; " class="col_3"/><col style="width: 25%; " class="col_4"/></colgroup><thead><tr><th align="left" valign="top" id="idm46552697745472" scope="col">Setting</th><th align="left" valign="top" id="idm46552697744384" scope="col">Description</th><th align="left" valign="top" id="idm46552697743296" scope="col">Default value</th><th align="left" valign="top" id="idm46552697742208" scope="col">Additional values</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm46552697745472">
								<p>
									Maximum concurrent VM migrations
								</p>
								</td><td align="left" valign="top" headers="idm46552697744384">
								<p>
									Varies with provider as follows:
								</p>
								<div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											For all migrations except OVA or VMware migrations: The maximum number of disks that MTV can transfer simultaneously.
										</li><li class="listitem">
											For OVA migrations: The maximum number of VMs that MTV can migrate simultaneously.
										</li><li class="listitem"><p class="simpara">
											For VMware migrations, the setting has the following meanings:
										</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
													Cold migration:
												</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem">
															To local OpenShift Virtualization: VMs for each ESXi host that can migrate simultaneously.
														</li><li class="listitem">
															To remote OpenShift Virtualization: Disks for each ESXi host that can migrate simultaneously.
														</li></ul></div></li><li class="listitem"><p class="simpara">
													Warm migration: Disks for each ESXi host that can migrate simultaneously.
												</p><p class="simpara">
													See <a class="link" href="#ref_max-concurrent-vms_mtv" title="6.5. Configuring the controller_max_vm_inflight parameter">Configuring the controller_max_vm_inflight parameter</a> for a detailed explanation of this setting.
												</p></li></ul></div></li></ul></div>
								</td><td align="left" valign="top" headers="idm46552697743296">
								<p>
									20.
								</p>
								</td><td align="left" valign="top" headers="idm46552697742208">
								<p>
									Adjustable by either using the <span class="strong strong"><strong>+</strong></span> and <span class="strong strong"><strong>-</strong></span> keys to set a different value or by clicking the textbox and entering a new value.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm46552697745472">
								<p>
									Controller main container CPU limit
								</p>
								</td><td align="left" valign="top" headers="idm46552697744384">
								<p>
									The CPU limit that is allocated to the main controller container, in milliCPUs (m).
								</p>
								</td><td align="left" valign="top" headers="idm46552697743296">
								<p>
									500 m.
								</p>
								</td><td align="left" valign="top" headers="idm46552697742208">
								<p>
									Adjustable by selecting another value from the list. Options: 200 m, 500 m, 2000 m, 8000 m.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm46552697745472">
								<p>
									Controller main container memory limit
								</p>
								</td><td align="left" valign="top" headers="idm46552697744384">
								<p>
									The memory limit that is allocated to the main controller container in mebibytes (Mi).
								</p>
								</td><td align="left" valign="top" headers="idm46552697743296">
								<p>
									800 Mi.
								</p>
								</td><td align="left" valign="top" headers="idm46552697742208">
								<p>
									Adjustable by selecting another value from the list. Options: 200 Mi, 800 Mi, 2000 Mi, 8000 Mi.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm46552697745472">
								<p>
									Controller inventory container memory limit
								</p>
								</td><td align="left" valign="top" headers="idm46552697744384">
								<p>
									The memory limit that is allocated to the inventory controller container in mebibytes (Mi).
								</p>
								</td><td align="left" valign="top" headers="idm46552697743296">
								<p>
									1000 Mi.
								</p>
								</td><td align="left" valign="top" headers="idm46552697742208">
								<p>
									Adjustable by selecting another value from the list. Options: 400 Mi, 1000 Mi, 2000 Mi, 8000 Mi.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm46552697745472">
								<p>
									Precopy internal (minutes)
								</p>
								</td><td align="left" valign="top" headers="idm46552697744384">
								<p>
									The interval in minutes at which a new snapshot is requested before initiating a warm migration.
								</p>
								</td><td align="left" valign="top" headers="idm46552697743296">
								<p>
									60 minutes.
								</p>
								</td><td align="left" valign="top" headers="idm46552697742208">
								<p>
									Adjustable by selecting another value from the list. Options: 5 minutes, 30 minutes, 60 minutes, 120 minutes.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm46552697745472">
								<p>
									Snapshot polling interval
								</p>
								</td><td align="left" valign="top" headers="idm46552697744384">
								<p>
									The interval in seconds between which the system checks the status of snapshot creation or removal during a warm migration.
								</p>
								</td><td align="left" valign="top" headers="idm46552697743296">
								<p>
									10 seconds.
								</p>
								</td><td align="left" valign="top" headers="idm46552697742208">
								<p>
									Adjustable by choosing another value from the list. Options: 1 second, 5 seconds, 10 seconds, 60 seconds.
								</p>
								</td></tr></tbody></table></div></div></section></section><section class="section" id="con_migrating-vms-by-using-mtv-ui_mtv"><div class="titlepage"><div><div><h2 class="title">7.3. Migrating virtual machines by using the MTV user interface</h2></div></div></div><p class="_abstract _abstract">
				Use the MTV user interface to migrate virtual machines (VMs) from the following providers:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						VMware vSphere
					</li><li class="listitem">
						Red Hat Virtualization (RHV)
					</li><li class="listitem">
						OpenStack
					</li><li class="listitem">
						Open Virtual Appliances (OVAs) that were created by VMware vSphere
					</li><li class="listitem">
						OpenShift Virtualization clusters
					</li></ul></div><p>
				For all migrations, you specify the source provider, the destination provider, and the migration plan. The specific procedures vary per provider.
			</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					You must ensure that all prerequisites are met. For more information, see <a class="link" href="#assembly_software-requirements-for-migration_mtv" title="Chapter 4. Software requirements for migration">Software requirements for migration</a>.
				</p><p>
					VMware only: You must have the minimal set of <a class="link" href="#vmware-privileges_mtv" title="5.3.1. VMware privileges">VMware privileges</a>.
				</p><p>
					VMware only: Creating a <a class="link" href="#creating-vddk-image_mtv" title="5.3.3. Creating a VDDK image">VMware Virtual Disk Development Kit (VDDK)</a> image will increase migration speed.
				</p></div></div></section><section class="section" id="proc_renaming-vms-for-migration_mtv"><div class="titlepage"><div><div><h2 class="title">7.4. Renaming virtual machines</h2></div></div></div><p class="_abstract _abstract">
				VM names must be DNS-compliant and unique in the OpenShift Virtualization environment. When you migrate source VMs, Migration Toolkit for Virtualization (MTV) automatically adjusts noncompliant VM names in the target cluster to compliant names. Alternatively, you can rename target VMs in the MTV UI.
			</p><p>
				Valid names consist only of lowercase alphanumeric characters (a-z, 0-9) and hyphens (-), with no leading or trailing hyphens, no consecutive hyphens, and a maximum of 63 characters.
			</p><div class="table" id="idm46552696208864"><p class="title"><strong>Table 7.2. Examples of VM naming conflicts</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 30%; " class="col_1"/><col style="width: 40%; " class="col_2"/><col style="width: 30%; " class="col_3"/></colgroup><thead><tr><th align="left" valign="top" id="idm46552696203088" scope="col">Source VM name</th><th align="left" valign="top" id="idm46552696202000" scope="col">Naming conflict</th><th align="left" valign="top" id="idm46552696200912" scope="col">Target VM name</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm46552696203088">
							<p>
								<code class="literal">App_VM_01</code>
							</p>
							</td><td align="left" valign="top" headers="idm46552696202000">
							<p>
								Contains uppercase letters and underscores
							</p>
							</td><td align="left" valign="top" headers="idm46552696200912">
							<p>
								<code class="literal">app-vm-01</code>
							</p>
							</td></tr><tr><td align="left" valign="top" headers="idm46552696203088">
							<p>
								<code class="literal">-app-server</code>
							</p>
							</td><td align="left" valign="top" headers="idm46552696202000">
							<p>
								Starts with a hyphen
							</p>
							</td><td align="left" valign="top" headers="idm46552696200912">
							<p>
								<code class="literal">app-server</code>
							</p>
							</td></tr><tr><td align="left" valign="top" headers="idm46552696203088">
							<p>
								<code class="literal">app--server</code>
							</p>
							</td><td align="left" valign="top" headers="idm46552696202000">
							<p>
								Contains consecutive hyphens
							</p>
							</td><td align="left" valign="top" headers="idm46552696200912">
							<p>
								<code class="literal">app-server</code>
							</p>
							</td></tr><tr><td align="left" valign="top" headers="idm46552696203088">
							<p>
								<code class="literal">long-name-for-server-that-contains-more-than-sixty-three-characters</code>
							</p>
							</td><td align="left" valign="top" headers="idm46552696202000">
							<p>
								Exceeds the 63-character length limit
							</p>
							</td><td align="left" valign="top" headers="idm46552696200912">
							<p>
								<code class="literal">db-server-prod-01</code>
							</p>
							</td></tr></tbody></table></div></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						In the Red Hat OpenShift web console, click <span class="strong strong"><strong>Migration for Virtualization</strong></span> &gt; <span class="strong strong"><strong>Migration plans</strong></span>.
					</li><li class="listitem">
						Open the <span class="strong strong"><strong>Plan details</strong></span> page for your migration plan.
					</li><li class="listitem">
						Click the <span class="strong strong"><strong>Virtual machines</strong></span> tab to view a table of all VMs from the configured source provider.
					</li><li class="listitem">
						If the <span class="strong strong"><strong>Target name</strong></span> column does not already show in the VM table, click <span class="strong strong"><strong>Manage columns</strong></span> to select <span class="strong strong"><strong>Target name</strong></span> and display the column.
					</li><li class="listitem">
						Identify noncompliant names in the list of VMs by checking the alerts in the <span class="strong strong"><strong>Concerns</strong></span> column.
					</li><li class="listitem">
						To rename a VM, click the <span class="strong strong"><strong>More</strong></span> icon at the end of the row for the VM, and click <span class="strong strong"><strong>Edit target name</strong></span>.
					</li><li class="listitem">
						Enter and save a new name for the VM. Ensure that the new name consists only of lowercase alphanumeric characters (a-z, 0-9) and hyphens (-), with no leading or trailing hyphens, no consecutive hyphens, and a maximum of 63 characters.
					</li></ol></div></section><section class="section" id="proc_configuring-target-power-state-vms_mtv"><div class="titlepage"><div><div><h2 class="title">7.5. Configuring the target power state of VMs</h2></div></div></div><p class="_abstract _abstract">
				You can configure the post-migration power state of VMs in advance of a migration. Plan for VMs to start up automatically, remain powered off, or preserve the power state of the source VM. For example, if you are migrating a VM that is running in the source environment, you can ensure that the VM is powered off post-migration to preserve start-up dependencies between VMs.
			</p><p>
				You can set the power state of a target VM to <code class="literal">off</code>, <code class="literal">on</code>, or <code class="literal">auto</code> either in the MTV UI or in the <code class="literal">spec.vms</code> section of the <code class="literal">Plan</code> Custom Resource (CR). The <code class="literal">auto</code> setting preserves the power state of the source VM.
			</p><p>
				You can apply different post-migration power states to different VMs in a single migration plan.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Configure the power state for target VMs in the MTV UI.
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								In the Create migration plan wizard, navigate to <span class="strong strong"><strong>Other settings</strong></span> under <span class="strong strong"><strong>Additional setup</strong></span> in the left navigation pane.
							</li><li class="listitem">
								Scroll down to <span class="strong strong"><strong>VM target power state</strong></span>.
							</li><li class="listitem">
								Select <span class="strong strong"><strong>Auto</strong></span>, <span class="strong strong"><strong>Powered on</strong></span>, or <span class="strong strong"><strong>Powered off</strong></span> from the dropdown menu to apply the setting to all VMs in your migration plan. You can customize the power state for selected VMs when your plan is created.
							</li><li class="listitem">
								Click <span class="strong strong"><strong>Next</strong></span>, and verify that the correct power state shows for <span class="strong strong"><strong>VM target power state</strong></span> under <span class="strong strong"><strong>Other settings (optional)</strong></span>.
							</li><li class="listitem">
								When you create your migration plan, click <span class="strong strong"><strong>Migration plans</strong></span> in the left navigation menu, and open the <span class="strong strong"><strong>Plan details</strong></span> page for your migration plan.
							</li><li class="listitem">
								Verify that the correct power state shows for the <span class="strong strong"><strong>VM target power state</strong></span> field. You can click the <span class="strong strong"><strong>Edit</strong></span> icon to change the power state.
							</li><li class="listitem">
								Click the <span class="strong strong"><strong>Virtual machines</strong></span> tab to view a table of all VMs from the configured source provider.
							</li><li class="listitem">
								Click <span class="strong strong"><strong>Manage columns</strong></span> to select <span class="strong strong"><strong>Target power state</strong></span> and display the column.
							</li><li class="listitem">
								To change the power state for a specific VM, click the <span class="strong strong"><strong>More</strong></span> icon at the end of the row for the VM, and click <span class="strong strong"><strong>Edit target power state</strong></span>.
							</li><li class="listitem">
								Select and save a new power state for the VM.
							</li></ol></div></li><li class="listitem"><p class="simpara">
						Configure the power state for target VMs in the YAML file.
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								In the Red Hat OpenShift web console, click <span class="strong strong"><strong>Migration for Virtualization</strong></span> &gt; <span class="strong strong"><strong>Migration plans</strong></span>.
							</li><li class="listitem">
								Open the <span class="strong strong"><strong>Plan details</strong></span> page for your migration plan.
							</li><li class="listitem">
								Click the <span class="strong strong"><strong>YAML</strong></span> tab to open the <span class="strong strong"><strong>Plan</strong></span> custom resource (CR) for your migration plan.
							</li><li class="listitem"><p class="simpara">
								For each VM under <span class="strong strong"><strong>vms</strong></span> in the YAML file, enter the target power state. In this example, you set a different target power state for each VM:
							</p><p class="simpara">
								Example:
							</p><pre class="screen">  vms:
    - id: vm-1
      targetPowerState: off
    - id: vm-2
      targetPowerState: on
    - id: vm-3
      targetPowerState: auto</pre></li></ol></div></li></ol></div></section></section><section class="chapter" id="assembly_migrating-vms-cli_mtv"><div class="titlepage"><div><div><h1 class="title">Chapter 8. Migrating virtual machines by using the command-line interface</h1></div></div></div><p class="_abstract _abstract">
			You migrate VMs to OpenShift Virtualization from the command-line by creating MTV custom resources (CRs). The CRs and the migration procedure vary by source provider.
		</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
				You must specify a name for cluster-scoped CRs.
			</p><p>
				You must specify both a name and a namespace for namespace-scoped CRs.
			</p><p>
				To migrate to or from an OpenShift cluster that is different from the one the migration plan is defined on, you must have an OpenShift Virtualization service account token with <code class="literal">cluster-admin</code> privileges.
			</p></div></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
				You must ensure that all prerequisites are met. For more information, see <a class="link" href="#assembly_software-requirements-for-migration_mtv" title="Chapter 4. Software requirements for migration">Software requirements for migration</a>.
			</p></div></div><section class="section" id="non-admin-permissions_cli"><div class="titlepage"><div><div><h2 class="title">8.1. Permissions needed by non-administrators to work with migration plan components</h2></div></div></div><p class="_abstract _abstract">
				If you are an administrator, you can work with all components of migration plans (for example, providers, network mappings, and migration plans).
			</p><p>
				By default, non-administrators have limited ability to work with migration plans and their components. As an administrator, you can modify their roles to allow them full access to all components, or you can give them limited permissions.
			</p><p>
				For example, administrators can assign non-administrators one or more of the following cluster roles for migration plans:
			</p><div class="table" id="idm46552700285856"><p class="title"><strong>Table 8.1. Example migration plan roles and their privileges</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"/><col style="width: 50%; " class="col_2"/></colgroup><thead><tr><th align="left" valign="top" id="idm46552700280992" scope="col">Role</th><th align="left" valign="top" id="idm46552705715024" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm46552700280992">
							<p>
								<code class="literal">plans.forklift.konveyor.io-v1beta1-view</code>
							</p>
							</td><td align="left" valign="top" headers="idm46552705715024">
							<p>
								Can view migration plans but not to create, delete or modify them
							</p>
							</td></tr><tr><td align="left" valign="top" headers="idm46552700280992">
							<p>
								<code class="literal">plans.forklift.konveyor.io-v1beta1-edit</code>
							</p>
							</td><td align="left" valign="top" headers="idm46552705715024">
							<p>
								Can create, delete or modify (all parts of <code class="literal">edit</code> permissions) individual migration plans
							</p>
							</td></tr><tr><td align="left" valign="top" headers="idm46552700280992">
							<p>
								<code class="literal">plans.forklift.konveyor.io-v1beta1-admin</code>
							</p>
							</td><td align="left" valign="top" headers="idm46552705715024">
							<p>
								All <code class="literal">edit</code> privileges and the ability to delete the entire collection of migration plans
							</p>
							</td></tr></tbody></table></div></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					Predefined cluster roles include a resource (for example, <code class="literal">plans</code>), an API group (for example, <code class="literal">forklift.konveyor.io-v1beta1</code>) and an action (for example, <code class="literal">view</code>, <code class="literal">edit</code>).
				</p></div></div><p>
				As a more comprehensive example, you can grant non-administrators the following set of permissions per namespace:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Create and modify storage maps, network maps, and migration plans for the namespaces they have access to
					</li><li class="listitem">
						Attach providers created by administrators to storage maps, network maps, and migration plans
					</li><li class="listitem">
						Not be able to create providers or to change system settings
					</li></ul></div><div class="table" id="idm46552711505664"><p class="title"><strong>Table 8.2. Example permissions required for non-adminstrators to work with migration plan components but not create providers</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"/><col style="width: 33%; " class="col_2"/><col style="width: 33%; " class="col_3"/></colgroup><thead><tr><th align="left" valign="top" id="idm46552711499808" scope="col">Actions</th><th align="left" valign="top" id="idm46552711498720" scope="col">API group</th><th align="left" valign="top" id="idm46552706568800" scope="col">Resource</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm46552711499808">
							<p>
								<code class="literal">get</code>, <code class="literal">list</code>, <code class="literal">watch</code>, <code class="literal">create</code>, <code class="literal">update</code>, <code class="literal">patch</code>, <code class="literal">delete</code>
							</p>
							</td><td align="left" valign="top" headers="idm46552711498720">
							<p>
								<code class="literal">forklift.konveyor.io</code>
							</p>
							</td><td align="left" valign="top" headers="idm46552706568800">
							<p>
								<code class="literal">plans</code>
							</p>
							</td></tr><tr><td align="left" valign="top" headers="idm46552711499808">
							<p>
								<code class="literal">get</code>, <code class="literal">list</code>, <code class="literal">watch</code>, <code class="literal">create</code>, <code class="literal">update</code>, <code class="literal">patch</code>, <code class="literal">delete</code>
							</p>
							</td><td align="left" valign="top" headers="idm46552711498720">
							<p>
								<code class="literal">forklift.konveyor.io</code>
							</p>
							</td><td align="left" valign="top" headers="idm46552706568800">
							<p>
								<code class="literal">migrations</code>
							</p>
							</td></tr><tr><td align="left" valign="top" headers="idm46552711499808">
							<p>
								<code class="literal">get</code>, <code class="literal">list</code>, <code class="literal">watch</code>, <code class="literal">create</code>, <code class="literal">update</code>, <code class="literal">patch</code>, <code class="literal">delete</code>
							</p>
							</td><td align="left" valign="top" headers="idm46552711498720">
							<p>
								<code class="literal">forklift.konveyor.io</code>
							</p>
							</td><td align="left" valign="top" headers="idm46552706568800">
							<p>
								<code class="literal">hooks</code>
							</p>
							</td></tr><tr><td align="left" valign="top" headers="idm46552711499808">
							<p>
								<code class="literal">get</code>, <code class="literal">list</code>, <code class="literal">watch</code>
							</p>
							</td><td align="left" valign="top" headers="idm46552711498720">
							<p>
								<code class="literal">forklift.konveyor.io</code>
							</p>
							</td><td align="left" valign="top" headers="idm46552706568800">
							<p>
								<code class="literal">providers</code>
							</p>
							</td></tr><tr><td align="left" valign="top" headers="idm46552711499808">
							<p>
								<code class="literal">get</code>, <code class="literal">list</code>, <code class="literal">watch</code>, <code class="literal">create</code>, <code class="literal">update</code>, <code class="literal">patch</code>, <code class="literal">delete</code>
							</p>
							</td><td align="left" valign="top" headers="idm46552711498720">
							<p>
								<code class="literal">forklift.konveyor.io</code>
							</p>
							</td><td align="left" valign="top" headers="idm46552706568800">
							<p>
								<code class="literal">networkmaps</code>
							</p>
							</td></tr><tr><td align="left" valign="top" headers="idm46552711499808">
							<p>
								<code class="literal">get</code>, <code class="literal">list</code>, <code class="literal">watch</code>, <code class="literal">create</code>, <code class="literal">update</code>, <code class="literal">patch</code>, <code class="literal">delete</code>
							</p>
							</td><td align="left" valign="top" headers="idm46552711498720">
							<p>
								<code class="literal">forklift.konveyor.io</code>
							</p>
							</td><td align="left" valign="top" headers="idm46552706568800">
							<p>
								<code class="literal">storagemaps</code>
							</p>
							</td></tr><tr><td align="left" valign="top" headers="idm46552711499808">
							<p>
								<code class="literal">get</code>, <code class="literal">list</code>, <code class="literal">watch</code>
							</p>
							</td><td align="left" valign="top" headers="idm46552711498720">
							<p>
								<code class="literal">forklift.konveyor.io</code>
							</p>
							</td><td align="left" valign="top" headers="idm46552706568800">
							<p>
								<code class="literal">forkliftcontrollers</code>
							</p>
							</td></tr><tr><td align="left" valign="top" headers="idm46552711499808">
							<p>
								<code class="literal">create</code>, <code class="literal">patch</code>, <code class="literal">delete</code>
							</p>
							</td><td align="left" valign="top" headers="idm46552711498720">
							<p>
								Empty string
							</p>
							</td><td align="left" valign="top" headers="idm46552706568800">
							<p>
								<code class="literal">secrets</code>
							</p>
							</td></tr></tbody></table></div></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					Non-administrators need to have the <code class="literal">create</code> permissions that are part of <code class="literal">edit</code> roles for network maps and for storage maps to create migration plans, even when using a template for a network map or a storage map.
				</p></div></div></section></section><section class="chapter" id="assembly_mapping-networks-storage_mtv"><div class="titlepage"><div><div><h1 class="title">Chapter 9. Mapping networks and storage in migration plans</h1></div></div></div><p class="_abstract _abstract">
			You can create network maps and storage maps in the Migration Toolkit for Virtualization (MTV) to map source networks and disk storage to OpenShift Virtualization networks and storage classes.
		</p><section class="section" id="about-network-maps_mtv"><div class="titlepage"><div><div><h2 class="title">9.1. About network maps in migration plans</h2></div></div></div><p class="_abstract _abstract">
				Create network maps in Migration Toolkit for Virtualization (MTV) to map source networks to OpenShift Virtualization networks. You can create two types of network map: maps for a specific migration plan and maps for use by any migration plan.
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Plan-specific maps</span></dt><dd>
							Plan-specific maps are owned by that plan. You can create this kind of map in the <span class="strong strong"><strong>Network maps</strong></span> step of the <span class="strong strong"><strong>Plan creation wizard</strong></span>.
						</dd><dt><span class="term">Ownerless maps</span></dt><dd><p class="simpara">
							Maps created for use by any migration plan are to said to be <span class="emphasis"><em>ownerless</em></span>. You can create this kind of map in the <span class="strong strong"><strong>Network maps</strong></span> page of the <span class="strong strong"><strong>Migration for Virtualization</strong></span> section of the OpenShift Virtualization web console.
						</p><p class="simpara">
							You, or anyone working in the same project, can use ownerless maps when creating a migration plan in the <span class="strong strong"><strong>Plan creation wizard</strong></span>. When you choose one of these unowned maps for a migration plan, MTV creates a copy of the map and defines your migration plan as the <span class="emphasis"><em>owner of that copy</em></span>. Any changes you make to the copy do not affect the original map, nor do they apply to any other plan that uses a copy of the map.
						</p></dd></dl></div><p>
				Both types of network map for a project are shown in the <span class="strong strong"><strong>Network maps</strong></span> page, but there is an important difference in the information displayed in the <span class="strong strong"><strong>Owner</strong></span> column of that page for each:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Maps created in the <span class="strong strong"><strong>Network maps</strong></span> step of the <span class="strong strong"><strong>Plan creation wizard</strong></span> are shown as being owned by the migration plan.
					</li><li class="listitem">
						Maps created in the <span class="strong strong"><strong>Network maps</strong></span> page of the <span class="strong strong"><strong>Migration for Virtualization</strong></span> section of the OpenShift Virtualization web console are shown as having no owner.
					</li></ul></div></section><section class="section" id="about-storage-maps_mtv"><div class="titlepage"><div><div><h2 class="title">9.2. About storage maps in migration plans</h2></div></div></div><p class="_abstract _abstract">
				Create storage maps in Migration Toolkit for Virtualization (MTV) to map source disk storages to OpenShift Virtualization storage classes. You can create two types of storage map: maps for a specific migration plan and maps for use by any migration plan.
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Plan-specific maps</span></dt><dd>
							Plan-specific maps are owned by that plan. You can create these kinds of maps in the <span class="strong strong"><strong>Storage maps</strong></span> step of the <span class="strong strong"><strong>Plan creation wizard</strong></span>.
						</dd><dt><span class="term">Ownerless maps</span></dt><dd><p class="simpara">
							Maps created for use by any migration plan are to said to be <span class="emphasis"><em>ownerless</em></span>. You can create this kind of map in the <span class="strong strong"><strong>Storage maps</strong></span> page of the <span class="strong strong"><strong>Migration for Virtualization</strong></span> section of the OpenShift Virtualization web console.
						</p><p class="simpara">
							You, or anyone working in the same project, can use ownerless maps when creating a migration plan in the <span class="strong strong"><strong>Plan creation wizard</strong></span>. When you choose one of these unowned maps for a migration plan, MTV creates a copy of the map and defines your migration plan as the <span class="emphasis"><em>owner of that copy</em></span>. Any changes you make to the copy do not affect the original map, nor do they apply to any other plan that uses a copy of the map.
						</p></dd></dl></div><p>
				Both types of storage map for a project are shown in the <span class="strong strong"><strong>Storage maps</strong></span> page, but there is an important difference in the information displayed in the <span class="strong strong"><strong>Owner</strong></span> column of that page for each:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Maps created in the <span class="strong strong"><strong>Storage maps</strong></span> step of the <span class="strong strong"><strong>Plan creation wizard</strong></span> are shown as being owned by the migration plan.
					</li><li class="listitem">
						Maps created in the <span class="strong strong"><strong>Storage maps</strong></span> page of the <span class="strong strong"><strong>Migration for Virtualization</strong></span> section of the OpenShift Virtualization web console are shown as having no owner.
					</li></ul></div></section><section class="section" id="con_creating-ownerless-storage-maps-ui_mtv"><div class="titlepage"><div><div><h2 class="title">9.3. Creating ownerless storage maps in the MTV UI</h2></div></div></div><p class="_abstract _abstract">
				You can create ownerless storage maps by using the MTV UI to map source disk storage to OpenShift Virtualization storage classes.
			</p><p>
				You can create this type of map by using one of the following methods:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<span class="strong strong"><strong>Create with form</strong></span>, selecting items such as a source provider from lists
					</li><li class="listitem">
						<span class="strong strong"><strong>Create with YAML</strong></span>, either by entering YAML or JSON definitions or by attaching files containing the same
					</li></ul></div></section></section><section class="chapter" id="assembly_planning-migration-vmware_mtv"><div class="titlepage"><div><div><h1 class="title">Chapter 10. Planning migration of virtual machines from VMware vSphere</h1></div></div></div><p class="_abstract _abstract">
			Create a VMware vSphere migration plan by setting up network maps, configuring source and destination providers with migration networks, and defining the migration plan in the Migration Toolkit for Virtualization (MTV) UI.
		</p><section class="section" id="creating-yaml-based-network-maps-ui_vmware"><div class="titlepage"><div><div><h2 class="title">10.1. Creating ownerless network maps in the MTV UI</h2></div></div></div><p class="_abstract _abstract">
				You can create ownerless network maps by using the Migration Toolkit for Virtualization (MTV) UI to map source networks to OpenShift Virtualization networks.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						In the Red Hat OpenShift web console, click <span class="strong strong"><strong>Migration for Virtualization</strong></span> &gt; <span class="strong strong"><strong>Network maps</strong></span>.
					</li><li class="listitem">
						Click <span class="strong strong"><strong>Create network map</strong></span> to open the <span class="strong strong"><strong>Create network map</strong></span> page.
					</li><li class="listitem">
						Enter the YAML or JSON definitions into the editor, or drag and drop a file into the editor.
					</li><li class="listitem">
						If you enter YAML definitions, use the following:
					</li></ol></div><pre class="programlisting language-yaml">$  cat &lt;&lt; EOF | oc apply -f -
apiVersion: forklift.konveyor.io/v1beta1
kind: NetworkMap
metadata:
  name: &lt;network_map&gt;
  namespace: &lt;namespace&gt;
spec:
  map:
    - destination:
        name: &lt;network_name&gt;
        type: pod
      source:
        id: &lt;source_network_id&gt;
        name: &lt;source_network_name&gt;
    - destination:
        name: &lt;network_attachment_definition&gt;
        namespace: &lt;network_attachment_definition_namespace&gt;
        type: multus
      source:
        id: &lt;source_network_id&gt;
        name: &lt;source_network_name&gt;
  provider:
    source:
      name: &lt;source_provider&gt;
      namespace: &lt;namespace&gt;
    destination:
      name: &lt;destination_provider&gt;
      namespace: &lt;namespace&gt;
EOF</pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">type</code>: Allowed values are <code class="literal">pod</code>, <code class="literal">multus</code>, and <code class="literal">ignored</code>. Use <code class="literal">ignored</code> to avoid attaching VMs to this network for this migration.
					</li><li class="listitem">
						<code class="literal">source</code>: You can use either the <code class="literal">id</code> or the <code class="literal">name</code> parameter to specify the source network. For <code class="literal">id</code>, specify the VMware vSphere network Managed Object Reference (moRef). For more information about retrieving the moRef, see <span class="emphasis"><em>Retrieving a VMware vSphere moRef</em></span> in <span class="emphasis"><em>Migrating your virtual machines to Red Hat OpenShift Virtualization</em></span>.
					</li><li class="listitem">
						<code class="literal">&lt;network_attachment_definition&gt;</code>: Specify a network attachment definition for each additional OpenShift Virtualization network.
					</li><li class="listitem">
						<code class="literal">&lt;network_attachment_definition_namespace&gt;</code>: Required only when <code class="literal">type</code> is <code class="literal">multus</code>. Specify the namespace of the OpenShift Virtualization network attachment definition.
					</li></ul></div><div class="orderedlist"><ol class="orderedlist" start="5" type="1"><li class="listitem">
						Optional: To download your input, click <span class="strong strong"><strong>Download</strong></span>.
					</li><li class="listitem"><p class="simpara">
						Click <span class="strong strong"><strong>Create</strong></span>.
					</p><p class="simpara">
						Your map appears in the list of network maps.
					</p></li></ol></div></section><section class="section" id="creating-form-based-storage-maps-ui-vmware_vmware"><div class="titlepage"><div><div><h2 class="title">10.2. Creating ownerless storage maps using the form page of the MTV UI</h2></div></div></div><p class="_abstract _abstract">
				You can create ownerless storage maps by using the form page of the MTV UI.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Have a VMware source provider and a OpenShift Virtualization destination provider. For more information, see <a class="link" href="#adding-source-provider_vmware" title="10.4. Adding a VMware vSphere source provider">Adding a VMware vSphere source provider</a> or <a class="link" href="#adding-source-provider_dest_vmware" title="10.6. Adding an OpenShift Virtualization destination provider">Adding an OpenShift Virtualization destination provider</a>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						In the Red Hat OpenShift web console, click <span class="strong strong"><strong>Migration for Virtualization</strong></span> &gt; <span class="strong strong"><strong>Storage maps</strong></span>.
					</li><li class="listitem">
						Click <span class="strong strong"><strong>Create storage map</strong></span> &gt; <span class="strong strong"><strong>Create with form</strong></span>.
					</li><li class="listitem"><p class="simpara">
						Specify the following:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<span class="strong strong"><strong>Map name</strong></span>: Name of the storage map.
							</li><li class="listitem">
								<span class="strong strong"><strong>Project</strong></span>: Select from the list.
							</li><li class="listitem">
								<span class="strong strong"><strong>Source provider</strong></span>: Select from the list.
							</li><li class="listitem">
								<span class="strong strong"><strong>Target provider</strong></span>: Select from the list.
							</li><li class="listitem">
								<span class="strong strong"><strong>Source storage</strong></span>: Select from the list.
							</li><li class="listitem">
								<span class="strong strong"><strong>Target storage</strong></span>: Select from the list.
							</li></ul></div></li><li class="listitem"><p class="simpara">
						Optional: If this is a storage map for a migration using storage copy offload, specify the following offload options:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<span class="strong strong"><strong>Offload plugin</strong></span>: Select from the list.
							</li><li class="listitem">
								<span class="strong strong"><strong>Storage secret</strong></span>: Select from the list.
							</li><li class="listitem"><p class="simpara">
								<span class="strong strong"><strong>Storage product</strong></span>: Select from the list.
							</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
									Storage copy offload is Developer Preview software only. Developer Preview software is not supported by Red Hat in any way and is not functionally complete or production-ready. Do not use Developer Preview software for production or business-critical workloads. Developer Preview software provides early access to upcoming product software in advance of its possible inclusion in a Red Hat product offering. Customers can use this software to test functionality and provide feedback during the development process. This software might not have any documentation, is subject to change or removal at any time, and has received limited testing. Red Hat might provide ways to submit feedback on Developer Preview software without an associated SLA.
								</p><p>
									For more information about the support scope of Red Hat Developer Preview software, see <a class="link" href="https://access.redhat.com/support/offerings/devpreview/">Developer Preview Support Scope</a>.
								</p></div></div></li></ul></div></li><li class="listitem">
						Optional: Click <span class="strong strong"><strong>Add mapping</strong></span> to create additional storage maps, including mapping multiple storage sources to a single target storage class.
					</li><li class="listitem"><p class="simpara">
						Click <span class="strong strong"><strong>Create</strong></span>.
					</p><p class="simpara">
						Your map appears in the list of storage maps.
					</p></li></ol></div></section><section class="section" id="creating-yaml-based-stoarge-maps-ui_vmware"><div class="titlepage"><div><div><h2 class="title">10.3. Creating ownerless storage maps using YAML or JSON definitions in the MTV UI</h2></div></div></div><p class="_abstract _abstract">
				You can create ownerless storage maps by using YAML or JSON definitions in the Migration Toolkit for Virtualization (MTV) UI.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						In the Red Hat OpenShift web console, click <span class="strong strong"><strong>Migration for Virtualization</strong></span> &gt; <span class="strong strong"><strong>Storage maps</strong></span>.
					</li><li class="listitem"><p class="simpara">
						Click <span class="strong strong"><strong>Create storage map</strong></span> &gt; <span class="strong strong"><strong>Create with YAML</strong></span>.
					</p><p class="simpara">
						The <span class="strong strong"><strong>Create StorageMap</strong></span> page opens.
					</p></li><li class="listitem">
						Enter the YAML or JSON definitions into the editor, or drag and drop a file into the editor.
					</li><li class="listitem">
						If you enter YAML definitions, use the following:
					</li></ol></div><pre class="programlisting language-yaml">$ cat &lt;&lt; EOF | oc apply -f -
apiVersion: forklift.konveyor.io/v1beta1
kind: StorageMap
metadata:
  name: &lt;storage_map&gt;
  namespace: &lt;namespace&gt;
spec:
  map:
    - destination:
        storageClass: &lt;storage_class&gt;
        accessMode: &lt;access_mode&gt;
      source:
        id: &lt;source_datastore&gt;
  provider:
    source:
      name: &lt;source_provider&gt;
      namespace: &lt;namespace&gt;
    destination:
      name: &lt;destination_provider&gt;
      namespace: &lt;namespace&gt;
EOF</pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">accessMode</code>: Allowed values are <code class="literal">ReadWriteOnce</code> and <code class="literal">ReadWriteMany</code>.
					</li><li class="listitem">
						<code class="literal">id</code>: Specify the VMware vSphere datastore moRef, for example, <code class="literal">f2737930-b567-451a-9ceb-2887f6207009</code>. For more information about retrieving the moRef, see <span class="emphasis"><em>Retrieving a VMware vSphere moRef</em></span> in <span class="emphasis"><em>Migrating your virtual machines to Red Hat OpenShift Virtualization</em></span>.
					</li></ul></div><div class="orderedlist"><ol class="orderedlist" start="5" type="1"><li class="listitem">
						Optional: To download your input, click <span class="strong strong"><strong>Download</strong></span>.
					</li><li class="listitem"><p class="simpara">
						Click <span class="strong strong"><strong>Create</strong></span>.
					</p><p class="simpara">
						Your map appears in the list of storage maps.
					</p></li></ol></div></section><section class="section" id="adding-source-provider_vmware"><div class="titlepage"><div><div><h2 class="title">10.4. Adding a VMware vSphere source provider</h2></div></div></div><p class="_abstract _abstract">
				You can migrate VMware vSphere VMs from VMware vCenter or from a VMware ESX/ESXi server without going through vCenter.
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Considerations</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									EMS enforcement is disabled for migrations with VMware vSphere source providers in order to enable migrations from versions of vSphere that are supported by Migration Toolkit for Virtualization but do not comply with the 2023 FIPS requirements. Therefore, users should consider whether migrations from vSphere source providers risk their compliance with FIPS. Supported versions of vSphere are specified in <a class="link" href="#compatibility-guidelines_mtv" title="5.6. Software compatibility guidelines">Software compatibility guidelines</a>.
								</li><li class="listitem">
									Anti-virus software can cause migrations to fail. It is strongly recommended to remove such software from source VMs before you start a
								</li><li class="listitem">
									MTV does not support migrating VMware Non-Volatile Memory Express (NVMe) disks.
								</li></ul></div></dd></dl></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					If you input any value of maximum transmission unit (MTU) besides the default value in your migration network, you must also input the same value in the OpenShift transfer network that you use. For more information about the OpenShift transfer network, see <a class="link" href="#creating-plan-wizard-vmware_vmware" title="10.8. Creating a VMware vSphere migration plan by using the MTV wizard">Creating a VMware vSphere migration plan using the MTV wizard</a>.
				</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						It is strongly recommended to create a VMware Virtual Disk Development Kit (VDDK) image in a secure registry that is accessible to all clusters. A VDDK image accelerates migration and reduces the risk of a plan failing. If you are not using VDDK and a plan fails, retry with VDDK installed. For more information, see <a class="link" href="#creating-vddk-image_mtv" title="5.3.3. Creating a VDDK image">Creating a VDDK image</a>.
					</li></ul></div><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
					Virtual machine (VM) migrations do not work without VDDK when a VM is backed by VMware vSAN.
				</p></div></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Access the <span class="strong strong"><strong>Create provider</strong></span> page for VMware by doing one of the following:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								In the Red Hat OpenShift web console, click <span class="strong strong"><strong>Migration for Virtualization &gt; Providers</strong></span>.
							</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem">
										Click <span class="strong strong"><strong>Create Provider</strong></span>.
									</li><li class="listitem"><p class="simpara">
										Select a <span class="strong strong"><strong>Project</strong></span> from the list. The default project shown depends on the active project of MTV.
									</p><p class="simpara">
										If the active project is <span class="strong strong"><strong>All projects</strong></span>, then the default project is <code class="literal">openshift-mtv</code>. Otherwise, the default project is the same as the active project.
									</p><p class="simpara">
										If you have Administrator privileges, you can see all projects, otherwise, you can see only the projects you are authorized to work with.
									</p></li><li class="listitem">
										Click <span class="strong strong"><strong>VMware</strong></span>.
									</li></ol></div></li><li class="listitem"><p class="simpara">
								If you have Administrator privileges, in the Red Hat OpenShift web console, click <span class="strong strong"><strong>Migration for Virtualization &gt; Overview</strong></span>.
							</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem"><p class="simpara">
										In the <span class="strong strong"><strong>Welcome</strong></span> pane, click <span class="strong strong"><strong>VMware</strong></span>.
									</p><p class="simpara">
										If the <span class="strong strong"><strong>Welcome</strong></span> pane is not visible, click <span class="strong strong"><strong>Show the welcome card</strong></span> in the upper-right corner of the page, and click <span class="strong strong"><strong>VMware</strong></span> when the <span class="strong strong"><strong>Welcome</strong></span> pane opens.
									</p></li><li class="listitem"><p class="simpara">
										Select a <span class="strong strong"><strong>Project</strong></span> from the list. The default project shown depends on the active project of MTV.
									</p><p class="simpara">
										If the active project is <span class="strong strong"><strong>All projects</strong></span>, then the default project is <code class="literal">openshift-mtv</code>. Otherwise, the default project is the same as the active project.
									</p><p class="simpara">
										If you have Administrator privileges, you can see all projects, otherwise, you can see only the projects you are authorized to work with.
									</p></li></ol></div></li></ol></div></li><li class="listitem"><p class="simpara">
						Specify the following fields:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								<span class="strong strong"><strong>Provider details</strong></span>
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										<span class="strong strong"><strong>Provider resource name</strong></span>: Name of the source provider.
									</li><li class="listitem">
										<span class="strong strong"><strong>Endpoint type</strong></span>: Select the vSphere provider endpoint type. Options: <span class="strong strong"><strong>vCenter</strong></span> or <span class="strong strong"><strong>ESXi</strong></span>. You can migrate virtual machines from vCenter, an ESX/ESXi server that is not managed by vCenter, or from an ESX/ESXi server that is managed by vCenter but does not go through vCenter.
									</li><li class="listitem">
										<span class="strong strong"><strong>URL</strong></span>: URL of the SDK endpoint of the vCenter on which the source VM is mounted. Ensure that the URL includes the <code class="literal">sdk</code> path, usually <code class="literal">/sdk</code>. For example, <code class="literal">https://vCenter-host-example.com/sdk</code>. If a certificate for FQDN is specified, the value of this field needs to match the FQDN in the certificate.
									</li><li class="listitem"><p class="simpara">
										<span class="strong strong"><strong>VDDK init image</strong></span>: <code class="literal">VDDKInitImage</code> path. It is strongly recommended to create a VDDK init image to accelerate migrations. For more information, see <a class="link" href="#creating-vddk-image_mtv" title="5.3.3. Creating a VDDK image">Creating a VDDK image</a>.
									</p><p class="simpara">
										Do one of the following:
									</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
												Select the <span class="strong strong"><strong>Skip VMWare Virtual Disk Development Kit (VDDK) SDK acceleration (not recommended)</strong></span>.
											</li><li class="listitem">
												Enter the path in the <span class="strong strong"><strong>VDDK init image</strong></span> text box. Format: <code class="literal">&lt;registry_route_or_server_path&gt;/vddk:&lt;tag&gt;</code>.
											</li><li class="listitem"><p class="simpara">
												Upload a VDDK archive and build a VDDK init image from the archive by doing the following:
											</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem">
														Click <span class="strong strong"><strong>Browse</strong></span> next to the <span class="strong strong"><strong>VDDK init image archive</strong></span> text box, select the desired file, and click <span class="strong strong"><strong>Select</strong></span>.
													</li><li class="listitem"><p class="simpara">
														Click <span class="strong strong"><strong>Upload</strong></span>.
													</p><p class="simpara">
														The URL of the uploaded archive is displayed in the <span class="strong strong"><strong>VDDK init image archive</strong></span> text box.
													</p></li></ul></div></li></ul></div></li></ul></div></li><li class="listitem"><p class="simpara">
								<span class="strong strong"><strong>Provider credentials</strong></span>
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										<span class="strong strong"><strong>Username</strong></span>: vCenter user or ESXi user. For example, <code class="literal">user@vsphere.local</code>.
									</li><li class="listitem">
										<span class="strong strong"><strong>Password</strong></span>: vCenter user password or ESXi user password.
									</li></ul></div></li></ol></div></li></ol></div><div class="orderedlist"><ol class="orderedlist" start="3" type="1"><li class="listitem"><p class="simpara">
						Choose one of the following options for validating CA certificates:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<span class="strong strong"><strong>Use a custom CA certificate</strong></span>: Migrate after validating a custom CA certificate.
							</li><li class="listitem">
								<span class="strong strong"><strong>Use the system CA certificate</strong></span>: Migrate after validating the system CA certificate.
							</li><li class="listitem"><p class="simpara">
								<span class="strong strong"><strong>Skip certificate validation</strong></span> : Migrate without validating a CA certificate.
							</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
										To use a custom CA certificate, leave the <span class="strong strong"><strong>Skip certificate validation</strong></span> switch toggled to left, and <span class="emphasis"><em>either</em></span> drag the CA certificate to the text box <span class="emphasis"><em>or</em></span> browse for it and click <span class="strong strong"><strong>Select</strong></span>.
									</li><li class="listitem">
										To use the system CA certificate, leave the <span class="strong strong"><strong>Skip certificate validation</strong></span> switch toggled to the left, and leave the <span class="strong strong"><strong>CA certificate</strong></span> text box empty.
									</li><li class="listitem">
										To skip certificate validation, toggle the <span class="strong strong"><strong>Skip certificate validation</strong></span> switch to the right.
									</li></ol></div></li></ul></div></li><li class="listitem"><p class="simpara">
						Optional: Ask MTV to fetch a custom CA certificate from the provider’s API endpoint URL.
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Click <span class="strong strong"><strong>Fetch certificate from URL</strong></span>. The <span class="strong strong"><strong>Verify certificate</strong></span> window opens.
							</li><li class="listitem"><p class="simpara">
								If the details are correct, select the <span class="strong strong"><strong>I trust the authenticity of this certificate</strong></span> checkbox, and then, click <span class="strong strong"><strong>Confirm</strong></span>. If not, click <span class="strong strong"><strong>Cancel</strong></span>, and then, enter the correct certificate information manually.
							</p><p class="simpara">
								Once confirmed, the CA certificate will be used to validate subsequent communication with the API endpoint.
							</p></li></ol></div></li><li class="listitem"><p class="simpara">
						Click <span class="strong strong"><strong>Create provider</strong></span> to add and save the provider.
					</p><p class="simpara">
						The provider appears in the list of providers.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							It might take a few minutes for the provider to have the status <code class="literal">Ready</code>.
						</p></div></div></li><li class="listitem"><p class="simpara">
						Optional: Add access to the UI of the provider:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								On the <span class="strong strong"><strong>Providers</strong></span> page, click the provider.
							</p><p class="simpara">
								The <span class="strong strong"><strong>Provider details</strong></span> page opens.
							</p></li><li class="listitem">
								Click the <span class="strong strong"><strong>Edit</strong></span> icon under <span class="strong strong"><strong>External UI web link</strong></span>.
							</li><li class="listitem"><p class="simpara">
								Enter the link and click <span class="strong strong"><strong>Save</strong></span>.
							</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									If you do not enter a link, MTV attempts to calculate the correct link.
								</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											If MTV succeeds, the hyperlink of the field points to the calculated link.
										</li><li class="listitem">
											If MTV does not succeed, the field remains empty.
										</li></ul></div></div></div></li></ol></div></li></ol></div></section><section class="section" id="selecting-migration-network-for-vmware-source-provider_vmware"><div class="titlepage"><div><div><h2 class="title">10.5. Selecting a migration network for a VMware source provider</h2></div></div></div><p class="_abstract _abstract">
				You can select a migration network in the Red Hat OpenShift web console for a source provider to reduce risk to the source environment and to improve performance.
			</p><p>
				Using the default network for migration can result in poor performance because the network might not have sufficient bandwidth. This situation can have a negative effect on the source platform because the disk transfer operation might saturate the network.
			</p><p>
				You can also control the network from which disks are transferred from a host by using the Network File Copy (NFC) service in vSphere.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					If you input any value of maximum transmission unit (MTU) besides the default value in your migration network, you must also input the same value in the OpenShift transfer network that you use. For more information about the OpenShift transfer network, see <a class="link" href="#creating-plan-wizard-vmware_vmware" title="10.8. Creating a VMware vSphere migration plan by using the MTV wizard">Creating a migration plan</a>.
				</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The migration network must have enough throughput, minimum speed of 10 Gbps, for disk transfer.
					</li><li class="listitem"><p class="simpara">
						The migration network must be accessible to the OpenShift Virtualization nodes through the default gateway.
					</p><p class="simpara">
						The source virtual disks are copied by a pod that is connected to the pod network of the target namespace.
					</p></li><li class="listitem">
						The migration network should have jumbo frames enabled.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						In the Red Hat OpenShift web console, click <span class="strong strong"><strong>Migration for Virtualization</strong></span> &gt; <span class="strong strong"><strong>Providers</strong></span>.
					</li><li class="listitem">
						Click the host number in the <span class="strong strong"><strong>Hosts</strong></span> column beside a provider to view a list of hosts.
					</li><li class="listitem">
						Select one or more hosts and click <span class="strong strong"><strong>Select migration network</strong></span>.
					</li><li class="listitem"><p class="simpara">
						Specify the following fields:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<span class="strong strong"><strong>Network</strong></span>: Network name
							</li><li class="listitem">
								<span class="strong strong"><strong>ESXi host admin username</strong></span>: For example, <code class="literal">root</code>
							</li><li class="listitem">
								<span class="strong strong"><strong>ESXi host admin password</strong></span>: Password
							</li></ul></div></li><li class="listitem">
						Click <span class="strong strong"><strong>Save</strong></span>.
					</li><li class="listitem"><p class="simpara">
						Verify that the status of each host is <span class="strong strong"><strong>Ready</strong></span>.
					</p><p class="simpara">
						If a host status is not <span class="strong strong"><strong>Ready</strong></span>, the host might be unreachable on the migration network or the credentials might be incorrect. You can modify the host configuration and save the changes.
					</p></li></ol></div></section><section class="section" id="adding-source-provider_dest_vmware"><div class="titlepage"><div><div><h2 class="title">10.6. Adding an OpenShift Virtualization destination provider</h2></div></div></div><p class="_abstract _abstract">
				Use a Red Hat OpenShift Virtualization provider as both source and destination provider. You can migrate VMs from the cluster that Migration Toolkit for Virtualization (MTV) is deployed on to another cluster or from a remote cluster to the cluster that MTV is deployed on.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You must have an OpenShift Virtualization <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.20/html/authentication_and_authorization/using-service-accounts">service account token</a> with <code class="literal">cluster-admin</code> privileges.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Access the <span class="strong strong"><strong>Create OpenShift Virtualization provider</strong></span> interface by doing one of the following:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								In the Red Hat OpenShift web console, click <span class="strong strong"><strong>Migration for Virtualization &gt; Providers</strong></span>.
							</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem">
										Click <span class="strong strong"><strong>Create Provider</strong></span>.
									</li><li class="listitem"><p class="simpara">
										Select a <span class="strong strong"><strong>Project</strong></span> from the list. The default project shown depends on the active project of MTV.
									</p><p class="simpara">
										If the active project is <span class="strong strong"><strong>All projects</strong></span>, then the default project is <code class="literal">openshift-mtv</code>. Otherwise, the default project is the same as the active project.
									</p><p class="simpara">
										If you have Administrator privileges, you can see all projects, otherwise, you can see only the projects you are authorized to work with.
									</p></li><li class="listitem">
										Click <span class="strong strong"><strong>OpenShift Virtualization</strong></span>.
									</li></ol></div></li><li class="listitem"><p class="simpara">
								If you have Administrator privileges, in the Red Hat OpenShift web console, click <span class="strong strong"><strong>Migration for Virtualization &gt; Overview</strong></span>.
							</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem"><p class="simpara">
										In the <span class="strong strong"><strong>Welcome</strong></span> pane, click <span class="strong strong"><strong>OpenShift Virtualization</strong></span>.
									</p><p class="simpara">
										If the <span class="strong strong"><strong>Welcome</strong></span> pane is not visible, click <span class="strong strong"><strong>Show the welcome card</strong></span> in the upper-right corner of the page, and click <span class="strong strong"><strong>OpenShift Virtualization</strong></span> when the <span class="strong strong"><strong>Welcome</strong></span> pane opens.
									</p></li><li class="listitem"><p class="simpara">
										Select a <span class="strong strong"><strong>Project</strong></span> from the list. The default project shown depends on the active project of MTV.
									</p><p class="simpara">
										If the active project is <span class="strong strong"><strong>All projects</strong></span>, then the default project is <code class="literal">openshift-mtv</code>. Otherwise, the default project is the same as the active project.
									</p><p class="simpara">
										If you have Administrator privileges, you can see all projects, otherwise, you can see only the projects you are authorized to work with.
									</p></li></ol></div></li></ol></div></li><li class="listitem"><p class="simpara">
						Specify the following fields:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<span class="strong strong"><strong>Provider resource name</strong></span>: Name of the source provider
							</li><li class="listitem">
								<span class="strong strong"><strong>URL</strong></span>: URL of the endpoint of the API server
							</li><li class="listitem"><p class="simpara">
								<span class="strong strong"><strong>Service account bearer token</strong></span>: Token for a service account with <code class="literal">cluster-admin</code> privileges
							</p><p class="simpara">
								If both <span class="strong strong"><strong>URL</strong></span> and <span class="strong strong"><strong>Service account bearer token</strong></span> are left blank, the local OpenShift cluster is used.
							</p></li></ul></div></li><li class="listitem"><p class="simpara">
						Choose one of the following options for validating CA certificates:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<span class="strong strong"><strong>Use a custom CA certificate</strong></span>: Migrate after validating a custom CA certificate.
							</li><li class="listitem">
								<span class="strong strong"><strong>Use the system CA certificate</strong></span>: Migrate after validating the system CA certificate.
							</li><li class="listitem"><p class="simpara">
								<span class="strong strong"><strong>Skip certificate validation</strong></span> : Migrate without validating a CA certificate.
							</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
										To use a custom CA certificate, leave the <span class="strong strong"><strong>Skip certificate validation</strong></span> switch toggled to left, and <span class="emphasis"><em>either</em></span> drag the CA certificate to the text box <span class="emphasis"><em>or</em></span> browse for it and click <span class="strong strong"><strong>Select</strong></span>.
									</li><li class="listitem">
										To use the system CA certificate, leave the <span class="strong strong"><strong>Skip certificate validation</strong></span> switch toggled to the left, and leave the <span class="strong strong"><strong>CA certificate</strong></span> text box empty.
									</li><li class="listitem">
										To skip certificate validation, toggle the <span class="strong strong"><strong>Skip certificate validation</strong></span> switch to the right.
									</li></ol></div></li></ul></div></li><li class="listitem"><p class="simpara">
						Optional: Ask MTV to fetch a custom CA certificate from the provider’s API endpoint URL.
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Click <span class="strong strong"><strong>Fetch certificate from URL</strong></span>. The <span class="strong strong"><strong>Verify certificate</strong></span> window opens.
							</li><li class="listitem"><p class="simpara">
								If the details are correct, select the <span class="strong strong"><strong>I trust the authenticity of this certificate</strong></span> checkbox, and then, click <span class="strong strong"><strong>Confirm</strong></span>. If not, click <span class="strong strong"><strong>Cancel</strong></span>, and then, enter the correct certificate information manually.
							</p><p class="simpara">
								Once confirmed, the CA certificate will be used to validate subsequent communication with the API endpoint.
							</p></li></ol></div></li><li class="listitem"><p class="simpara">
						Click <span class="strong strong"><strong>Create provider</strong></span> to add and save the provider.
					</p><p class="simpara">
						The provider appears in the list of providers.
					</p></li></ol></div></section><section class="section" id="selecting-migration-network-for-virt-provider_dest_vmware"><div class="titlepage"><div><div><h2 class="title">10.7. Selecting a migration network for an OpenShift Virtualization provider</h2></div></div></div><p class="_abstract _abstract">
				You can select a default migration network for an OpenShift Virtualization provider in the Red Hat OpenShift web console to improve performance. The default migration network is used to transfer disks to the namespaces in which it is configured.
			</p><p>
				After you select a transfer network, associate its network attachment definition (NAD) with the gateway to be used by this network.
			</p><p>
				In MTV version 2.9 and earlier, MTV used the <code class="literal">pod</code> network as the default network.
			</p><p>
				In version 2.10.0 and later, MTV detects if you have selected a user-defined network (UDN) as your default network. Therefore, if you set the UDN to be the migration’s namespace, you do not need to select a new default network when you create your migration plan.
			</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					MTV supports using UDNs for all providers except OpenShift Virtualization.
				</p></div></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					You can override the default migration network of the provider by selecting a different network when you create a migration plan.
				</p></div></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						In the Red Hat OpenShift web console, click <span class="strong strong"><strong>Migration for Virtualization</strong></span> &gt; <span class="strong strong"><strong>Providers</strong></span>.
					</li><li class="listitem"><p class="simpara">
						Click the OpenShift Virtualization provider whose migration network you want to change.
					</p><p class="simpara">
						When the <span class="strong strong"><strong>Providers detail</strong></span> page opens:
					</p></li><li class="listitem">
						Click the <span class="strong strong"><strong>Networks</strong></span> tab.
					</li><li class="listitem">
						Click <span class="strong strong"><strong>Set default transfer network</strong></span>.
					</li><li class="listitem">
						Select a default transfer network from the list and click <span class="strong strong"><strong>Save</strong></span>.
					</li><li class="listitem"><p class="simpara">
						Configure a gateway in the network used for MTV migrations by completing the following steps:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								In the Red Hat OpenShift web console, click <span class="strong strong"><strong>Networking</strong></span> &gt; <span class="strong strong"><strong>NetworkAttachmentDefinitions</strong></span>.
							</li><li class="listitem">
								Select the appropriate default transfer network NAD.
							</li><li class="listitem">
								Click the <span class="strong strong"><strong>YAML</strong></span> tab.
							</li><li class="listitem"><p class="simpara">
								Add <code class="literal">forklift.konveyor.io/route</code> to the metadata:annotations section of the YAML, as in the following example:
							</p><pre class="programlisting language-yaml">apiVersion: k8s.cni.cncf.io/v1
kind: NetworkAttachmentDefinition
metadata:
  name: localnet-network
  namespace: mtv-test
  annotations:
    forklift.konveyor.io/route: &lt;IP address&gt;</pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										The <code class="literal">NetworkAttachmentDefinition</code> parameter is needed to configure an IP address for the interface, either from the Dynamic Host Configuration Protocol (DHCP) or statically. Configuring the IP address enables the interface to reach the configured gateway.
									</li></ul></div></li><li class="listitem">
								Click <span class="strong strong"><strong>Save</strong></span>.
							</li></ol></div></li></ol></div></section><section class="section" id="creating-plan-wizard-vmware_vmware"><div class="titlepage"><div><div><h2 class="title">10.8. Creating a VMware vSphere migration plan by using the MTV wizard</h2></div></div></div><p class="_abstract _abstract">
				You can migrate VMware vSphere virtual machines (VMs) from VMware vCenter or from a VMware ESX or ESXi server by using the Migration Toolkit for Virtualization plan creation wizard.
			</p><p>
				The wizard is designed to lead you step-by-step in creating a migration plan.
			</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
					Do not include virtual machines with guest-initiated storage connections, such as Internet Small Computer Systems Interface (iSCSI) connections or Network File System (NFS) mounts. These require either additional planning before migration or reconfiguration after migration.
				</p><p>
					This prevents concurrent disk access to the storage the guest points to.
				</p></div></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					A plan cannot contain more than 500 VMs or 500 disks.
				</p></div></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					When you click <span class="strong strong"><strong>Create plan</strong></span> on the <span class="strong strong"><strong>Review and create</strong></span> page of the wizard, Migration Toolkit for Virtualization (MTV) validates your plan. If everything is OK, the <span class="strong strong"><strong>Plan details</strong></span> page for your plan opens. This page contains settings that do not appear in the wizard, but are important. Be sure to read and follow the instructions for this page carefully, even though it is outside the plan creation wizard. The page can be opened later, any time before you run the plan, so you can come back to it if needed.
				</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Have a VMware source provider and a OpenShift Virtualization destination provider. For more information, see <a class="link" href="#adding-source-provider_vmware" title="10.4. Adding a VMware vSphere source provider">Adding a VMware vSphere source provider</a> or <a class="link" href="#adding-source-provider_dest_vmware" title="10.6. Adding an OpenShift Virtualization destination provider">Adding an OpenShift Virtualization destination provider</a>.
					</li><li class="listitem">
						If you plan to create a <span class="strong strong"><strong>Network map</strong></span> or a <span class="strong strong"><strong>Storage map</strong></span> that will be used by more than one migration plan, create it in the <span class="strong strong"><strong>Network maps</strong></span> or <span class="strong strong"><strong>Storage maps</strong></span> page of the UI before you create a migration plan that uses that map.
					</li><li class="listitem">
						If you are using a user-defined network (UDN), note the name of its namespace as defined in OpenShift Virtualization.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						On the Red Hat OpenShift web console, click <span class="strong strong"><strong>Migration for Virtualization</strong></span> &gt; <span class="strong strong"><strong>Migration plans</strong></span>.
					</li><li class="listitem"><p class="simpara">
						Click <span class="strong strong"><strong>Create plan</strong></span>.
					</p><p class="simpara">
						The <span class="strong strong"><strong>Create migration plan</strong></span> wizard opens.
					</p></li><li class="listitem"><p class="simpara">
						On the <span class="strong strong"><strong>General</strong></span> page, specify the following fields:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<span class="strong strong"><strong>Plan name</strong></span>: Enter a name.
							</li><li class="listitem">
								<span class="strong strong"><strong>Plan project</strong></span>: Select from the list.
							</li><li class="listitem">
								<span class="strong strong"><strong>Source provider</strong></span>: Select from the list.
							</li><li class="listitem">
								<span class="strong strong"><strong>Target provider</strong></span>: Select from the list.
							</li><li class="listitem"><p class="simpara">
								<span class="strong strong"><strong>Target project</strong></span>: Click the list and do one of the following:
							</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
										Select an existing project from the list.
									</li><li class="listitem"><p class="simpara">
										Create a new project by clicking <span class="strong strong"><strong>Create project</strong></span> and doing the following:
									</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem">
												Enter the <span class="strong strong"><strong>Name</strong></span> of the project. A project name must consist of lowercase alphanumeric characters or <code class="literal">-</code>. A project name must start and end with alphanumeric characters. For example, <code class="literal">my-name</code> or <code class="literal">123-abc</code>.
											</li><li class="listitem">
												Optional: Enter a <span class="strong strong"><strong>Display name</strong></span> for the project.
											</li><li class="listitem">
												Optional: Enter a <span class="strong strong"><strong>Description</strong></span> of the project.
											</li><li class="listitem">
												Click <span class="strong strong"><strong>Create project</strong></span>.
											</li></ol></div></li></ol></div></li></ul></div></li><li class="listitem">
						Click <span class="strong strong"><strong>Next</strong></span>.
					</li><li class="listitem">
						On the <span class="strong strong"><strong>Virtual machines</strong></span> page, select the virtual machines you want to migrate and click <span class="strong strong"><strong>Next</strong></span>.
					</li><li class="listitem">
						If you are using a UDN, verify that the IP address of the provider is outside the subnet of the UDN. If the IP address is within the subnet of the UDN, the migration fails.
					</li><li class="listitem"><p class="simpara">
						On the <span class="strong strong"><strong>Network map</strong></span> page, choose one of the following options:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								<span class="strong strong"><strong>Use an existing network map</strong></span>: Select an existing network map from the list.
							</p><p class="simpara">
								These are network maps available for all plans, and therefore, they are <span class="emphasis"><em>ownerless</em></span> in terms of the system. If you select this option and choose a map, a copy of that map is attached to your plan, and your plan is the <span class="emphasis"><em>owner</em></span> of that copy. Any changes you make to your copy do not affect the original plan or any copies that other users have.
							</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									If you choose an existing map, be sure it has the same source provider and the same target provider as the ones you want to use in your plan.
								</p></div></div></li><li class="listitem"><p class="simpara">
								<span class="strong strong"><strong>Use a new network map</strong></span>: Allows you to create a new network map by supplying the following data. This map is attached to this plan, which is then considered to be its owner. Maps that you create using this option are not available in the <span class="strong strong"><strong>Use an existing network map</strong></span> option because each is created with an owner.
							</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									You can create an ownerless network map, which you and others can use for additional migration plans, in the <span class="strong strong"><strong>Network maps</strong></span> section of the UI.
								</p></div></div><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										<span class="strong strong"><strong>Source network</strong></span>: Select from the list.
									</li><li class="listitem"><p class="simpara">
										<span class="strong strong"><strong>Target network</strong></span>: Select from the list.
									</p><p class="simpara">
										If needed, click <span class="strong strong"><strong>Add mapping</strong></span> to add another mapping.
									</p></li><li class="listitem">
										<span class="strong strong"><strong>Network map name</strong></span>: Enter a name or let MTV automatically generate a name for the network map.
									</li></ul></div></li></ul></div></li><li class="listitem">
						Click <span class="strong strong"><strong>Next</strong></span>.
					</li><li class="listitem"><p class="simpara">
						On the <span class="strong strong"><strong>Storage map</strong></span> page, choose one of the following options:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								<span class="strong strong"><strong>Use an existing storage map</strong></span>: Select an existing storage map from the list.
							</p><p class="simpara">
								These are storage maps available for all plans, and therefore, they are <span class="emphasis"><em>ownerless</em></span> in terms of the system. If you select this option and choose a map, a copy of that map is attached to your plan, and your plan is the <span class="emphasis"><em>owner</em></span> of that copy. Any changes you make to your copy do not affect the original plan or any copies that other users have.
							</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									If you choose an existing map, be sure it has the same source provider and the same target provider as the ones you want to use in your plan.
								</p></div></div></li><li class="listitem"><p class="simpara">
								<span class="strong strong"><strong>Use new storage map</strong></span>: Allows you to create one or two new storage maps by supplying the following data. These maps are attached to this plan, which is then their owner. Maps that you create using this option are not available in the <span class="strong strong"><strong>Use an existing storage map</strong></span> option because each is created with an owner.
							</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									You can create an ownerless storage map, which you and others can use for additional migration plans, in the <span class="strong strong"><strong>Storage maps</strong></span> section of the UI.
								</p></div></div><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										<span class="strong strong"><strong>Source storage</strong></span>: Select from the list.
									</li><li class="listitem"><p class="simpara">
										<span class="strong strong"><strong>Target storage</strong></span>: Select from the list.
									</p><p class="simpara">
										If needed, click <span class="strong strong"><strong>Add mapping</strong></span> to add another mapping.
									</p></li><li class="listitem">
										<span class="strong strong"><strong>Storage map name</strong></span>: Enter a name or let MTV automatically generate a name for the storage map.
									</li></ul></div></li></ul></div></li><li class="listitem">
						Click <span class="strong strong"><strong>Next</strong></span>.
					</li><li class="listitem"><p class="simpara">
						On the <span class="strong strong"><strong>Migration type</strong></span> page, choose one of the following:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<span class="strong strong"><strong>Cold migration</strong></span> (default)
							</li><li class="listitem">
								<span class="strong strong"><strong>Warm migration</strong></span>
							</li></ul></div></li><li class="listitem">
						Click <span class="strong strong"><strong>Next</strong></span>.
					</li><li class="listitem"><p class="simpara">
						On the <span class="strong strong"><strong>Other settings (optional)</strong></span> page, specify any of the following settings that are appropriate for your plan. All are optional.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								<span class="strong strong"><strong>Disk decryption passphrases</strong></span>: For disks encrypted using Linux Unified Key Setup (LUKS).
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										Enter a decryption passphrase for a LUKS-encrypted device.
									</li><li class="listitem">
										To add another passphrase, click <span class="strong strong"><strong>Add passphrase</strong></span> and add a passphrase.
									</li><li class="listitem"><p class="simpara">
										Repeat as needed.
									</p><p class="simpara">
										You do not need to enter the passphrases in a specific order. For each LUKS-encrypted device, MTV tries each passphrase until one unlocks the device.
									</p></li></ul></div></li><li class="listitem"><p class="simpara">
								<span class="strong strong"><strong>Transfer Network</strong></span>: The network used to transfer the VMs to OpenShift Virtualization. This is the default transfer network of the provider.
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										Verify that the transfer network is in the selected target project.
									</li><li class="listitem">
										To choose a different transfer network, select a different transfer network from the list.
									</li><li class="listitem"><p class="simpara">
										Optional: To configure another OpenShift network in the OpenShift web console, click <span class="strong strong"><strong>Networking &gt; NetworkAttachmentDefinitions</strong></span>.
									</p><p class="simpara">
										To learn more about the different types of networks OpenShift supports, see <a class="link" href="https://docs.redhat.com/en/documentation/openshift_container_platform/4.20/html-single/networking/index#additional-networks-provided_understanding-multiple-networks">Additional Networks in OpenShift Container Platform</a>.
									</p></li><li class="listitem">
										To adjust the maximum transmission unit (MTU) of the OpenShift transfer network, you must also change the MTU of the VMware migration network. For more information, see <a class="link" href="#selecting-migration-network-for-vmware-source-provider_vmware" title="10.5. Selecting a migration network for a VMware source provider">Selecting a migration network for a VMware source provider</a>.
									</li></ul></div></li><li class="listitem"><p class="simpara">
								<span class="strong strong"><strong>Preserve static IPs</strong></span>: By default, virtual network interface controllers (vNICs) change during the migration process. As a result, vNICs that are configured with a static IP linked to the interface name in the guest VM lose their IP during migration.
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
										To preserve static IPs, select the <span class="strong strong"><strong>Preserve the static IPs</strong></span> checkbox.
									</p><p class="simpara">
										MTV then issues a warning message about any VMs whose vNIC properties are missing. To retrieve any missing vNIC properties, run those VMs in vSphere. This causes the vNIC properties to be reported to MTV.
									</p></li></ul></div></li><li class="listitem"><p class="simpara">
								<span class="strong strong"><strong>Root device</strong></span>: Applies to multi-boot VM migrations only. By default, MTV uses the first bootable device detected as the root device.
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
										To specify a different root device, enter it in the text box.
									</p><p class="simpara">
										MTV uses the following format for disk location: <code class="literal">/dev/sd&lt;disk_identifier&gt;&lt;disk_partition&gt;</code>. For example, if the second disk is the root device and the operating system is on the disk’s second partition, the format would be: <code class="literal">/dev/sdb2</code>. After you enter the boot device, click <span class="strong strong"><strong>Save</strong></span>.
									</p><p class="simpara">
										If the conversion fails because the boot device provided is incorrect, it is possible to get the correct information by checking the conversion pod logs.
									</p></li></ul></div></li><li class="listitem"><p class="simpara">
								<span class="strong strong"><strong>Shared disks</strong></span>: Applies to cold migrations only. Shared disks are disks that are attached to multiple VMs and that use the multi-writer option. These characteristics make shared disks difficult to migrate. By default, MTV migrates shared disks.
							</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									Migrating shared disks might slow down the migration process.
								</p></div></div><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										To migrate shared disks in the migration plan, verify that <span class="strong strong"><strong>Shared disks</strong></span> is selected in the checkbox.
									</li><li class="listitem">
										To avoid migrating shared disks, clear the <span class="strong strong"><strong>Shared disks</strong></span> checkbox.
									</li></ul></div></li></ul></div></li><li class="listitem">
						Click <span class="strong strong"><strong>Next</strong></span>.
					</li><li class="listitem">
						On the <span class="strong strong"><strong>Hooks (optional)</strong></span> page, you can add a pre-migration hook, a post-migration hook, or both types of migration hooks. All are optional.
					</li><li class="listitem">
						To add a hook, select the appropriate <span class="strong strong"><strong>Enable hook</strong></span> checkbox.
					</li><li class="listitem">
						Enter the <span class="strong strong"><strong>Hook runner image</strong></span>.
					</li><li class="listitem"><p class="simpara">
						Enter the <span class="strong strong"><strong>Ansible playbook</strong></span> of the hook in the window.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							You cannot include more than one pre-migration hook or more than one post-migration hook in a migration plan.
						</p></div></div></li><li class="listitem">
						Click <span class="strong strong"><strong>Next</strong></span>.
					</li><li class="listitem">
						On the <span class="strong strong"><strong>Review and create</strong></span> page, review the information displayed.
					</li><li class="listitem"><p class="simpara">
						Edit any item by doing the following:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Click its <span class="strong strong"><strong>Edit step</strong></span> link.
							</p><p class="simpara">
								The wizard opens to the page where you defined the item.
							</p></li><li class="listitem">
								Edit the item.
							</li><li class="listitem">
								Either click <span class="strong strong"><strong>Next</strong></span> to advance to the next page of the wizard, or click <span class="strong strong"><strong>Skip to review</strong></span> to return directly to the <span class="strong strong"><strong>Review and create</strong></span> page.
							</li></ol></div></li><li class="listitem"><p class="simpara">
						When you finish reviewing the details of the plan, click <span class="strong strong"><strong>Create plan</strong></span>. MTV validates your plan.
					</p><p class="simpara">
						When your plan is validated, the <span class="strong strong"><strong>Plan details</strong></span> page for your plan opens in the <span class="strong strong"><strong>Details</strong></span> tab.
					</p><p class="simpara">
						The <span class="strong strong"><strong>Plan settings</strong></span> section of the page includes settings that you specified in the <span class="strong strong"><strong>Other settings (optional)</strong></span> page and some additional optional settings. The steps below refer to the additional optional steps, but all of the settings can be edited by clicking the Options menu 
						<span class="inlinemediaobject"><img src="images/modules/images/kebab.png" height="20" alt="kebab"/></span>
						, making the change, and then clicking <span class="strong strong"><strong>Save</strong></span>.
					</p></li><li class="listitem"><p class="simpara">
						Check the following items on the <span class="strong strong"><strong>Plan settings</strong></span> section of the page:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								<span class="strong strong"><strong>Volume name template</strong></span>: Specifies a template for the volume interface name for the VMs in your plan.
							</p><p class="simpara">
								The template follows the Go template syntax and has access to the following variables:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										<code class="literal">.PVCName</code>: Name of the PVC mounted to the VM using this volume
									</li><li class="listitem"><p class="simpara">
										<code class="literal">.VolumeIndex</code>: Sequential index of the volume interface (0-based)
									</p><p class="simpara">
										Examples
									</p></li><li class="listitem">
										<code class="literal">"disk-{{.VolumeIndex}}"</code>
									</li><li class="listitem"><p class="simpara">
										<code class="literal">"pvc-{{.PVCName}}"</code>
									</p><p class="simpara">
										Variable names cannot exceed 63 characters.
									</p></li><li class="listitem"><p class="simpara">
										To specify a volume name template for all the VMs in your plan, do the following:
									</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
												Click the <span class="strong strong"><strong>Edit</strong></span> icon.
											</li><li class="listitem">
												Click <span class="strong strong"><strong>Enter custom naming template</strong></span>.
											</li><li class="listitem">
												Enter the template according to the instructions. Be sure that your template generates VM names that follow RFC 1123, but do not include uppercase letters.
											</li><li class="listitem">
												Click <span class="strong strong"><strong>Save</strong></span>.
											</li></ul></div></li><li class="listitem"><p class="simpara">
										To specify a different volume name template only for specific VMs, do the following:
									</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
												Click the <span class="strong strong"><strong>Virtual machines</strong></span> tab.
											</li><li class="listitem">
												Select the desired VMs.
											</li><li class="listitem">
												Click the Options menu 
												<span class="inlinemediaobject"><img src="images/modules/images/kebab.png" height="20" alt="kebab"/></span>
												 of the VM.
											</li><li class="listitem">
												Select <span class="strong strong"><strong>Edit Volume name template</strong></span>.
											</li><li class="listitem">
												Enter the template according to the instructions. Be sure that your template generates VM names that follow RFC 1123, but do not include uppercase letters.
											</li><li class="listitem"><p class="simpara">
												Click <span class="strong strong"><strong>Save</strong></span>.
											</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
													Changes you make on the <span class="strong strong"><strong>Virtual machines</strong></span> tab override any changes on the <span class="strong strong"><strong>Plan details</strong></span> page.
												</p></div></div></li></ul></div></li></ul></div></li><li class="listitem"><p class="simpara">
								<span class="strong strong"><strong>PVC name template</strong></span>: Specifies a template for the name of the persistent volume claim (PVC) for the VMs in your plan.
							</p><p class="simpara">
								The template follows the Go template syntax and has access to the following variables:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										<code class="literal">.VmName</code>: Name of the VM
									</li><li class="listitem">
										<code class="literal">.PlanName</code>: Name of the migration plan
									</li><li class="listitem">
										<code class="literal">.DiskIndex</code>: Initial volume index of the disk
									</li><li class="listitem"><p class="simpara">
										<code class="literal">.RootDiskIndex</code>: Index of the root disk
									</p><p class="simpara">
										Examples
									</p></li><li class="listitem">
										<code class="literal">"{{.VmName}}-disk-{{.DiskIndex}}"</code>
									</li><li class="listitem"><p class="simpara">
										<code class="literal">"{{if eq .DiskIndex .RootDiskIndex}}root{{else}}data{{end}}-{{.DiskIndex}}"</code>
									</p><p class="simpara">
										Variable names cannot exceed 63 characters.
									</p></li><li class="listitem"><p class="simpara">
										To specify a PVC name template for all the VMs in your plan, do the following:
									</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
												Click the <span class="strong strong"><strong>Edit</strong></span> icon.
											</li><li class="listitem">
												Click <span class="strong strong"><strong>Enter custom naming template</strong></span>.
											</li><li class="listitem">
												Enter the template according to the instructions. Be sure that your template generates VM names that follow RFC 1123, but do not include uppercase letters.
											</li><li class="listitem">
												Click <span class="strong strong"><strong>Save</strong></span>.
											</li></ul></div></li><li class="listitem"><p class="simpara">
										To specify a PVC name template only for specific VMs, do the following:
									</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
												Click the <span class="strong strong"><strong>Virtual machines</strong></span> tab.
											</li><li class="listitem">
												Select the desired VMs.
											</li><li class="listitem">
												Click the Options menu 
												<span class="inlinemediaobject"><img src="images/modules/images/kebab.png" height="20" alt="kebab"/></span>
												 of the VM.
											</li><li class="listitem">
												Select <span class="strong strong"><strong>Edit PVC name template</strong></span>.
											</li><li class="listitem">
												Enter the template according to the instructions. Be sure that your template generates VM names that follow RFC 1123, but do not include uppercase letters.
											</li><li class="listitem"><p class="simpara">
												Click <span class="strong strong"><strong>Save</strong></span>.
											</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
													Changes you make on the <span class="strong strong"><strong>Virtual machines</strong></span> tab override any changes on the <span class="strong strong"><strong>Plan details</strong></span> page.
												</p></div></div></li></ul></div></li></ul></div></li><li class="listitem"><p class="simpara">
								<span class="strong strong"><strong>Network name template</strong></span>: Specifies a template for the network interface name for the VMs in your plan.
							</p><p class="simpara">
								The template follows the Go template syntax and has access to the following variables:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										<code class="literal">.NetworkName:</code> If the target network is <code class="literal">multus</code>, add the name of the Multus Network Attachment Definition. Otherwise, leave this variable empty.
									</li><li class="listitem">
										<code class="literal">.NetworkNamespace</code>: If the target network is <code class="literal">multus</code>, add the namespace where the Multus Network Attachment Definition is located.
									</li><li class="listitem">
										<code class="literal">.NetworkType</code>: Network type. Options: <code class="literal">multus</code> or <code class="literal">pod</code>.
									</li><li class="listitem"><p class="simpara">
										<code class="literal">.NetworkIndex</code>: Sequential index of the network interface (0-based).
									</p><p class="simpara">
										Examples
									</p></li><li class="listitem">
										<code class="literal">"net-{{.NetworkIndex}}"</code>
									</li><li class="listitem"><p class="simpara">
										<code class="literal">{{if eq .NetworkType "pod"}}pod{{else}}multus-{{.NetworkIndex}}{{end}}"</code>
									</p><p class="simpara">
										Variable names cannot exceed 63 characters.
									</p></li><li class="listitem"><p class="simpara">
										To specify a network name template for all the VMs in your plan, do the following:
									</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
												Click the <span class="strong strong"><strong>Edit</strong></span> icon.
											</li><li class="listitem">
												Click <span class="strong strong"><strong>Enter custom naming template</strong></span>.
											</li><li class="listitem">
												Enter the template according to the instructions. Be sure that your template generates VM names that follow RFC 1123, but do not include uppercase letters.
											</li><li class="listitem">
												Click <span class="strong strong"><strong>Save</strong></span>.
											</li></ul></div></li><li class="listitem"><p class="simpara">
										To specify a different network name template only for specific VMs, do the following:
									</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
												Click the <span class="strong strong"><strong>Virtual machines</strong></span> tab.
											</li><li class="listitem">
												Select the desired VMs.
											</li><li class="listitem">
												Click the Options menu 
												<span class="inlinemediaobject"><img src="images/modules/images/kebab.png" height="20" alt="kebab"/></span>
												 of the VM.
											</li><li class="listitem">
												Select <span class="strong strong"><strong>Edit network name template</strong></span>.
											</li><li class="listitem">
												Enter the template according to the instructions. Be sure that your template generates VM names that follow RFC 1123, but do not include uppercase letters.
											</li><li class="listitem"><p class="simpara">
												Click <span class="strong strong"><strong>Save</strong></span>.
											</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
													Changes you make on the <span class="strong strong"><strong>Virtual machines</strong></span> tab override any changes on the <span class="strong strong"><strong>Plan details</strong></span> page.
												</p></div></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
													MTV does not validate VM names generated by the templates you enter on the <span class="strong strong"><strong>Plan details</strong></span> page. Migrations that include VMs whose names include uppercase letters or that violate RFC 1123 rules fail automatically. To avoid failures, you might want to run a Go script that uses the <code class="literal">sprig</code> methods that MTV supports. For tables documenting the methods that MTV supports, see <a class="link" href="https://docs.redhat.com/en/documentation/migration_toolkit_for_virtualization/2.10/html/migrating_your_virtual_machines_to_red_hat_openshift_virtualization/assembly_migrating-from-vmware#mtv-template-utility_vmware">MTV template utility for VMware VM names</a>.
												</p></div></div></li></ul></div></li></ul></div></li><li class="listitem"><p class="simpara">
								<span class="strong strong"><strong>Raw copy mode</strong></span>: By default, during migration, virtual machines (VMs) are converted using a tool named <code class="literal">virt-v2v</code> that makes them compatible with OpenShift Virtualization. For more information about the virt-v2v conversion process, see <a class="link" href="https://docs.redhat.com/en/documentation/migration_toolkit_for_virtualization/2.10/html/migrating_your_virtual_machines_to_red_hat_openshift_virtualization/assembly_troubleshooting-migration_mtv#virt-v2v-mtv_mtv">How MTV uses the virt-v2v tool</a>. <span class="emphasis"><em>Raw copy mode</em></span> copies VMs without converting them. This allows for faster conversions, migrating VMs running a wider range of operating systems, and supporting migrating disks encrypted using Linux Unified Key Setup (LUKS) without needing keys. However, VMs migrated using raw copy mode might not function properly on OpenShift Virtualization.
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
										To use raw copy mode for your migration plan, do the following:
									</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
												Click the <span class="strong strong"><strong>Edit</strong></span> icon.
											</li><li class="listitem">
												Toggle the <span class="strong strong"><strong>Raw copy mode</strong></span> switch.
											</li><li class="listitem">
												Click <span class="strong strong"><strong>Save</strong></span>.
											</li></ul></div></li></ul></div></li><li class="listitem"><p class="simpara">
								<span class="strong strong"><strong>VM target node selector</strong></span>, <span class="strong strong"><strong>VM target labels</strong></span>, and <span class="strong strong"><strong>VM target affinity rules</strong></span> are options that support VM target scheduling, a feature that lets you direct MTV to migrate virtual machines (VMs) to specific nodes or workloads (pods) of OpenShift Virtualization as well as to schedule when to power on the VMs.
							</p><p class="simpara">
								For more information on the feature in general, see <a class="link" href="https://docs.redhat.com/en/documentation/migration_toolkit_for_virtualization/2.10/html/migrating_your_virtual_machines_to_red_hat_openshift_virtualization/assembly_advanced-migration-options_mtv#target-vm-scheduling-options_mtv">Target VM scheduling options</a>.
							</p><p class="simpara">
								For more details on using the feature with the UI, see <a class="link" href="https://docs.redhat.com/en/documentation/migration_toolkit_for_virtualization/2.10/html/migrating_your_virtual_machines_to_red_hat_openshift_virtualization/assembly_advanced-migration-options_mtv#configuring-target-vm-scheduling-ui_mtv">Scheduling target VMs from the user interface</a>.
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
										<span class="strong strong"><strong>VM target node selector</strong></span> allows you to create mandatory exact match key-value label pairs that the target node must possess. If no node on the cluster has all the labels specified, the VM is not scheduled and it remains in a <code class="literal">Pending</code> state until there is space on a node that fits these key-value label pairs.
									</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
												To use the VM target node selector for your migration plan, do the following:
											</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem">
														Click the <span class="strong strong"><strong>Edit</strong></span> icon.
													</li><li class="listitem">
														Enter a key-value label pair. For example, to require that all VMs in the plan be migrated to your <code class="literal">east</code> data center, enter <code class="literal">dataCenter</code> as your <span class="strong strong"><strong>key</strong></span> and <code class="literal">east</code> as your <span class="strong strong"><strong>label</strong></span>.
													</li><li class="listitem">
														To add another key-value label pair, click <span class="strong strong"><strong>+</strong></span> and enter another key-value pair.
													</li><li class="listitem">
														Click <span class="strong strong"><strong>Save</strong></span>.
													</li></ul></div></li></ul></div></li><li class="listitem"><p class="simpara">
										<span class="strong strong"><strong>VM target labels</strong></span> allows you to apply organizational or operational labels to migrated VMs for identification and management. One use for these labels is to use them to specify a different scheduler for your migrated VMs, by creating a specific target VM label for it.
									</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
												To use the VM target node selector for your migration plan, do the following:
											</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem">
														Click the <span class="strong strong"><strong>Edit</strong></span> icon.
													</li><li class="listitem">
														Enter one or more VM target labels.
													</li><li class="listitem">
														Click <span class="strong strong"><strong>Save</strong></span>.
													</li></ul></div></li></ul></div></li><li class="listitem"><p class="simpara">
										<span class="strong strong"><strong>VM target affinity rules</strong></span>: Target affinity rules let you use conditions to either require or prefer scheduling on specific nodes or workloads (pods).
									</p><p class="simpara">
										Target anti-affinity rules let you prevent VMs from being scheduled to run on selected workloads (pods) or prefer that they are not scheduled. These kind of rules offer more flexible placement control than rigid Node Selector rules, because they support conditionals such as <code class="literal">In</code>, or <code class="literal">NotIn</code>.
									</p><p class="simpara">
										For example, you could require that a VM be powered on "only if it is migrated to node A <span class="emphasis"><em>or</em></span> if it is migrated to an SSD disk, but it <span class="emphasis"><em>cannot</em></span> be migrated to a node for which <code class="literal">license-tier=silver</code> is true."
									</p><p class="simpara">
										Additionally, both target affinity and target anti-affinity rules allow you to include both <span class="emphasis"><em>hard</em></span> and <span class="emphasis"><em>soft</em></span> conditions in the same rule. A hard condition is a requirement, and a soft condition is a preference. The previous example used only hard conditions. A rule that states that "a VM can be powered on if it is migrated to node A <span class="emphasis"><em>or</em></span> if it is migrated to an SSD disk, but it is preferred not to migrate it to a node for which <code class="literal">license-tier=silver</code> is true" is an example of a rule that uses soft conditions.
									</p><p class="simpara">
										MTV supports target affinity rules at both the node level and the workload (pod) level. It supports anti-affinity rules at the workload (pod) level only.
									</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
												To use VM target affinity rules for your migration plan, do the following:
											</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem">
														Click the <span class="strong strong"><strong>Edit</strong></span> icon.
													</li><li class="listitem">
														Click <span class="strong strong"><strong>Add affinity rule</strong></span>.
													</li><li class="listitem">
														Select the <span class="strong strong"><strong>Type</strong></span> of affinity rule from the list. Valid options: Node Affinity, Workload (pod) Affinity, Workload (pod) Anti-Affinity.
													</li><li class="listitem">
														Select the <span class="strong strong"><strong>Condition</strong></span> from the list. Valid options: Preferred during scheduling (soft condition), Required during scheduling (hard condition).
													</li><li class="listitem">
														Soft condition only: Enter a numerical <span class="strong strong"><strong>Weight</strong></span>. The higher the weight, the stronger the preference. Valid options: whole numbers from 1-100.
													</li><li class="listitem">
														Enter a <span class="strong strong"><strong>Typology key</strong></span>, the key for the node label that the system uses to denote the domain.
													</li><li class="listitem"><p class="simpara">
														Optional: Select the <span class="strong strong"><strong>Workload labels</strong></span> that you want to set by doing the following:
													</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
																Enter a <span class="strong strong"><strong>Key</strong></span>.
															</li><li class="listitem">
																Select an <span class="strong strong"><strong>Operator</strong></span> from the list. Valid options: <code class="literal">Exists</code>, <code class="literal">DoesNotExist</code>, <code class="literal">In</code>, and <code class="literal">NotIn</code>.
															</li><li class="listitem">
																Enter a <span class="strong strong"><strong>Value</strong></span>.
															</li></ul></div></li><li class="listitem">
														To add another label, click <span class="strong strong"><strong>Add expression</strong></span> and add another key-value pair with an operator.
													</li><li class="listitem">
														Click <span class="strong strong"><strong>Save affinity rule</strong></span>.
													</li><li class="listitem"><p class="simpara">
														To add another affinity rule, click <span class="strong strong"><strong>Add affinity rule</strong></span>. Rules with a preferred condition will stack with an <code class="literal">AND</code> relation between them. Rules with a required condition will stack with an <code class="literal">OR</code> relation between them.
													</p><p class="simpara">
														MTV validates any changes you made on this page.
													</p></li></ul></div></li></ul></div></li></ul></div></li></ol></div></li><li class="listitem"><p class="simpara">
						In addition to listing details based on your entries in the wizard, the <span class="strong strong"><strong>Plan details</strong></span> tab includes the following two sections after the details of the plan:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<span class="strong strong"><strong>Migration history</strong></span>: Details about successful and unsuccessful attempts to run the plan
							</li><li class="listitem">
								<span class="strong strong"><strong>Conditions</strong></span>: Any changes that need to be made to the plan so that it can run successfully
							</li></ul></div></li><li class="listitem"><p class="simpara">
						When you have fixed all conditions listed, you can run your plan from the <span class="strong strong"><strong>Plans</strong></span> page.
					</p><p class="simpara">
						The <span class="strong strong"><strong>Plan details</strong></span> page also includes five additional tabs, which are described in the table that follows:
					</p><div class="table" id="idm46552700192304"><p class="title"><strong>Table 10.1. Tabs of the Plan details page</strong></p><div class="table-contents"><table class="gt-4-cols lt-7-rows"><colgroup><col style="width: 20%; " class="col_1"/><col style="width: 20%; " class="col_2"/><col style="width: 20%; " class="col_3"/><col style="width: 20%; " class="col_4"/><col style="width: 20%; " class="col_5"/></colgroup><thead><tr><th align="left" valign="top" id="idm46552700184672" scope="col">YAML</th><th align="left" valign="top" id="idm46552700183584" scope="col">Virtual Machines</th><th align="left" valign="top" id="idm46552701300128" scope="col">Resources</th><th align="left" valign="top" id="idm46552701299040" scope="col">Mappings</th><th align="left" valign="top" id="idm46552701297952" scope="col">Hooks</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm46552700184672">
									<p>
										Editable YAML <code class="literal">Plan</code> manifest based on your plan’s details including source provider, network and storage maps, VMs, and any issues with your VMs
									</p>
									</td><td align="left" valign="top" headers="idm46552700183584">
									<p>
										The VMs the plan migrates
									</p>
									</td><td align="left" valign="top" headers="idm46552701300128">
									<p>
										Calculated resources: VMs, CPUs, and total memory for both total VMs and running VMs
									</p>
									</td><td align="left" valign="top" headers="idm46552701299040">
									<p>
										Editable specification of the network and storage maps used by your plan
									</p>
									</td><td align="left" valign="top" headers="idm46552701297952">
									<p>
										Updatable specification of the hooks used by your plan, if any
									</p>
									</td></tr></tbody></table></div></div></li></ol></div></section><section class="section" id="con_migration-of-luks-encrypted-disks_vmware"><div class="titlepage"><div><div><h2 class="title">10.9. Migration of LUKS-encrypted disks</h2></div></div></div><p class="_abstract _abstract">
				If you have virtual machines (VMs) with LUKS-encrypted disks in your source VMware VSphere environment, you can migrate them to Red Hat OpenShift Virtualization by enabling Network-Bound Disk Encryption (NBDE) with Clevis. Alternatively, you can manually add passwords for LUKS-encrypted devices in your migration plan.
			</p><p>
				If you enable NBDE, passwords are retrieved from the Clevis server. When you manually add LUKS passwords to your migration plan, you provide the list of passwords, and you cannot use NBDE to retrieve them. The two methods for migrating LUKS-encrypted disks are incompatible. You must use either NBDE or manual LUKS passwords to migrate LUKS-encrypted disks.
			</p><p>
				MTV transfers the data of VMs with LUKS-encrypted disks from the source environment to the target OpenShift Virtualization cluster. MTV reads only the blocks that are required for guest conversion, decrypting the required blocks and re-encrypting them locally with the same key.
			</p><p>
				Clevis is a client-side framework that automates the decryption of LUKS volumes by binding a LUKS key slot to a policy. During the migration of VMs with LUKS-encrypted disks, MTV authenticates with the configured network service by requesting the key to unlock the LUKS-encrypted disk from the Tang server. The automatic retrieval of the key allows the VM to boot without a manual passphrase entry from an administrator.
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Benefits of NBDE</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<span class="strong strong"><strong>Automation:</strong></span> Eliminates the need to enter keys manually during migration.
								</li><li class="listitem">
									<span class="strong strong"><strong>Enhanced security:</strong></span> Maintains the security of VMs throughout their migration lifecycle by preserving LUKS encryption from the source to the destination.
								</li><li class="listitem">
									<span class="strong strong"><strong>Seamless operation:</strong></span> Ensures that VMs with encrypted disks can be brought online in the new OpenShift Virtualization environment with minimal interruption.
								</li></ul></div></dd></dl></div></section><section class="section" id="proc_enabling-nbde-with-clevis_vmware"><div class="titlepage"><div><div><h2 class="title">10.10. Enabling Network-Bound Disk Encryption with Clevis</h2></div></div></div><p class="_abstract _abstract">
				When you enable Network-Bound Disk Encryption (NBDE) with Clevis, the Tang server manages the keys for Linux Unified Key Setup (LUKS)-encrypted disks during a migration. If you do not use NBDE to migrate LUKS-encrypted disks from your source environment, you can manually add passwords for LUKS-encrypted devices instead. You must use either NBDE or manual LUKS passwords to migrate LUKS-encrypted disks.
			</p><p>
				You can enable NBDE with Clevis either in the MTV UI or in the YAML file for your migration plan:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						In the MTV UI, you must select either NBDE with Clevis or LUKS passphrases. You can have only one encryption type, and you apply the setting to all VMs in your migration plan.
					</li><li class="listitem">
						In the YAML file for your migration plan, you can combine encryption types and apply the setting to selected VMs in the YAML file.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The Tang server is accessible from your OpenShift cluster and from the migration network.
					</li><li class="listitem"><p class="simpara">
						You have a LUKS key slot bound to the Tang server policy.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							For MTV to access the keys from the Tang server, the keys must be on a different subnet range than a user-defined network (UDN).
						</p></div></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Enable NBDE with Clevis in the MTV UI.
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								In the Create migration plan wizard, navigate to <span class="strong strong"><strong>Other settings</strong></span> under <span class="strong strong"><strong>Additional setup</strong></span> in the left navigation pane.
							</li><li class="listitem"><p class="simpara">
								Select <span class="strong strong"><strong>Use NBDE/Clevis</strong></span>.
							</p><p class="simpara">
								If you are not using NBDE with Clevis, you add passphrases for LUKS-encrypted devices so that the Tang servers can decrypt the disks during a migration.
							</p></li><li class="listitem">
								Click <span class="strong strong"><strong>Next</strong></span>, and verify that <span class="strong strong"><strong>Use NBDE/Clevis</strong></span> shows as <span class="strong strong"><strong>Enabled</strong></span> under <span class="strong strong"><strong>Other settings (optional)</strong></span>.
							</li><li class="listitem">
								When you create your migration plan, click <span class="strong strong"><strong>Migration plans</strong></span> in the left navigation menu, and open the <span class="strong strong"><strong>Plan details</strong></span> page for your migration plan.
							</li><li class="listitem">
								Click the <span class="strong strong"><strong>Edit</strong></span> icon for <span class="strong strong"><strong>Disk decryption</strong></span> under <span class="strong strong"><strong>Plan settings</strong></span>.
							</li><li class="listitem"><p class="simpara">
								Verify that <span class="strong strong"><strong>Use network-bound disk encryption (NBDE/Clevis)</strong></span> is selected.
							</p><p class="simpara">
								If you are not using NBDE with Clevis, verify that the passphrases for LUKS-encrypted devices are added.
							</p></li></ol></div></li><li class="listitem"><p class="simpara">
						Enable NBDE with Clevis in the YAML file.
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Click <span class="strong strong"><strong>Migration plans</strong></span> in the left navigation menu and open the <span class="strong strong"><strong>Plan details</strong></span> page for your migration plan.
							</li><li class="listitem">
								Click the <span class="strong strong"><strong>YAML</strong></span> tab to open the <code class="literal">Plan</code> custom resource (CR) for your migration plan.
							</li><li class="listitem"><p class="simpara">
								For each VM under <code class="literal">vms</code> in the YAML file, enter the encryption type. In this example, you set <code class="literal">nbdeClevis</code> as the encryption type for <code class="literal">vm-1</code>, LUKS passphrase as the encryption type for <code class="literal">vm-2</code>, and no encryption type for <code class="literal">vm-3</code>:
							</p><p class="simpara">
								Example:
							</p><pre class="screen">vms:
  - id: vm-1
    name: vm-1-esx8.0-rhel8.10-raid1
    targetPowerState: on
    nbdeClevis: true
  - id: vm-2
    name: vm-2-esx8.0-rhel8.10-raid1
    luks: { name: 'test-secret-1' }
  - id: vm-3
    name: vm-3-esx8.0-rhel8.10-raid1</pre></li></ol></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Troubleshooting</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						For information about LUKS or Clevis configuration on the source VM, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/8/html-single/security_hardening/index#configuring-automated-unlocking-of-encrypted-volumes-using-policy-based-decryption_security-hardening">Configuring automated unlocking of encrypted volumes by using policy-based decryption</a> in the RHEL <span class="emphasis"><em>Security hardening</em></span> guide.
					</li></ul></div></section></section><section class="chapter" id="assembly_planning-migration-rhv_mtv"><div class="titlepage"><div><div><h1 class="title">Chapter 11. Planning a migration of virtual machines from Red Hat Virtualization</h1></div></div></div><p class="_abstract _abstract">
			Create a Red Hat Virtualization migration plan by setting up network maps, configuring source and destination providers with migration networks, and defining the migration plan in the Migration Toolkit for Virtualization (MTV) UI.
		</p><section class="section" id="creating-yaml-based-network-maps-ui_rhv"><div class="titlepage"><div><div><h2 class="title">11.1. Creating ownerless network maps in the MTV UI</h2></div></div></div><p class="_abstract _abstract">
				You can create ownerless network maps by using the Migration Toolkit for Virtualization (MTV) UI to map source networks to OpenShift Virtualization networks.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						In the Red Hat OpenShift web console, click <span class="strong strong"><strong>Migration for Virtualization</strong></span> &gt; <span class="strong strong"><strong>Network maps</strong></span>.
					</li><li class="listitem">
						Click <span class="strong strong"><strong>Create network map</strong></span> to open the <span class="strong strong"><strong>Create network map</strong></span> page.
					</li><li class="listitem">
						Enter the YAML or JSON definitions into the editor, or drag and drop a file into the editor.
					</li><li class="listitem">
						If you enter YAML definitions, use the following:
					</li></ol></div><pre class="programlisting language-yaml">$  cat &lt;&lt; EOF | oc apply -f -
apiVersion: forklift.konveyor.io/v1beta1
kind: NetworkMap
metadata:
  name: &lt;network_map&gt;
  namespace: &lt;namespace&gt;
spec:
  map:
    - destination:
        name: &lt;network_name&gt;
        type: pod
      source:
        id: &lt;source_network_id&gt;
        name: &lt;source_network_name&gt;
    - destination:
        name: &lt;network_attachment_definition&gt;
        namespace: &lt;network_attachment_definition_namespace&gt;
        type: multus
      source:
        id: &lt;source_network_id&gt;
        name: &lt;source_network_name&gt;
  provider:
    source:
      name: &lt;source_provider&gt;
      namespace: &lt;namespace&gt;
    destination:
      name: &lt;destination_provider&gt;
      namespace: &lt;namespace&gt;
EOF</pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">type</code>: Allowed values are <code class="literal">pod</code> and <code class="literal">multus</code>.
					</li><li class="listitem">
						<code class="literal">source</code>: You can use either the <code class="literal">id</code> or the <code class="literal">name</code> parameter to specify the source network. For <code class="literal">id</code>, specify the RHV network Universal Unique ID (UUID).
					</li><li class="listitem">
						<code class="literal">&lt;network_attachment_definition&gt;</code>: Specify a network attachment definition for each additional OpenShift Virtualization network.
					</li><li class="listitem">
						<code class="literal">&lt;network_attachment_definition_namespace&gt;</code>: Required only when <code class="literal">type</code> is <code class="literal">multus</code>. Specify the namespace of the OpenShift Virtualization network attachment definition.
					</li></ul></div><div class="orderedlist"><ol class="orderedlist" start="5" type="1"><li class="listitem">
						Optional: To download your input, click <span class="strong strong"><strong>Download</strong></span>.
					</li><li class="listitem"><p class="simpara">
						Click <span class="strong strong"><strong>Create</strong></span>.
					</p><p class="simpara">
						Your map appears in the list of network maps.
					</p></li></ol></div></section><section class="section" id="creating-form-based-storage-maps-ui-ova_rhv"><div class="titlepage"><div><div><h2 class="title">11.2. Creating ownerless storage maps using the form page of the MTV UI</h2></div></div></div><p class="_abstract _abstract">
				You can create ownerless storage maps by using the form page of the MTV UI.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Have a Red Hat Virtualization source provider and a OpenShift Virtualization destination provider. For more information, see <a class="link" href="#adding-source-provider_rhv" title="11.4. Adding a Red Hat Virtualization source provider">Adding a Red Hat Virtualization source provider</a> or <a class="link" href="#adding-source-provider_dest_cnv" title="14.5. Adding an OpenShift Virtualization destination provider">Adding an OpenShift Virtualization destination provider</a>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						In the Red Hat OpenShift web console, click <span class="strong strong"><strong>Migration for Virtualization</strong></span> &gt; <span class="strong strong"><strong>Storage maps</strong></span>.
					</li><li class="listitem">
						Click <span class="strong strong"><strong>Create storage map</strong></span> &gt; <span class="strong strong"><strong>Create with form</strong></span>.
					</li><li class="listitem"><p class="simpara">
						Specify the following:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<span class="strong strong"><strong>Map name</strong></span>: Name of the storage map.
							</li><li class="listitem">
								<span class="strong strong"><strong>Project</strong></span>: Select from the list.
							</li><li class="listitem">
								<span class="strong strong"><strong>Source provider</strong></span>: Select from the list.
							</li><li class="listitem">
								<span class="strong strong"><strong>Target provider</strong></span>: Select from the list.
							</li><li class="listitem">
								<span class="strong strong"><strong>Source storage</strong></span>: Select from the list.
							</li><li class="listitem">
								<span class="strong strong"><strong>Target storage</strong></span>: Select from the list.
							</li></ul></div></li><li class="listitem">
						Optional: Click <span class="strong strong"><strong>Add mapping</strong></span> to create additional storage maps, including mapping multiple storage sources to a single target storage class.
					</li><li class="listitem"><p class="simpara">
						Click <span class="strong strong"><strong>Create</strong></span>.
					</p><p class="simpara">
						Your map appears in the list of storage maps.
					</p></li></ol></div></section><section class="section" id="creating-yaml-based-stoarge-maps-ui_rhv"><div class="titlepage"><div><div><h2 class="title">11.3. Creating ownerless storage maps using YAML or JSON definitions in the MTV UI</h2></div></div></div><p class="_abstract _abstract">
				You can create ownerless storage maps by using YAML or JSON definitions in the Migration Toolkit for Virtualization (MTV) UI.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						In the Red Hat OpenShift web console, click <span class="strong strong"><strong>Migration for Virtualization</strong></span> &gt; <span class="strong strong"><strong>Storage maps</strong></span>.
					</li><li class="listitem"><p class="simpara">
						Click <span class="strong strong"><strong>Create storage map</strong></span> &gt; <span class="strong strong"><strong>Create with YAML</strong></span>.
					</p><p class="simpara">
						The <span class="strong strong"><strong>Create StorageMap</strong></span> page opens.
					</p></li><li class="listitem">
						Enter the YAML or JSON definitions into the editor, or drag and drop a file into the editor.
					</li><li class="listitem">
						If you enter YAML definitions, use the following:
					</li></ol></div><pre class="programlisting language-yaml">$ cat &lt;&lt; EOF | oc apply -f -
apiVersion: forklift.konveyor.io/v1beta1
kind: StorageMap
metadata:
  name: &lt;storage_map&gt;
  namespace: &lt;namespace&gt;
spec:
  map:
    - destination:
        storageClass: &lt;storage_class&gt;
        accessMode: &lt;access_mode&gt;
      source:
        id: &lt;source_storage_domain&gt;
  provider:
    source:
      name: &lt;source_provider&gt;
      namespace: &lt;namespace&gt;
    destination:
      name: &lt;destination_provider&gt;
      namespace: &lt;namespace&gt;
EOF</pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">accessMode</code>: Allowed values are <code class="literal">ReadWriteOnce</code> and <code class="literal">ReadWriteMany</code>.
					</li><li class="listitem">
						<code class="literal">id</code>: Specify the RHV storage domain UUID, for example, <code class="literal">f2737930-b567-451a-9ceb-2887f6207009</code>.
					</li></ul></div><div class="orderedlist"><ol class="orderedlist" start="5" type="1"><li class="listitem">
						Optional: To download your input, click <span class="strong strong"><strong>Download</strong></span>.
					</li><li class="listitem"><p class="simpara">
						Click <span class="strong strong"><strong>Create</strong></span>.
					</p><p class="simpara">
						Your map appears in the list of storage maps.
					</p></li></ol></div></section><section class="section" id="adding-source-provider_rhv"><div class="titlepage"><div><div><h2 class="title">11.4. Adding a Red Hat Virtualization source provider</h2></div></div></div><p class="_abstract _abstract">
				You can add a Red Hat Virtualization source provider by using the Red Hat OpenShift web console.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Manager CA certificate, unless it was replaced by a third-party certificate, in which case, specify the Manager Apache CA certificate
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Access the <span class="strong strong"><strong>Create provider</strong></span> page for Red Hat Virtualization by doing one of the following:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								In the Red Hat OpenShift web console, click <span class="strong strong"><strong>Migration for Virtualization &gt; Providers</strong></span>.
							</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem">
										Click <span class="strong strong"><strong>Create Provider</strong></span>.
									</li><li class="listitem"><p class="simpara">
										Select a <span class="strong strong"><strong>Project</strong></span> from the list. The default project shown depends on the active project of MTV.
									</p><p class="simpara">
										If the active project is <span class="strong strong"><strong>All projects</strong></span>, then the default project is <code class="literal">openshift-mtv</code>. Otherwise, the default project is the same as the active project.
									</p><p class="simpara">
										If you have Administrator privileges, you can see all projects, otherwise, you can see only the projects you are authorized to work with.
									</p></li><li class="listitem">
										Click <span class="strong strong"><strong>Red Hat Virtualization</strong></span>.
									</li></ol></div></li><li class="listitem"><p class="simpara">
								If you have Administrator privileges, in the Red Hat OpenShift web console, click <span class="strong strong"><strong>Migration for Virtualization &gt; Overview</strong></span>.
							</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem"><p class="simpara">
										In the <span class="strong strong"><strong>Welcome</strong></span> pane, click <span class="strong strong"><strong>Red Hat Virtualization</strong></span>.
									</p><p class="simpara">
										If the <span class="strong strong"><strong>Welcome</strong></span> pane is not visible, click <span class="strong strong"><strong>Show the welcome card</strong></span> in the upper-right corner of the page, and click <span class="strong strong"><strong>Red Hat Virtualization</strong></span> when the <span class="strong strong"><strong>Welcome</strong></span> pane opens.
									</p></li><li class="listitem"><p class="simpara">
										Select a <span class="strong strong"><strong>Project</strong></span> from the list. The default project shown depends on the active project of MTV.
									</p><p class="simpara">
										If the active project is <span class="strong strong"><strong>All projects</strong></span>, then the default project is <code class="literal">openshift-mtv</code>. Otherwise, the default project is the same as the active project.
									</p><p class="simpara">
										If you have Administrator privileges, you can see all projects, otherwise, you can see only the projects you are authorized to work with.
									</p></li></ol></div></li></ol></div></li><li class="listitem"><p class="simpara">
						Specify the following fields:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<span class="strong strong"><strong>Provider resource name</strong></span>: Name of the source provider.
							</li><li class="listitem">
								<span class="strong strong"><strong>URL</strong></span>: URL of the API endpoint of the Red Hat Virtualization Manager (RHVM) on which the source VM is mounted. Ensure that the URL includes the path leading to the RHVM API server, usually <code class="literal">/ovirt-engine/api</code>. For example, <code class="literal">https://rhv-host-example.com/ovirt-engine/api</code>.
							</li><li class="listitem">
								<span class="strong strong"><strong>Username</strong></span>: Username.
							</li><li class="listitem">
								<span class="strong strong"><strong>Password</strong></span>: Password.
							</li></ul></div></li><li class="listitem"><p class="simpara">
						Choose one of the following options for validating CA certificates:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<span class="strong strong"><strong>Use a custom CA certificate</strong></span>: Migrate after validating a custom CA certificate.
							</li><li class="listitem">
								<span class="strong strong"><strong>Use the system CA certificate</strong></span>: Migrate after validating the system CA certificate.
							</li><li class="listitem"><p class="simpara">
								<span class="strong strong"><strong>Skip certificate validation</strong></span> : Migrate without validating a CA certificate.
							</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
										To use a custom CA certificate, leave the <span class="strong strong"><strong>Skip certificate validation</strong></span> switch toggled to left, and <span class="emphasis"><em>either</em></span> drag the CA certificate to the text box <span class="emphasis"><em>or</em></span> browse for it and click <span class="strong strong"><strong>Select</strong></span>.
									</li><li class="listitem">
										To use the system CA certificate, leave the <span class="strong strong"><strong>Skip certificate validation</strong></span> switch toggled to the left, and leave the <span class="strong strong"><strong>CA certificate</strong></span> text box empty.
									</li><li class="listitem">
										To skip certificate validation, toggle the <span class="strong strong"><strong>Skip certificate validation</strong></span> switch to the right.
									</li></ol></div></li></ul></div></li><li class="listitem"><p class="simpara">
						Optional: Ask MTV to fetch a custom CA certificate from the provider’s API endpoint URL.
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Click <span class="strong strong"><strong>Fetch certificate from URL</strong></span>. The <span class="strong strong"><strong>Verify certificate</strong></span> window opens.
							</li><li class="listitem"><p class="simpara">
								If the details are correct, select the <span class="strong strong"><strong>I trust the authenticity of this certificate</strong></span> checkbox, and then, click <span class="strong strong"><strong>Confirm</strong></span>. If not, click <span class="strong strong"><strong>Cancel</strong></span>, and then, enter the correct certificate information manually.
							</p><p class="simpara">
								Once confirmed, the CA certificate will be used to validate subsequent communication with the API endpoint.
							</p></li></ol></div></li><li class="listitem"><p class="simpara">
						Click <span class="strong strong"><strong>Create provider</strong></span> to add and save the provider.
					</p><p class="simpara">
						The provider appears in the list of providers.
					</p></li><li class="listitem"><p class="simpara">
						Optional: Add access to the UI of the provider:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								On the <span class="strong strong"><strong>Providers</strong></span> page, click the provider.
							</p><p class="simpara">
								The <span class="strong strong"><strong>Provider details</strong></span> page opens.
							</p></li><li class="listitem">
								Click the <span class="strong strong"><strong>Edit</strong></span> icon under <span class="strong strong"><strong>External UI web link</strong></span>.
							</li><li class="listitem"><p class="simpara">
								Enter the link and click <span class="strong strong"><strong>Save</strong></span>.
							</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									If you do not enter a link, MTV attempts to calculate the correct link.
								</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											If MTV succeeds, the hyperlink of the field points to the calculated link.
										</li><li class="listitem">
											If MTV does not succeed, the field remains empty.
										</li></ul></div></div></div></li></ol></div></li></ol></div></section><section class="section" id="adding-source-provider_dest_rhv"><div class="titlepage"><div><div><h2 class="title">11.5. Adding an OpenShift Virtualization destination provider</h2></div></div></div><p class="_abstract _abstract">
				Use a Red Hat OpenShift Virtualization provider as both source and destination provider. You can migrate VMs from the cluster that Migration Toolkit for Virtualization (MTV) is deployed on to another cluster or from a remote cluster to the cluster that MTV is deployed on.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You must have an OpenShift Virtualization <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.20/html/authentication_and_authorization/using-service-accounts">service account token</a> with <code class="literal">cluster-admin</code> privileges.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Access the <span class="strong strong"><strong>Create OpenShift Virtualization provider</strong></span> interface by doing one of the following:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								In the Red Hat OpenShift web console, click <span class="strong strong"><strong>Migration for Virtualization &gt; Providers</strong></span>.
							</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem">
										Click <span class="strong strong"><strong>Create Provider</strong></span>.
									</li><li class="listitem"><p class="simpara">
										Select a <span class="strong strong"><strong>Project</strong></span> from the list. The default project shown depends on the active project of MTV.
									</p><p class="simpara">
										If the active project is <span class="strong strong"><strong>All projects</strong></span>, then the default project is <code class="literal">openshift-mtv</code>. Otherwise, the default project is the same as the active project.
									</p><p class="simpara">
										If you have Administrator privileges, you can see all projects, otherwise, you can see only the projects you are authorized to work with.
									</p></li><li class="listitem">
										Click <span class="strong strong"><strong>OpenShift Virtualization</strong></span>.
									</li></ol></div></li><li class="listitem"><p class="simpara">
								If you have Administrator privileges, in the Red Hat OpenShift web console, click <span class="strong strong"><strong>Migration for Virtualization &gt; Overview</strong></span>.
							</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem"><p class="simpara">
										In the <span class="strong strong"><strong>Welcome</strong></span> pane, click <span class="strong strong"><strong>OpenShift Virtualization</strong></span>.
									</p><p class="simpara">
										If the <span class="strong strong"><strong>Welcome</strong></span> pane is not visible, click <span class="strong strong"><strong>Show the welcome card</strong></span> in the upper-right corner of the page, and click <span class="strong strong"><strong>OpenShift Virtualization</strong></span> when the <span class="strong strong"><strong>Welcome</strong></span> pane opens.
									</p></li><li class="listitem"><p class="simpara">
										Select a <span class="strong strong"><strong>Project</strong></span> from the list. The default project shown depends on the active project of MTV.
									</p><p class="simpara">
										If the active project is <span class="strong strong"><strong>All projects</strong></span>, then the default project is <code class="literal">openshift-mtv</code>. Otherwise, the default project is the same as the active project.
									</p><p class="simpara">
										If you have Administrator privileges, you can see all projects, otherwise, you can see only the projects you are authorized to work with.
									</p></li></ol></div></li></ol></div></li><li class="listitem"><p class="simpara">
						Specify the following fields:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<span class="strong strong"><strong>Provider resource name</strong></span>: Name of the source provider
							</li><li class="listitem">
								<span class="strong strong"><strong>URL</strong></span>: URL of the endpoint of the API server
							</li><li class="listitem"><p class="simpara">
								<span class="strong strong"><strong>Service account bearer token</strong></span>: Token for a service account with <code class="literal">cluster-admin</code> privileges
							</p><p class="simpara">
								If both <span class="strong strong"><strong>URL</strong></span> and <span class="strong strong"><strong>Service account bearer token</strong></span> are left blank, the local OpenShift cluster is used.
							</p></li></ul></div></li><li class="listitem"><p class="simpara">
						Choose one of the following options for validating CA certificates:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<span class="strong strong"><strong>Use a custom CA certificate</strong></span>: Migrate after validating a custom CA certificate.
							</li><li class="listitem">
								<span class="strong strong"><strong>Use the system CA certificate</strong></span>: Migrate after validating the system CA certificate.
							</li><li class="listitem"><p class="simpara">
								<span class="strong strong"><strong>Skip certificate validation</strong></span> : Migrate without validating a CA certificate.
							</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
										To use a custom CA certificate, leave the <span class="strong strong"><strong>Skip certificate validation</strong></span> switch toggled to left, and <span class="emphasis"><em>either</em></span> drag the CA certificate to the text box <span class="emphasis"><em>or</em></span> browse for it and click <span class="strong strong"><strong>Select</strong></span>.
									</li><li class="listitem">
										To use the system CA certificate, leave the <span class="strong strong"><strong>Skip certificate validation</strong></span> switch toggled to the left, and leave the <span class="strong strong"><strong>CA certificate</strong></span> text box empty.
									</li><li class="listitem">
										To skip certificate validation, toggle the <span class="strong strong"><strong>Skip certificate validation</strong></span> switch to the right.
									</li></ol></div></li></ul></div></li><li class="listitem"><p class="simpara">
						Optional: Ask MTV to fetch a custom CA certificate from the provider’s API endpoint URL.
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Click <span class="strong strong"><strong>Fetch certificate from URL</strong></span>. The <span class="strong strong"><strong>Verify certificate</strong></span> window opens.
							</li><li class="listitem"><p class="simpara">
								If the details are correct, select the <span class="strong strong"><strong>I trust the authenticity of this certificate</strong></span> checkbox, and then, click <span class="strong strong"><strong>Confirm</strong></span>. If not, click <span class="strong strong"><strong>Cancel</strong></span>, and then, enter the correct certificate information manually.
							</p><p class="simpara">
								Once confirmed, the CA certificate will be used to validate subsequent communication with the API endpoint.
							</p></li></ol></div></li><li class="listitem"><p class="simpara">
						Click <span class="strong strong"><strong>Create provider</strong></span> to add and save the provider.
					</p><p class="simpara">
						The provider appears in the list of providers.
					</p></li></ol></div></section><section class="section" id="selecting-migration-network-for-virt-provider_dest_rhv"><div class="titlepage"><div><div><h2 class="title">11.6. Selecting a migration network for an OpenShift Virtualization provider</h2></div></div></div><p class="_abstract _abstract">
				You can select a default migration network for an OpenShift Virtualization provider in the Red Hat OpenShift web console to improve performance. The default migration network is used to transfer disks to the namespaces in which it is configured.
			</p><p>
				After you select a transfer network, associate its network attachment definition (NAD) with the gateway to be used by this network.
			</p><p>
				In MTV version 2.9 and earlier, MTV used the <code class="literal">pod</code> network as the default network.
			</p><p>
				In version 2.10.0 and later, MTV detects if you have selected a user-defined network (UDN) as your default network. Therefore, if you set the UDN to be the migration’s namespace, you do not need to select a new default network when you create your migration plan.
			</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					MTV supports using UDNs for all providers except OpenShift Virtualization.
				</p></div></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					You can override the default migration network of the provider by selecting a different network when you create a migration plan.
				</p></div></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						In the Red Hat OpenShift web console, click <span class="strong strong"><strong>Migration for Virtualization</strong></span> &gt; <span class="strong strong"><strong>Providers</strong></span>.
					</li><li class="listitem"><p class="simpara">
						Click the OpenShift Virtualization provider whose migration network you want to change.
					</p><p class="simpara">
						When the <span class="strong strong"><strong>Providers detail</strong></span> page opens:
					</p></li><li class="listitem">
						Click the <span class="strong strong"><strong>Networks</strong></span> tab.
					</li><li class="listitem">
						Click <span class="strong strong"><strong>Set default transfer network</strong></span>.
					</li><li class="listitem">
						Select a default transfer network from the list and click <span class="strong strong"><strong>Save</strong></span>.
					</li><li class="listitem"><p class="simpara">
						Configure a gateway in the network used for MTV migrations by completing the following steps:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								In the Red Hat OpenShift web console, click <span class="strong strong"><strong>Networking</strong></span> &gt; <span class="strong strong"><strong>NetworkAttachmentDefinitions</strong></span>.
							</li><li class="listitem">
								Select the appropriate default transfer network NAD.
							</li><li class="listitem">
								Click the <span class="strong strong"><strong>YAML</strong></span> tab.
							</li><li class="listitem"><p class="simpara">
								Add <code class="literal">forklift.konveyor.io/route</code> to the metadata:annotations section of the YAML, as in the following example:
							</p><pre class="programlisting language-yaml">apiVersion: k8s.cni.cncf.io/v1
kind: NetworkAttachmentDefinition
metadata:
  name: localnet-network
  namespace: mtv-test
  annotations:
    forklift.konveyor.io/route: &lt;IP address&gt;</pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										The <code class="literal">NetworkAttachmentDefinition</code> parameter is needed to configure an IP address for the interface, either from the Dynamic Host Configuration Protocol (DHCP) or statically. Configuring the IP address enables the interface to reach the configured gateway.
									</li></ul></div></li><li class="listitem">
								Click <span class="strong strong"><strong>Save</strong></span>.
							</li></ol></div></li></ol></div></section><section class="section" id="creating-plan-wizard-rhv_rhv"><div class="titlepage"><div><div><h2 class="title">11.7. Creating a Red Hat Virtualization migration plan by using the MTV wizard</h2></div></div></div><p class="_abstract _abstract">
				You can migrate Red Hat Virtualization virtual machines (VMs) by using the Migration Toolkit for Virtualization plan creation wizard.
			</p><p>
				The wizard is designed to lead you step-by-step in creating a migration plan.
			</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
					Do not include virtual machines with guest-initiated storage connections, such as Internet Small Computer Systems Interface (iSCSI) connections or Network File System (NFS) mounts. These require either additional planning before migration or reconfiguration after migration.
				</p><p>
					This prevents concurrent disk access to the storage the guest points to.
				</p></div></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					A plan cannot contain more than 500 VMs or 500 disks.
				</p></div></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					When you click <span class="strong strong"><strong>Create plan</strong></span> on the <span class="strong strong"><strong>Review and create</strong></span> page of the wizard, Migration Toolkit for Virtualization (MTV) validates your plan. If everything is OK, the <span class="strong strong"><strong>Plan details</strong></span> page for your plan opens. This page contains settings that do not appear in the wizard, but are important. Be sure to read and follow the instructions for this page carefully, even though it is outside the plan creation wizard. The page can be opened later, any time before you run the plan, so you can come back to it if needed.
				</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Have an Red Hat Virtualization source provider and a OpenShift Virtualization destination provider. For more information, see <a class="link" href="#adding-source-provider_rhv" title="11.4. Adding a Red Hat Virtualization source provider">Adding a Red Hat Virtualization source provider</a> or <a class="link" href="#adding-source-provider_dest_rhv" title="11.5. Adding an OpenShift Virtualization destination provider">Adding an OpenShift Virtualization destination provider</a>.
					</li><li class="listitem">
						If you plan to create a <span class="strong strong"><strong>Network map</strong></span> or a <span class="strong strong"><strong>Storage map</strong></span> that will be used by more than one migration plan, create it in the <span class="strong strong"><strong>Network maps</strong></span> or <span class="strong strong"><strong>Storage maps</strong></span> page of the UI before you create a migration plan that uses that map.
					</li><li class="listitem">
						If you are using a user-defined network (UDN), note the name of the namespace as defined in OpenShift Virtualization.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						In the Red Hat OpenShift web console, click <span class="strong strong"><strong>Migration for Virtualization</strong></span> &gt; <span class="strong strong"><strong>Migration plans</strong></span>.
					</li><li class="listitem"><p class="simpara">
						Click <span class="strong strong"><strong>Create plan</strong></span>.
					</p><p class="simpara">
						The <span class="strong strong"><strong>Create migration plan</strong></span> wizard opens.
					</p></li><li class="listitem"><p class="simpara">
						On the <span class="strong strong"><strong>General</strong></span> page, specify the following fields:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<span class="strong strong"><strong>Plan name</strong></span>: Enter a name.
							</li><li class="listitem">
								<span class="strong strong"><strong>Plan project</strong></span>: Select from the list.
							</li><li class="listitem">
								<span class="strong strong"><strong>Source provider</strong></span>: Select from the list.
							</li><li class="listitem">
								<span class="strong strong"><strong>Target provider</strong></span>: Select from the list.
							</li><li class="listitem"><p class="simpara">
								<span class="strong strong"><strong>Target project</strong></span>: Click the list and do one of the following:
							</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
										Select an existing project from the list.
									</li><li class="listitem"><p class="simpara">
										Create a new project by clicking <span class="strong strong"><strong>Create project</strong></span> and doing the following:
									</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem">
												Enter the <span class="strong strong"><strong>Name</strong></span> of the project. A project name must consist of lowercase alphanumeric characters or <code class="literal">-</code>. A project name must start and end with alphanumeric characters. For example, <code class="literal">my-name</code> or <code class="literal">123-abc</code>.
											</li><li class="listitem">
												Optional: Enter a <span class="strong strong"><strong>Display name</strong></span> for the project.
											</li><li class="listitem">
												Optional: Enter a <span class="strong strong"><strong>Description</strong></span> of the project.
											</li><li class="listitem">
												Click <span class="strong strong"><strong>Create Project</strong></span>.
											</li></ol></div></li></ol></div></li></ul></div></li><li class="listitem">
						Click <span class="strong strong"><strong>Next</strong></span>.
					</li><li class="listitem">
						On the <span class="strong strong"><strong>Virtual machines</strong></span> page, select the virtual machines you want to migrate and click <span class="strong strong"><strong>Next</strong></span>.
					</li><li class="listitem">
						If you are using a UDN, verify that the IP address of the provider is outside the subnet of the UDN. If the IP address is within the subnet of the UDN, the migration fails.
					</li><li class="listitem"><p class="simpara">
						On the <span class="strong strong"><strong>Network map</strong></span> page, choose one of the following options:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								<span class="strong strong"><strong>Use an existing network map</strong></span>: Select an existing network map from the list.
							</p><p class="simpara">
								These are network maps available for all plans, and therefore, they are <span class="emphasis"><em>ownerless</em></span> in terms of the system. If you select this option and choose a map, a copy of that map is attached to your plan, and your plan is the <span class="emphasis"><em>owner</em></span> of that copy. Any changes you make to your copy do not affect the original plan or any copies that other users have.
							</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									If you choose an existing map, be sure it has the same source provider and the same target provider as the ones you want to use in your plan.
								</p></div></div></li><li class="listitem"><p class="simpara">
								<span class="strong strong"><strong>Use a new network map</strong></span>: Allows you to create a new network map by supplying the following data. This map is attached to this plan, which is then considered to be its owner. Maps that you create using this option are not available in the <span class="strong strong"><strong>Use an existing network map</strong></span> option because each is created with an owner.
							</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									You can create an ownerless network map, which you and others can use for additional migration plans, in the <span class="strong strong"><strong>Network maps</strong></span> section of the UI.
								</p></div></div><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										<span class="strong strong"><strong>Source network</strong></span>: Select from the list.
									</li><li class="listitem"><p class="simpara">
										<span class="strong strong"><strong>Target network</strong></span>: Select from the list.
									</p><p class="simpara">
										If needed, click <span class="strong strong"><strong>Add mapping</strong></span> to add another mapping.
									</p></li><li class="listitem">
										<span class="strong strong"><strong>Network map name</strong></span>: Enter a name or let MTV automatically generate a name for the network map.
									</li></ul></div></li></ul></div></li><li class="listitem">
						Click <span class="strong strong"><strong>Next</strong></span>.
					</li><li class="listitem"><p class="simpara">
						On the <span class="strong strong"><strong>Storage map</strong></span> page, choose one of the following options:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								<span class="strong strong"><strong>Use an existing storage map</strong></span>: Select an existing storage map from the list.
							</p><p class="simpara">
								These are storage maps available for all plans, and therefore, they are <span class="emphasis"><em>ownerless</em></span> in terms of the system. If you select this option and choose a map, a copy of that map is attached to your plan, and your plan is the <span class="emphasis"><em>owner</em></span> of that copy. Any changes you make to your copy do not affect the original plan or any copies that other users have.
							</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									If you choose an existing map, be sure it has the same source provider and the same target provider as the ones you want to use in your plan.
								</p></div></div></li><li class="listitem"><p class="simpara">
								<span class="strong strong"><strong>Use new storage map</strong></span>: Allows you to create one or two new storage maps by supplying the following data. These maps are attached to this plan, which is then their owner. Maps that you create using this option are not available in the <span class="strong strong"><strong>Use an existing storage map</strong></span> option because each is created with an owner.
							</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									You can create an ownerless storage map, which you and others can use for additional migration plans, in the <span class="strong strong"><strong>Storage maps</strong></span> section of the UI.
								</p></div></div><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										<span class="strong strong"><strong>Source storage</strong></span>: Select from the list.
									</li><li class="listitem"><p class="simpara">
										<span class="strong strong"><strong>Target storage</strong></span>: Select from the list.
									</p><p class="simpara">
										If needed, click <span class="strong strong"><strong>Add mapping</strong></span> to add another mapping.
									</p></li><li class="listitem">
										<span class="strong strong"><strong>Storage map name</strong></span>: Enter a name or let MTV automatically generate a name for the storage map.
									</li></ul></div></li></ul></div></li><li class="listitem">
						Click <span class="strong strong"><strong>Next</strong></span>.
					</li><li class="listitem"><p class="simpara">
						On the <span class="strong strong"><strong>Migration type</strong></span> page, choose one of the following:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<span class="strong strong"><strong>Cold migration</strong></span> (default)
							</li><li class="listitem">
								<span class="strong strong"><strong>Warm migration</strong></span>
							</li></ul></div></li><li class="listitem">
						Click <span class="strong strong"><strong>Next</strong></span>.
					</li><li class="listitem"><p class="simpara">
						On the <span class="strong strong"><strong>Other settings (optional)</strong></span> page, you have the option to change the <span class="strong strong"><strong>Transfer network</strong></span> of your migration plan.
					</p><p class="simpara">
						The transfer network is the network used to transfer the VMs to OpenShift Virtualization. This is the default transfer network of the provider.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Verify that the transfer network is in the selected target project.
							</li><li class="listitem">
								To choose a different transfer network, select a different transfer network from the list.
							</li><li class="listitem"><p class="simpara">
								Optional: To configure another OpenShift network in the OpenShift web console, click <span class="strong strong"><strong>Networking &gt; NetworkAttachmentDefinitions</strong></span>.
							</p><p class="simpara">
								To learn more about the different types of networks OpenShift supports, see <a class="link" href="https://docs.redhat.com/en/documentation/openshift_container_platform/4.20/html-single/networking/index#additional-networks-provided_understanding-multiple-networks">Additional Networks in OpenShift Container Platform</a>.
							</p></li><li class="listitem">
								To adjust the maximum transmission unit (MTU) of the OpenShift transfer network, you must also change the MTU of the VMware migration network. For more information, see <a class="link" href="#selecting-migration-network-for-vmware-source-provider_vmware" title="10.5. Selecting a migration network for a VMware source provider">Selecting a migration network for a VMware source provider</a>.
							</li></ul></div></li><li class="listitem">
						Click <span class="strong strong"><strong>Next</strong></span>.
					</li><li class="listitem">
						On the <span class="strong strong"><strong>Hooks (optional)</strong></span> page, you can add a pre-migration hook, a post-migration hook, or both types of migration hooks. All are optional.
					</li><li class="listitem">
						To add a hook, select the appropriate <span class="strong strong"><strong>Enable hook</strong></span> checkbox.
					</li><li class="listitem">
						Enter the <span class="strong strong"><strong>Hook runner image</strong></span>.
					</li><li class="listitem"><p class="simpara">
						Enter the <span class="strong strong"><strong>Ansible playbook</strong></span> of the hook in the window.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							You cannot include more than one pre-migration hook or more than one post-migration hook in a migration plan.
						</p></div></div></li><li class="listitem">
						Click <span class="strong strong"><strong>Next</strong></span>.
					</li><li class="listitem">
						On the <span class="strong strong"><strong>Review and create</strong></span> page, review the information displayed.
					</li><li class="listitem"><p class="simpara">
						Edit any item by doing the following:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Click its <span class="strong strong"><strong>Edit step</strong></span> link.
							</p><p class="simpara">
								The wizard opens to the page where you defined the item.
							</p></li><li class="listitem">
								Edit the item.
							</li><li class="listitem">
								Either click <span class="strong strong"><strong>Next</strong></span> to advance to the next page of the wizard, or click <span class="strong strong"><strong>Skip to review</strong></span> to return directly to the <span class="strong strong"><strong>Review and create</strong></span> page.
							</li></ol></div></li><li class="listitem"><p class="simpara">
						When you finish reviewing the details of the plan, click <span class="strong strong"><strong>Create plan</strong></span>. MTV validates your plan.
					</p><p class="simpara">
						When your plan is validated, the <span class="strong strong"><strong>Plan details</strong></span> page for your plan opens in the <span class="strong strong"><strong>Details</strong></span> tab.
					</p><p class="simpara">
						The <span class="strong strong"><strong>Plan settings</strong></span> section of the page includes settings that you specified in the <span class="strong strong"><strong>Other settings (optional)</strong></span> page and some additional optional settings. The steps below refer to the additional optional steps, but all of the settings can be edited by clicking the Options menu 
						<span class="inlinemediaobject"><img src="images/modules/images/kebab.png" height="20" alt="kebab"/></span>
						, making the change, and then clicking <span class="strong strong"><strong>Save</strong></span>.
					</p></li><li class="listitem"><p class="simpara">
						Check the following item on the <span class="strong strong"><strong>Plan settings</strong></span> section of the page:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								<span class="strong strong"><strong>Preserve CPU mode</strong></span>: Generally, the CPU model (type) for Red Hat Virtualization VMs is set at the cluster level. However, the CPU model can be set at the VM level, which is called a custom CPU model.
							</p><p class="simpara">
								By default, MTV sets the CPU model on the destination cluster as follows: MTV preserves custom CPU settings for VMs that have them. For VMs without custom CPU settings, MTV does not set the CPU model. Instead, the CPU model is later set by OpenShift Virtualization.
							</p><p class="simpara">
								To preserve the cluster-level CPU model of your Red Hat Virtualization VMs, do the following:
							</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
										Click the Options menu 
										<span class="inlinemediaobject"><img src="images/modules/images/kebab.png" height="20" alt="kebab"/></span>
										.
									</li><li class="listitem">
										Toggle the <span class="strong strong"><strong>Whether to preserve the CPU model</strong></span> switch.
									</li><li class="listitem"><p class="simpara">
										Click Save.
									</p><p class="simpara">
										MTV validates any changes you made on this page.
									</p></li></ol></div></li></ul></div></li><li class="listitem"><p class="simpara">
						In addition to listing details based on your entries in the wizard, the <span class="strong strong"><strong>Plan details</strong></span> tab includes the following two sections after the details of the plan:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<span class="strong strong"><strong>Migration history</strong></span>: Details about successful and unsuccessful attempts to run the plan
							</li><li class="listitem">
								<span class="strong strong"><strong>Conditions</strong></span>: Any changes that need to be made to the plan so that it can run successfully
							</li></ul></div></li><li class="listitem"><p class="simpara">
						When you have fixed all conditions listed, you can run your plan from the <span class="strong strong"><strong>Plans</strong></span> page.
					</p><p class="simpara">
						The <span class="strong strong"><strong>Plan details</strong></span> page also includes five additional tabs, which are described in the table that follows:
					</p><div class="table" id="idm46552697258640"><p class="title"><strong>Table 11.1. Tabs of the Plan details page</strong></p><div class="table-contents"><table class="gt-4-cols lt-7-rows"><colgroup><col style="width: 20%; " class="col_1"/><col style="width: 20%; " class="col_2"/><col style="width: 20%; " class="col_3"/><col style="width: 20%; " class="col_4"/><col style="width: 20%; " class="col_5"/></colgroup><thead><tr><th align="left" valign="top" id="idm46552697251008" scope="col">YAML</th><th align="left" valign="top" id="idm46552697249920" scope="col">Virtual Machines</th><th align="left" valign="top" id="idm46552697248832" scope="col">Resources</th><th align="left" valign="top" id="idm46552697247744" scope="col">Mappings</th><th align="left" valign="top" id="idm46552697246656" scope="col">Hooks</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm46552697251008">
									<p>
										Editable YAML <code class="literal">Plan</code> manifest based on your plan’s details including source provider, network and storage maps, VMs, and any issues with your VMs
									</p>
									</td><td align="left" valign="top" headers="idm46552697249920">
									<p>
										The VMs the plan migrates
									</p>
									</td><td align="left" valign="top" headers="idm46552697248832">
									<p>
										Calculated resources: VMs, CPUs, and total memory for both total VMs and running VMs
									</p>
									</td><td align="left" valign="top" headers="idm46552697247744">
									<p>
										Editable specification of the network and storage maps used by your plan
									</p>
									</td><td align="left" valign="top" headers="idm46552697246656">
									<p>
										Updatable specification of the hooks used by your plan, if any
									</p>
									</td></tr></tbody></table></div></div></li></ol></div></section></section><section class="chapter" id="assembly_planning-migration-osp_mtv"><div class="titlepage"><div><div><h1 class="title">Chapter 12. Planning migration of virtual machines from OpenStack</h1></div></div></div><p class="_abstract _abstract">
			Create an OpenStack migration plan by setting up network maps, configuring source and destination providers with migration networks, and defining the migration plan in the Migration Toolkit for Virtualization (MTV) UI.
		</p><section class="section" id="creating-yaml-based-network-maps-ui_ostack"><div class="titlepage"><div><div><h2 class="title">12.1. Creating ownerless network maps in the MTV UI</h2></div></div></div><p class="_abstract _abstract">
				You can create ownerless network maps by using the Migration Toolkit for Virtualization (MTV) UI to map source networks to OpenShift Virtualization networks.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						In the Red Hat OpenShift web console, click <span class="strong strong"><strong>Migration for Virtualization</strong></span> &gt; <span class="strong strong"><strong>Network maps</strong></span>.
					</li><li class="listitem">
						Click <span class="strong strong"><strong>Create network map</strong></span> to open the <span class="strong strong"><strong>Create network map</strong></span> page.
					</li><li class="listitem">
						Enter the YAML or JSON definitions into the editor, or drag and drop a file into the editor.
					</li><li class="listitem">
						If you enter YAML definitions, use the following:
					</li></ol></div><pre class="programlisting language-yaml">$  cat &lt;&lt; EOF | oc apply -f -
apiVersion: forklift.konveyor.io/v1beta1
kind: NetworkMap
metadata:
  name: &lt;network_map&gt;
  namespace: &lt;namespace&gt;
spec:
  map:
    - destination:
        name: &lt;network_name&gt;
        type: pod
      source:
        id: &lt;source_network_id&gt;
        name: &lt;source_network_name&gt;
    - destination:
        name: &lt;network_attachment_definition&gt;
        namespace: &lt;network_attachment_definition_namespace&gt;
        type: multus
      source:
        id: &lt;source_network_id&gt;
        name: &lt;source_network_name&gt;
  provider:
    source:
      name: &lt;source_provider&gt;
      namespace: &lt;namespace&gt;
    destination:
      name: &lt;destination_provider&gt;
      namespace: &lt;namespace&gt;
EOF</pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">type</code>: Allowed values are <code class="literal">pod</code> and <code class="literal">multus</code>.
					</li><li class="listitem">
						<code class="literal">source</code>: You can use either the <code class="literal">id</code> or the <code class="literal">name</code> parameter to specify the source network. For <code class="literal">id</code>, specify the OpenStack network UUID.
					</li><li class="listitem">
						<code class="literal">&lt;network_attachment_definition&gt;</code>: Specify a network attachment definition for each additional OpenShift Virtualization network.
					</li><li class="listitem">
						<code class="literal">&lt;network_attachment_definition_namespace&gt;</code> is required only when <code class="literal">type</code> is <code class="literal">multus</code>. Specify the namespace of the OpenShift Virtualization network attachment definition.
					</li></ul></div><div class="orderedlist"><ol class="orderedlist" start="5" type="1"><li class="listitem">
						Optional: To download your input, click <span class="strong strong"><strong>Download</strong></span>.
					</li><li class="listitem"><p class="simpara">
						Click <span class="strong strong"><strong>Create</strong></span>.
					</p><p class="simpara">
						Your map appears in the list of network maps.
					</p></li></ol></div></section><section class="section" id="creating-form-based-storage-maps-ui-ostack_ostack"><div class="titlepage"><div><div><h2 class="title">12.2. Creating ownerless storage maps using the form page of the MTV UI</h2></div></div></div><p class="_abstract _abstract">
				You can create ownerless storage maps by using the form page of the MTV UI.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Have an OpenStack source provider and a OpenShift Virtualization destination provider. For more information, see <a class="link" href="#adding-source-provider_cnv" title="14.4. Adding a Red Hat OpenShift Virtualization source provider">Adding an Red Hat OpenShift source provider</a> or <a class="link" href="#adding-source-provider_dest_cnv" title="14.5. Adding an OpenShift Virtualization destination provider">Adding an OpenShift Virtualization destination provider</a>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						In the Red Hat OpenShift web console, click <span class="strong strong"><strong>Migration for Virtualization</strong></span> &gt; <span class="strong strong"><strong>Storage maps</strong></span>.
					</li><li class="listitem">
						Click <span class="strong strong"><strong>Create storage map</strong></span> &gt; <span class="strong strong"><strong>Create with form</strong></span>.
					</li><li class="listitem"><p class="simpara">
						Specify the following:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<span class="strong strong"><strong>Map name</strong></span>: Name of the storage map.
							</li><li class="listitem">
								<span class="strong strong"><strong>Project</strong></span>: Select from the list.
							</li><li class="listitem">
								<span class="strong strong"><strong>Source provider</strong></span>: Select from the list.
							</li><li class="listitem">
								<span class="strong strong"><strong>Target provider</strong></span>: Select from the list.
							</li><li class="listitem">
								<span class="strong strong"><strong>Source storage</strong></span>: Select from the list.
							</li><li class="listitem">
								<span class="strong strong"><strong>Target storage</strong></span>: Select from the list.
							</li></ul></div></li><li class="listitem">
						Optional: Click <span class="strong strong"><strong>Add mapping</strong></span> to create additional storage maps, including mapping multiple storage sources to a single target storage class.
					</li><li class="listitem"><p class="simpara">
						Click <span class="strong strong"><strong>Create</strong></span>.
					</p><p class="simpara">
						Your map appears in the list of storage maps.
					</p></li></ol></div></section><section class="section" id="creating-yaml-based-stoarge-maps-ui_ostack"><div class="titlepage"><div><div><h2 class="title">12.3. Creating ownerless storage maps using YAML or JSON definitions in the MTV UI</h2></div></div></div><p class="_abstract _abstract">
				You can create ownerless storage maps by using YAML or JSON definitions in the Migration Toolkit for Virtualization (MTV) UI.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						In the Red Hat OpenShift web console, click <span class="strong strong"><strong>Migration for Virtualization</strong></span> &gt; <span class="strong strong"><strong>Storage maps</strong></span>.
					</li><li class="listitem"><p class="simpara">
						Click <span class="strong strong"><strong>Create storage map</strong></span> &gt; <span class="strong strong"><strong>Create with YAML</strong></span>.
					</p><p class="simpara">
						The <span class="strong strong"><strong>Create StorageMap</strong></span> page opens.
					</p></li><li class="listitem">
						Enter the YAML or JSON definitions into the editor, or drag and drop a file into the editor.
					</li><li class="listitem">
						If you enter YAML definitions, use the following:
					</li></ol></div><pre class="programlisting language-yaml">$ cat &lt;&lt; EOF | oc apply -f -
apiVersion: forklift.konveyor.io/v1beta1
kind: StorageMap
metadata:
  name: &lt;storage_map&gt;
  namespace: &lt;namespace&gt;
spec:
  map:
    - destination:
        storageClass: &lt;storage_class&gt;
        accessMode: &lt;access_mode&gt;
      source:
        id: &lt;source_volume_type&gt;
  provider:
    source:
      name: &lt;source_provider&gt;
      namespace: &lt;namespace&gt;
    destination:
      name: &lt;destination_provider&gt;
      namespace: &lt;namespace&gt;
EOF</pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">accessMode</code>: Allowed values are <code class="literal">ReadWriteOnce</code> and <code class="literal">ReadWriteMany</code>.
					</li><li class="listitem">
						<code class="literal">id</code>: Specify the OpenStack <code class="literal">volume_type</code> UUID, for example, <code class="literal">f2737930-b567-451a-9ceb-2887f6207009</code>.
					</li></ul></div><div class="orderedlist"><ol class="orderedlist" start="5" type="1"><li class="listitem">
						Optional: To download your input, click <span class="strong strong"><strong>Download</strong></span>.
					</li><li class="listitem"><p class="simpara">
						Click <span class="strong strong"><strong>Create</strong></span>.
					</p><p class="simpara">
						Your map appears in the list of storage maps.
					</p></li></ol></div></section><section class="section" id="adding-source-provider_ostack"><div class="titlepage"><div><div><h2 class="title">12.4. Adding an OpenStack source provider</h2></div></div></div><p class="_abstract _abstract">
				You can add an OpenStack source provider by using the Red Hat OpenShift web console.
			</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					When you migrate an image-based VM from an OpenStack provider, a snapshot is created for the image that is attached to the source VM, and the data from the snapshot is copied over to the target VM. This means that the target VM will have the same state as that of the source VM at the time the snapshot was created.
				</p></div></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Access the <span class="strong strong"><strong>Create provider</strong></span> page for OpenStack by doing one of the following:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								In the Red Hat OpenShift web console, click <span class="strong strong"><strong>Migration for Virtualization &gt; Providers</strong></span>.
							</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem">
										Click <span class="strong strong"><strong>Create Provider</strong></span>.
									</li><li class="listitem"><p class="simpara">
										Select a <span class="strong strong"><strong>Project</strong></span> from the list. The default project shown depends on the active project of MTV.
									</p><p class="simpara">
										If the active project is <span class="strong strong"><strong>All projects</strong></span>, then the default project is <code class="literal">openshift-mtv</code>. Otherwise, the default project is the same as the active project.
									</p><p class="simpara">
										If you have Administrator privileges, you can see all projects, otherwise, you can see only the projects you are authorized to work with.
									</p></li><li class="listitem">
										Click <span class="strong strong"><strong>OpenStack</strong></span>.
									</li></ol></div></li><li class="listitem"><p class="simpara">
								If you have Administrator privileges, in the Red Hat OpenShift web console, click <span class="strong strong"><strong>Migration for Virtualization &gt; Overview</strong></span>.
							</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem"><p class="simpara">
										In the <span class="strong strong"><strong>Welcome</strong></span> pane, click <span class="strong strong"><strong>OpenStack</strong></span>.
									</p><p class="simpara">
										If the <span class="strong strong"><strong>Welcome</strong></span> pane is not visible, click <span class="strong strong"><strong>Show the welcome card</strong></span> in the upper-right corner of the page, and click <span class="strong strong"><strong>OpenStack</strong></span> when the <span class="strong strong"><strong>Welcome</strong></span> pane opens.
									</p></li><li class="listitem"><p class="simpara">
										Select a <span class="strong strong"><strong>Project</strong></span> from the list. The default project shown depends on the active project of MTV.
									</p><p class="simpara">
										If the active project is <span class="strong strong"><strong>All projects</strong></span>, then the default project is <code class="literal">openshift-mtv</code>. Otherwise, the default project is the same as the active project.
									</p><p class="simpara">
										If you have Administrator privileges, you can see all projects, otherwise, you can see only the projects you are authorized to work with.
									</p></li></ol></div></li></ol></div></li><li class="listitem"><p class="simpara">
						Specify the following fields:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<span class="strong strong"><strong>Provider resource name</strong></span>: Name of the source provider.
							</li><li class="listitem">
								<span class="strong strong"><strong>URL</strong></span>: URL of the OpenStack Identity (Keystone) endpoint. For example, <code class="literal">http://controller:5000/v3</code>.
							</li><li class="listitem"><p class="simpara">
								<span class="strong strong"><strong>Authentication type</strong></span>: Choose one of the following methods of authentication and supply the information related to your choice. For example, if you choose <span class="strong strong"><strong>Application credential ID</strong></span> as the authentication type, the <span class="strong strong"><strong>Application credential ID</strong></span> and the <span class="strong strong"><strong>Application credential secret</strong></span> fields become active, and you need to supply the ID and the secret.
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
										<span class="strong strong"><strong>Application credential ID</strong></span>
									</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem">
												<span class="strong strong"><strong>Application credential ID</strong></span>: OpenStack application credential ID
											</li><li class="listitem">
												<span class="strong strong"><strong>Application credential secret</strong></span>: OpenStack application credential <code class="literal">Secret</code>
											</li></ul></div></li><li class="listitem"><p class="simpara">
										<span class="strong strong"><strong>Application credential name</strong></span>
									</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem">
												<span class="strong strong"><strong>Application credential name</strong></span>: OpenStack application credential name
											</li><li class="listitem">
												<span class="strong strong"><strong>Application credential secret</strong></span>: OpenStack application credential <code class="literal">Secret</code>
											</li><li class="listitem">
												<span class="strong strong"><strong>Username</strong></span>: OpenStack username
											</li><li class="listitem">
												<span class="strong strong"><strong>Domain</strong></span>: OpenStack domain name
											</li></ul></div></li><li class="listitem"><p class="simpara">
										<span class="strong strong"><strong>Token with user ID</strong></span>
									</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem">
												<span class="strong strong"><strong>Token</strong></span>: OpenStack token
											</li><li class="listitem">
												<span class="strong strong"><strong>User ID</strong></span>: OpenStack user ID
											</li><li class="listitem">
												<span class="strong strong"><strong>Project ID</strong></span>: OpenStack project ID
											</li></ul></div></li><li class="listitem"><p class="simpara">
										<span class="strong strong"><strong>Token with user Name</strong></span>
									</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem">
												<span class="strong strong"><strong>Token</strong></span>: OpenStack token
											</li><li class="listitem">
												<span class="strong strong"><strong>Username</strong></span>: OpenStack username
											</li><li class="listitem">
												<span class="strong strong"><strong>Project</strong></span>: OpenStack project
											</li><li class="listitem">
												<span class="strong strong"><strong>Domain name</strong></span>: OpenStack domain name
											</li></ul></div></li><li class="listitem"><p class="simpara">
										<span class="strong strong"><strong>Password</strong></span>
									</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem">
												<span class="strong strong"><strong>Username</strong></span>: OpenStack username
											</li><li class="listitem">
												<span class="strong strong"><strong>Password</strong></span>: OpenStack password
											</li><li class="listitem">
												<span class="strong strong"><strong>Project</strong></span>: OpenStack project
											</li><li class="listitem">
												<span class="strong strong"><strong>Domain</strong></span>: OpenStack domain name
											</li></ul></div></li></ul></div></li></ul></div></li><li class="listitem"><p class="simpara">
						Choose one of the following options for validating CA certificates:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<span class="strong strong"><strong>Use a custom CA certificate</strong></span>: Migrate after validating a custom CA certificate.
							</li><li class="listitem">
								<span class="strong strong"><strong>Use the system CA certificate</strong></span>: Migrate after validating the system CA certificate.
							</li><li class="listitem"><p class="simpara">
								<span class="strong strong"><strong>Skip certificate validation</strong></span> : Migrate without validating a CA certificate.
							</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
										To use a custom CA certificate, leave the <span class="strong strong"><strong>Skip certificate validation</strong></span> switch toggled to left, and <span class="emphasis"><em>either</em></span> drag the CA certificate to the text box <span class="emphasis"><em>or</em></span> browse for it and click <span class="strong strong"><strong>Select</strong></span>.
									</li><li class="listitem">
										To use the system CA certificate, leave the <span class="strong strong"><strong>Skip certificate validation</strong></span> switch toggled to the left, and leave the <span class="strong strong"><strong>CA certificate</strong></span> text box empty.
									</li><li class="listitem">
										To skip certificate validation, toggle the <span class="strong strong"><strong>Skip certificate validation</strong></span> switch to the right.
									</li></ol></div></li></ul></div></li><li class="listitem"><p class="simpara">
						Optional: Ask MTV to fetch a custom CA certificate from the provider’s API endpoint URL.
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Click <span class="strong strong"><strong>Fetch certificate from URL</strong></span>. The <span class="strong strong"><strong>Verify certificate</strong></span> window opens.
							</li><li class="listitem"><p class="simpara">
								If the details are correct, select the <span class="strong strong"><strong>I trust the authenticity of this certificate</strong></span> checkbox, and then, click <span class="strong strong"><strong>Confirm</strong></span>. If not, click <span class="strong strong"><strong>Cancel</strong></span>, and then, enter the correct certificate information manually.
							</p><p class="simpara">
								Once confirmed, the CA certificate will be used to validate subsequent communication with the API endpoint.
							</p></li></ol></div></li><li class="listitem"><p class="simpara">
						Click <span class="strong strong"><strong>Create provider</strong></span> to add and save the provider.
					</p><p class="simpara">
						The provider appears in the list of providers.
					</p></li><li class="listitem"><p class="simpara">
						Optional: Add access to the UI of the provider:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								On the <span class="strong strong"><strong>Providers</strong></span> page, click the provider.
							</p><p class="simpara">
								The <span class="strong strong"><strong>Provider details</strong></span> page opens.
							</p></li><li class="listitem">
								Click the <span class="strong strong"><strong>Edit</strong></span> icon under <span class="strong strong"><strong>External UI web link</strong></span>.
							</li><li class="listitem"><p class="simpara">
								Enter the link and click <span class="strong strong"><strong>Save</strong></span>.
							</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									If you do not enter a link, MTV attempts to calculate the correct link.
								</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											If MTV succeeds, the hyperlink of the field points to the calculated link.
										</li><li class="listitem">
											If MTV does not succeed, the field remains empty.
										</li></ul></div></div></div></li></ol></div></li></ol></div></section><section class="section" id="adding-source-provider_dest_ostack"><div class="titlepage"><div><div><h2 class="title">12.5. Adding an OpenShift Virtualization destination provider</h2></div></div></div><p class="_abstract _abstract">
				Use a Red Hat OpenShift Virtualization provider as both source and destination provider. You can migrate VMs from the cluster that Migration Toolkit for Virtualization (MTV) is deployed on to another cluster or from a remote cluster to the cluster that MTV is deployed on.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You must have an OpenShift Virtualization <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.20/html/authentication_and_authorization/using-service-accounts">service account token</a> with <code class="literal">cluster-admin</code> privileges.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Access the <span class="strong strong"><strong>Create OpenShift Virtualization provider</strong></span> interface by doing one of the following:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								In the Red Hat OpenShift web console, click <span class="strong strong"><strong>Migration for Virtualization &gt; Providers</strong></span>.
							</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem">
										Click <span class="strong strong"><strong>Create Provider</strong></span>.
									</li><li class="listitem"><p class="simpara">
										Select a <span class="strong strong"><strong>Project</strong></span> from the list. The default project shown depends on the active project of MTV.
									</p><p class="simpara">
										If the active project is <span class="strong strong"><strong>All projects</strong></span>, then the default project is <code class="literal">openshift-mtv</code>. Otherwise, the default project is the same as the active project.
									</p><p class="simpara">
										If you have Administrator privileges, you can see all projects, otherwise, you can see only the projects you are authorized to work with.
									</p></li><li class="listitem">
										Click <span class="strong strong"><strong>OpenShift Virtualization</strong></span>.
									</li></ol></div></li><li class="listitem"><p class="simpara">
								If you have Administrator privileges, in the Red Hat OpenShift web console, click <span class="strong strong"><strong>Migration for Virtualization &gt; Overview</strong></span>.
							</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem"><p class="simpara">
										In the <span class="strong strong"><strong>Welcome</strong></span> pane, click <span class="strong strong"><strong>OpenShift Virtualization</strong></span>.
									</p><p class="simpara">
										If the <span class="strong strong"><strong>Welcome</strong></span> pane is not visible, click <span class="strong strong"><strong>Show the welcome card</strong></span> in the upper-right corner of the page, and click <span class="strong strong"><strong>OpenShift Virtualization</strong></span> when the <span class="strong strong"><strong>Welcome</strong></span> pane opens.
									</p></li><li class="listitem"><p class="simpara">
										Select a <span class="strong strong"><strong>Project</strong></span> from the list. The default project shown depends on the active project of MTV.
									</p><p class="simpara">
										If the active project is <span class="strong strong"><strong>All projects</strong></span>, then the default project is <code class="literal">openshift-mtv</code>. Otherwise, the default project is the same as the active project.
									</p><p class="simpara">
										If you have Administrator privileges, you can see all projects, otherwise, you can see only the projects you are authorized to work with.
									</p></li></ol></div></li></ol></div></li><li class="listitem"><p class="simpara">
						Specify the following fields:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<span class="strong strong"><strong>Provider resource name</strong></span>: Name of the source provider
							</li><li class="listitem">
								<span class="strong strong"><strong>URL</strong></span>: URL of the endpoint of the API server
							</li><li class="listitem"><p class="simpara">
								<span class="strong strong"><strong>Service account bearer token</strong></span>: Token for a service account with <code class="literal">cluster-admin</code> privileges
							</p><p class="simpara">
								If both <span class="strong strong"><strong>URL</strong></span> and <span class="strong strong"><strong>Service account bearer token</strong></span> are left blank, the local OpenShift cluster is used.
							</p></li></ul></div></li><li class="listitem"><p class="simpara">
						Choose one of the following options for validating CA certificates:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<span class="strong strong"><strong>Use a custom CA certificate</strong></span>: Migrate after validating a custom CA certificate.
							</li><li class="listitem">
								<span class="strong strong"><strong>Use the system CA certificate</strong></span>: Migrate after validating the system CA certificate.
							</li><li class="listitem"><p class="simpara">
								<span class="strong strong"><strong>Skip certificate validation</strong></span> : Migrate without validating a CA certificate.
							</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
										To use a custom CA certificate, leave the <span class="strong strong"><strong>Skip certificate validation</strong></span> switch toggled to left, and <span class="emphasis"><em>either</em></span> drag the CA certificate to the text box <span class="emphasis"><em>or</em></span> browse for it and click <span class="strong strong"><strong>Select</strong></span>.
									</li><li class="listitem">
										To use the system CA certificate, leave the <span class="strong strong"><strong>Skip certificate validation</strong></span> switch toggled to the left, and leave the <span class="strong strong"><strong>CA certificate</strong></span> text box empty.
									</li><li class="listitem">
										To skip certificate validation, toggle the <span class="strong strong"><strong>Skip certificate validation</strong></span> switch to the right.
									</li></ol></div></li></ul></div></li><li class="listitem"><p class="simpara">
						Optional: Ask MTV to fetch a custom CA certificate from the provider’s API endpoint URL.
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Click <span class="strong strong"><strong>Fetch certificate from URL</strong></span>. The <span class="strong strong"><strong>Verify certificate</strong></span> window opens.
							</li><li class="listitem"><p class="simpara">
								If the details are correct, select the <span class="strong strong"><strong>I trust the authenticity of this certificate</strong></span> checkbox, and then, click <span class="strong strong"><strong>Confirm</strong></span>. If not, click <span class="strong strong"><strong>Cancel</strong></span>, and then, enter the correct certificate information manually.
							</p><p class="simpara">
								Once confirmed, the CA certificate will be used to validate subsequent communication with the API endpoint.
							</p></li></ol></div></li><li class="listitem"><p class="simpara">
						Click <span class="strong strong"><strong>Create provider</strong></span> to add and save the provider.
					</p><p class="simpara">
						The provider appears in the list of providers.
					</p></li></ol></div></section><section class="section" id="selecting-migration-network-for-virt-provider_dest_ostack"><div class="titlepage"><div><div><h2 class="title">12.6. Selecting a migration network for an OpenShift Virtualization provider</h2></div></div></div><p class="_abstract _abstract">
				You can select a default migration network for an OpenShift Virtualization provider in the Red Hat OpenShift web console to improve performance. The default migration network is used to transfer disks to the namespaces in which it is configured.
			</p><p>
				After you select a transfer network, associate its network attachment definition (NAD) with the gateway to be used by this network.
			</p><p>
				In MTV version 2.9 and earlier, MTV used the <code class="literal">pod</code> network as the default network.
			</p><p>
				In version 2.10.0 and later, MTV detects if you have selected a user-defined network (UDN) as your default network. Therefore, if you set the UDN to be the migration’s namespace, you do not need to select a new default network when you create your migration plan.
			</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					MTV supports using UDNs for all providers except OpenShift Virtualization.
				</p></div></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					You can override the default migration network of the provider by selecting a different network when you create a migration plan.
				</p></div></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						In the Red Hat OpenShift web console, click <span class="strong strong"><strong>Migration for Virtualization</strong></span> &gt; <span class="strong strong"><strong>Providers</strong></span>.
					</li><li class="listitem"><p class="simpara">
						Click the OpenShift Virtualization provider whose migration network you want to change.
					</p><p class="simpara">
						When the <span class="strong strong"><strong>Providers detail</strong></span> page opens:
					</p></li><li class="listitem">
						Click the <span class="strong strong"><strong>Networks</strong></span> tab.
					</li><li class="listitem">
						Click <span class="strong strong"><strong>Set default transfer network</strong></span>.
					</li><li class="listitem">
						Select a default transfer network from the list and click <span class="strong strong"><strong>Save</strong></span>.
					</li><li class="listitem"><p class="simpara">
						Configure a gateway in the network used for MTV migrations by completing the following steps:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								In the Red Hat OpenShift web console, click <span class="strong strong"><strong>Networking</strong></span> &gt; <span class="strong strong"><strong>NetworkAttachmentDefinitions</strong></span>.
							</li><li class="listitem">
								Select the appropriate default transfer network NAD.
							</li><li class="listitem">
								Click the <span class="strong strong"><strong>YAML</strong></span> tab.
							</li><li class="listitem"><p class="simpara">
								Add <code class="literal">forklift.konveyor.io/route</code> to the metadata:annotations section of the YAML, as in the following example:
							</p><pre class="programlisting language-yaml">apiVersion: k8s.cni.cncf.io/v1
kind: NetworkAttachmentDefinition
metadata:
  name: localnet-network
  namespace: mtv-test
  annotations:
    forklift.konveyor.io/route: &lt;IP address&gt;</pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										The <code class="literal">NetworkAttachmentDefinition</code> parameter is needed to configure an IP address for the interface, either from the Dynamic Host Configuration Protocol (DHCP) or statically. Configuring the IP address enables the interface to reach the configured gateway.
									</li></ul></div></li><li class="listitem">
								Click <span class="strong strong"><strong>Save</strong></span>.
							</li></ol></div></li></ol></div></section><section class="section" id="creating-plan-wizard-ostack_ostack"><div class="titlepage"><div><div><h2 class="title">12.7. Creating an OpenStack migration plan by using the MTV wizard</h2></div></div></div><p class="_abstract _abstract">
				You can migrate OpenStack virtual machines (VMs) by using the Migration Toolkit for Virtualization plan creation wizard.
			</p><p>
				The wizard is designed to lead you step-by-step in creating a migration plan.
			</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
					Do not include virtual machines with guest-initiated storage connections, such as Internet Small Computer Systems Interface (iSCSI) connections or Network File System (NFS) mounts. These require either additional planning before migration or reconfiguration after migration.
				</p><p>
					This prevents concurrent disk access to the storage the guest points to.
				</p></div></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					A plan cannot contain more than 500 VMs or 500 disks.
				</p></div></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					When you click <span class="strong strong"><strong>Create plan</strong></span> on the <span class="strong strong"><strong>Review and create</strong></span> page of the wizard, Migration Toolkit for Virtualization (MTV) validates your plan. If everything is OK, the <span class="strong strong"><strong>Plan details</strong></span> page for your plan opens. This page contains settings that do not appear in the wizard, but are important. Be sure to read and follow the instructions for this page carefully, even though it is outside the plan creation wizard. The page can be opened later, any time before you run the plan, so you can come back to it if needed.
				</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Have an OpenStack source provider and an OpenShift Virtualization destination provider. For more information, see <a class="link" href="#adding-source-provider_ostack" title="12.4. Adding an OpenStack source provider">Adding an OpenStack source provider</a> or <a class="link" href="#adding-source-provider_dest_ostack" title="12.5. Adding an OpenShift Virtualization destination provider">Adding an OpenShift Virtualization destination provider</a>.
					</li><li class="listitem">
						If you plan to create a <span class="strong strong"><strong>Network map</strong></span> or a <span class="strong strong"><strong>Storage map</strong></span> that will be used by more than one migration plan, create it in the <span class="strong strong"><strong>Network maps</strong></span> or <span class="strong strong"><strong>Storage maps</strong></span> page of the UI before you create a migration plan that uses that map.
					</li><li class="listitem">
						If you are using a user-defined network (UDN), note the name of its namespace as defined in OpenShift Virtualization.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						In the Red Hat OpenShift web console, click <span class="strong strong"><strong>Migration for Virtualization</strong></span> &gt; <span class="strong strong"><strong>Migration plans</strong></span>.
					</li><li class="listitem"><p class="simpara">
						Click <span class="strong strong"><strong>Create plan</strong></span>.
					</p><p class="simpara">
						The <span class="strong strong"><strong>Create migration plan</strong></span> wizard opens.
					</p></li><li class="listitem"><p class="simpara">
						On the <span class="strong strong"><strong>General</strong></span> page, specify the following fields:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<span class="strong strong"><strong>Plan name</strong></span>: Enter a name.
							</li><li class="listitem">
								<span class="strong strong"><strong>Plan project</strong></span>: Select from the list.
							</li><li class="listitem">
								<span class="strong strong"><strong>Source provider</strong></span>: Select from the list.
							</li><li class="listitem">
								<span class="strong strong"><strong>Target provider</strong></span>: Select from the list.
							</li><li class="listitem"><p class="simpara">
								<span class="strong strong"><strong>Target project</strong></span>: Click the list and do one of the following:
							</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
										Select an existing project from the list.
									</li><li class="listitem"><p class="simpara">
										Create a new project by clicking <span class="strong strong"><strong>Create project</strong></span> and doing the following:
									</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem">
												Enter the <span class="strong strong"><strong>Name</strong></span> of the project. A project name must consist of lowercase alphanumeric characters or <code class="literal">-</code>. A project name must start and end with alphanumeric characters. For example, <code class="literal">my-name</code> or <code class="literal">123-abc</code>.
											</li><li class="listitem">
												Optional: Enter a <span class="strong strong"><strong>Display name</strong></span> for the project.
											</li><li class="listitem">
												Optional: Enter a <span class="strong strong"><strong>Description</strong></span> of the project.
											</li><li class="listitem">
												Click <span class="strong strong"><strong>Create project</strong></span>.
											</li></ol></div></li></ol></div></li></ul></div></li><li class="listitem">
						Click <span class="strong strong"><strong>Next</strong></span>.
					</li><li class="listitem">
						On the <span class="strong strong"><strong>Virtual machines</strong></span> page, select the virtual machines you want to migrate and click <span class="strong strong"><strong>Next</strong></span>.
					</li><li class="listitem">
						If you are using a UDN, verify that the IP address of the provider is outside the subnet of the UDN. If the IP address is within the subnet of the UDN, the migration fails.
					</li><li class="listitem"><p class="simpara">
						On the <span class="strong strong"><strong>Network map</strong></span> page, choose one of the following options:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								<span class="strong strong"><strong>Use an existing network map</strong></span>: Select an existing network map from the list.
							</p><p class="simpara">
								These are network maps available for all plans, and therefore, they are <span class="emphasis"><em>ownerless</em></span> in terms of the system. If you select this option and choose a map, a copy of that map is attached to your plan, and your plan is the <span class="emphasis"><em>owner</em></span> of that copy. Any changes you make to your copy do not affect the original plan or any copies that other users have.
							</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									If you choose an existing map, be sure it has the same source provider and the same target provider as the ones you want to use in your plan.
								</p></div></div></li><li class="listitem"><p class="simpara">
								<span class="strong strong"><strong>Use a new network map</strong></span>: Allows you to create a new network map by supplying the following data. This map is attached to this plan, which is then considered to be its owner. Maps that you create using this option are not available in the <span class="strong strong"><strong>Use an existing network map</strong></span> option because each is created with an owner.
							</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									You can create an ownerless network map, which you and others can use for additional migration plans, in the <span class="strong strong"><strong>Network maps</strong></span> section of the UI.
								</p></div></div><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										<span class="strong strong"><strong>Source network</strong></span>: Select from the list.
									</li><li class="listitem"><p class="simpara">
										<span class="strong strong"><strong>Target network</strong></span>: Select from the list.
									</p><p class="simpara">
										If needed, click <span class="strong strong"><strong>Add mapping</strong></span> to add another mapping.
									</p></li><li class="listitem">
										<span class="strong strong"><strong>Network map name</strong></span>: Enter a name or let MTV automatically generate a name for the network map.
									</li></ul></div></li></ul></div></li><li class="listitem">
						Click <span class="strong strong"><strong>Next</strong></span>.
					</li><li class="listitem"><p class="simpara">
						On the <span class="strong strong"><strong>Storage map</strong></span> page, choose one of the following options:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								<span class="strong strong"><strong>Use an existing storage map</strong></span>: Select an existing storage map from the list.
							</p><p class="simpara">
								These are storage maps available for all plans, and therefore, they are <span class="emphasis"><em>ownerless</em></span> in terms of the system. If you select this option and choose a map, a copy of that map is attached to your plan, and your plan is the <span class="emphasis"><em>owner</em></span> of that copy. Any changes you make to your copy do not affect the original plan or any copies that other users have.
							</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									If you choose an existing map, be sure it has the same source provider and the same target provider as the ones you want to use in your plan.
								</p></div></div></li><li class="listitem"><p class="simpara">
								<span class="strong strong"><strong>Use new storage map</strong></span>: Allows you to create one or two new storage maps by supplying the following data. These maps are attached to this plan, which is then their owner. Maps that you create using this option are not available in the <span class="strong strong"><strong>Use an existing storage map</strong></span> option because each is created with an owner.
							</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									You can create an ownerless storage map, which you and others can use for additional migration plans, in the <span class="strong strong"><strong>Storage maps</strong></span> section of the UI.
								</p></div></div><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										<span class="strong strong"><strong>Source storage</strong></span>: Select from the list.
									</li><li class="listitem"><p class="simpara">
										<span class="strong strong"><strong>Target storage</strong></span>: Select from the list.
									</p><p class="simpara">
										If needed, click <span class="strong strong"><strong>Add mapping</strong></span> to add another mapping.
									</p></li><li class="listitem">
										<span class="strong strong"><strong>Storage map name</strong></span>: Enter a name or let MTV automatically generate a name for the storage map.
									</li></ul></div></li></ul></div></li><li class="listitem">
						Click <span class="strong strong"><strong>Next</strong></span>.
					</li><li class="listitem"><p class="simpara">
						On the <span class="strong strong"><strong>Other settings (optional)</strong></span> page, you have the option to change the <span class="strong strong"><strong>Transfer network</strong></span> of your migration plan.
					</p><p class="simpara">
						The transfer network is the network used to transfer the VMs to OpenShift Virtualization. This is the default transfer network of the provider.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Verify that the transfer network is in the selected target project.
							</li><li class="listitem">
								To choose a different transfer network, select a different transfer network from the list.
							</li><li class="listitem"><p class="simpara">
								Optional: To configure another OpenShift network in the OpenShift web console, click <span class="strong strong"><strong>Networking &gt; NetworkAttachmentDefinitions</strong></span>.
							</p><p class="simpara">
								To learn more about the different types of networks OpenShift supports, see <a class="link" href="https://docs.redhat.com/en/documentation/openshift_container_platform/4.20/html-single/networking/index#additional-networks-provided_understanding-multiple-networks">Additional Networks in OpenShift Container Platform</a>.
							</p></li><li class="listitem">
								To adjust the maximum transmission unit (MTU) of the OpenShift transfer network, you must also change the MTU of the VMware migration network. For more information, see <a class="link" href="#selecting-migration-network-for-vmware-source-provider_vmware" title="10.5. Selecting a migration network for a VMware source provider">Selecting a migration network for a VMware source provider</a>.
							</li></ul></div></li><li class="listitem">
						Click <span class="strong strong"><strong>Next</strong></span>.
					</li><li class="listitem">
						On the <span class="strong strong"><strong>Hooks (optional)</strong></span> page, you can add a pre-migration hook, a post-migration hook, or both types of migration hooks. All are optional.
					</li><li class="listitem">
						To add a hook, select the appropriate <span class="strong strong"><strong>Enable hook</strong></span> checkbox.
					</li><li class="listitem">
						Enter the <span class="strong strong"><strong>Hook runner image</strong></span>.
					</li><li class="listitem"><p class="simpara">
						Enter the <span class="strong strong"><strong>Ansible playbook</strong></span> of the hook in the window.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							You cannot include more than one pre-migration hook or more than one post-migration hook in a migration plan.
						</p></div></div></li><li class="listitem">
						Click <span class="strong strong"><strong>Next</strong></span>.
					</li><li class="listitem">
						On the <span class="strong strong"><strong>Review and create</strong></span> page, review the information displayed.
					</li><li class="listitem"><p class="simpara">
						Edit any item by doing the following:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Click its <span class="strong strong"><strong>Edit step</strong></span> link.
							</p><p class="simpara">
								The wizard opens to the page where you defined the item.
							</p></li><li class="listitem">
								Edit the item.
							</li><li class="listitem">
								Either click <span class="strong strong"><strong>Next</strong></span> to advance to the next page of the wizard, or click <span class="strong strong"><strong>Skip to review</strong></span> to return directly to the <span class="strong strong"><strong>Review and create</strong></span> page.
							</li></ol></div></li><li class="listitem"><p class="simpara">
						When you finish reviewing the details of the plan, click <span class="strong strong"><strong>Create plan</strong></span>. MTV validates your plan.
					</p><p class="simpara">
						When your plan is validated, the <span class="strong strong"><strong>Plan details</strong></span> page for your plan opens in the <span class="strong strong"><strong>Details</strong></span> tab.
					</p></li><li class="listitem"><p class="simpara">
						In addition to listing details based on your entries in the wizard, the <span class="strong strong"><strong>Plan details</strong></span> tab includes the following two sections after the details of the plan:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<span class="strong strong"><strong>Migration history</strong></span>: Details about successful and unsuccessful attempts to run the plan
							</li><li class="listitem">
								<span class="strong strong"><strong>Conditions</strong></span>: Any changes that need to be made to the plan so that it can run successfully
							</li></ul></div></li><li class="listitem"><p class="simpara">
						When you have fixed all conditions listed, you can run your plan from the <span class="strong strong"><strong>Plans</strong></span> page.
					</p><p class="simpara">
						The <span class="strong strong"><strong>Plan details</strong></span> page also includes five additional tabs, which are described in the table that follows:
					</p><div class="table" id="idm46552698087776"><p class="title"><strong>Table 12.1. Tabs of the Plan details page</strong></p><div class="table-contents"><table class="gt-4-cols lt-7-rows"><colgroup><col style="width: 20%; " class="col_1"/><col style="width: 20%; " class="col_2"/><col style="width: 20%; " class="col_3"/><col style="width: 20%; " class="col_4"/><col style="width: 20%; " class="col_5"/></colgroup><thead><tr><th align="left" valign="top" id="idm46552698080144" scope="col">YAML</th><th align="left" valign="top" id="idm46552698079056" scope="col">Virtual Machines</th><th align="left" valign="top" id="idm46552698077968" scope="col">Resources</th><th align="left" valign="top" id="idm46552698076880" scope="col">Mappings</th><th align="left" valign="top" id="idm46552697246368" scope="col">Hooks</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm46552698080144">
									<p>
										Editable YAML <code class="literal">Plan</code> manifest based on your plan’s details including source provider, network and storage maps, VMs, and any issues with your VMs
									</p>
									</td><td align="left" valign="top" headers="idm46552698079056">
									<p>
										The VMs the plan migrates
									</p>
									</td><td align="left" valign="top" headers="idm46552698077968">
									<p>
										Calculated resources: VMs, CPUs, and total memory for both total VMs and running VMs
									</p>
									</td><td align="left" valign="top" headers="idm46552698076880">
									<p>
										Editable specification of the network and storage maps used by your plan
									</p>
									</td><td align="left" valign="top" headers="idm46552697246368">
									<p>
										Updatable specification of the hooks used by your plan, if any
									</p>
									</td></tr></tbody></table></div></div></li></ol></div></section></section><section class="chapter" id="assembly_planning-migration-ova_mtv"><div class="titlepage"><div><div><h1 class="title">Chapter 13. Planning a migration of virtual machines from OVA</h1></div></div></div><p class="_abstract _abstract">
			Create an OVA migration plan by setting up network maps, configuring source and destination providers with migration networks, and defining the migration plan in the Migration Toolkit for Virtualization (MTV) UI.
		</p><section class="section" id="creating-yaml-based-network-maps-ui_ova"><div class="titlepage"><div><div><h2 class="title">13.1. Creating ownerless network maps in the MTV UI</h2></div></div></div><p class="_abstract _abstract">
				You can create ownerless network maps by using the Migration Toolkit for Virtualization (MTV) UI to map source networks to OpenShift Virtualization networks.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						In the Red Hat OpenShift web console, click <span class="strong strong"><strong>Migration for Virtualization</strong></span> &gt; <span class="strong strong"><strong>Network maps</strong></span>.
					</li><li class="listitem">
						Click <span class="strong strong"><strong>Create network map</strong></span> to open the <span class="strong strong"><strong>Create network map</strong></span> page.
					</li><li class="listitem">
						Enter the YAML or JSON definitions into the editor, or drag and drop a file into the editor.
					</li><li class="listitem">
						If you enter YAML definitions, use the following:
					</li></ol></div><pre class="programlisting language-yaml">$  cat &lt;&lt; EOF | oc apply -f -
apiVersion: forklift.konveyor.io/v1beta1
kind: NetworkMap
metadata:
  name: &lt;network_map&gt;
  namespace: &lt;namespace&gt;
spec:
  map:
    - destination:
        name: &lt;network_name&gt;
        type: pod
      source:
        id: &lt;source_network_id&gt;
    - destination:
        name: &lt;network_attachment_definition&gt;
        namespace: &lt;network_attachment_definition_namespace&gt;
        type: multus
      source:
        id: &lt;source_network_id&gt;
  provider:
    source:
      name: &lt;source_provider&gt;
      namespace: &lt;namespace&gt;
    destination:
      name: &lt;destination_provider&gt;
      namespace: &lt;namespace&gt;
EOF</pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">type</code>: Allowed values are <code class="literal">pod</code> and <code class="literal">multus</code>.
					</li><li class="listitem">
						<code class="literal">source</code>: Specify the OVA network Universal Unique ID (UUID).
					</li><li class="listitem">
						<code class="literal">&lt;network_attachment_definition&gt;</code>: Specify a network attachment definition for each additional OpenShift Virtualization network.
					</li><li class="listitem">
						<code class="literal">&lt;network_attachment_definition_namespace&gt;</code>: Required only when <code class="literal">type</code> is <code class="literal">multus</code>. Specify the namespace of the OpenShift Virtualization network attachment definition.
					</li></ul></div><div class="orderedlist"><ol class="orderedlist" start="5" type="1"><li class="listitem">
						Optional: To download your input, click <span class="strong strong"><strong>Download</strong></span>.
					</li><li class="listitem"><p class="simpara">
						Click <span class="strong strong"><strong>Create</strong></span>.
					</p><p class="simpara">
						Your map appears in the list of network maps.
					</p></li></ol></div></section><section class="section" id="creating-form-based-storage-maps-ui-ova_ova"><div class="titlepage"><div><div><h2 class="title">13.2. Creating ownerless storage maps using the form page of the MTV UI</h2></div></div></div><p class="_abstract _abstract">
				You can create ownerless storage maps by using the form page of the MTV UI.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Have an Open Virtual Appliance (OVA) source provider and a OpenShift Virtualization destination provider. For more information, see <a class="link" href="#adding-source-provider_ova" title="13.4. Adding an Open Virtual Appliance (OVA) source provider">Adding an Open Virtual Appliance (OVA) source provider</a> or <a class="link" href="#adding-source-provider_dest_cnv" title="14.5. Adding an OpenShift Virtualization destination provider">Adding an OpenShift Virtualization destination provider</a>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						In the Red Hat OpenShift web console, click <span class="strong strong"><strong>Migration for Virtualization</strong></span> &gt; <span class="strong strong"><strong>Storage maps</strong></span>.
					</li><li class="listitem">
						Click <span class="strong strong"><strong>Create storage map</strong></span> &gt; <span class="strong strong"><strong>Create with form</strong></span>.
					</li><li class="listitem"><p class="simpara">
						Specify the following:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<span class="strong strong"><strong>Map name</strong></span>: Name of the storage map.
							</li><li class="listitem">
								<span class="strong strong"><strong>Project</strong></span>: Select from the list.
							</li><li class="listitem">
								<span class="strong strong"><strong>Source provider</strong></span>: Select from the list.
							</li><li class="listitem">
								<span class="strong strong"><strong>Target provider</strong></span>: Select from the list.
							</li><li class="listitem">
								<span class="strong strong"><strong>Source storage</strong></span>: Select from the list.
							</li><li class="listitem">
								<span class="strong strong"><strong>Target storage</strong></span>: Select from the list.
							</li></ul></div></li><li class="listitem">
						Optional: Click <span class="strong strong"><strong>Add mapping</strong></span> to create additional storage maps, including mapping multiple storage sources to a single target storage class.
					</li><li class="listitem"><p class="simpara">
						Click <span class="strong strong"><strong>Create</strong></span>.
					</p><p class="simpara">
						Your map appears in the list of storage maps.
					</p></li></ol></div></section><section class="section" id="creating-yaml-based-stoarge-maps-ui_ova"><div class="titlepage"><div><div><h2 class="title">13.3. Creating ownerless storage maps using YAML or JSON definitions in the MTV UI</h2></div></div></div><p class="_abstract _abstract">
				You can create ownerless storage maps by using YAML or JSON definitions in the Migration Toolkit for Virtualization (MTV) UI.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						In the Red Hat OpenShift web console, click <span class="strong strong"><strong>Migration for Virtualization</strong></span> &gt; <span class="strong strong"><strong>Storage maps</strong></span>.
					</li><li class="listitem"><p class="simpara">
						Click <span class="strong strong"><strong>Create storage map</strong></span> &gt; <span class="strong strong"><strong>Create with YAML</strong></span>.
					</p><p class="simpara">
						The <span class="strong strong"><strong>Create StorageMap</strong></span> page opens.
					</p></li><li class="listitem">
						Enter the YAML or JSON definitions into the editor, or drag and drop a file into the editor.
					</li><li class="listitem">
						If you enter YAML definitions, use the following:
					</li></ol></div><pre class="programlisting language-yaml">$ cat &lt;&lt; EOF | oc apply -f -
apiVersion: forklift.konveyor.io/v1beta1
kind: StorageMap
metadata:
  name: &lt;storage_map&gt;
  namespace: &lt;namespace&gt;
spec:
  map:
    - destination:
        storageClass: &lt;storage_class&gt;
        accessMode: &lt;access_mode&gt;
      source:
        name:  Dummy storage for source provider &lt;provider_name&gt;
  provider:
    source:
      name: &lt;source_provider&gt;
      namespace: &lt;namespace&gt;
    destination:
      name: &lt;destination_provider&gt;
      namespace: &lt;namespace&gt;
EOF</pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">accessMode</code>: Allowed values are <code class="literal">ReadWriteOnce</code> and <code class="literal">ReadWriteMany</code>.
					</li><li class="listitem">
						<code class="literal">name</code>: For OVA, the <code class="literal">StorageMap</code> can map only a single storage, which all the disks from the OVA are associated with, to a storage class at the destination. For this reason, the storage is referred to in the UI as "Dummy storage for source provider &lt;provider_name&gt;". In the YAML, write the phrase as it appears above, without the quotation marks and replacing &lt;provider_name&gt; with the actual name of the provider.
					</li></ul></div><div class="orderedlist"><ol class="orderedlist" start="5" type="1"><li class="listitem">
						Optional: To download your input, click <span class="strong strong"><strong>Download</strong></span>.
					</li><li class="listitem"><p class="simpara">
						Click <span class="strong strong"><strong>Create</strong></span>.
					</p><p class="simpara">
						Your map appears in the list of storage maps.
					</p></li></ol></div></section><section class="section" id="adding-source-provider_ova"><div class="titlepage"><div><div><h2 class="title">13.4. Adding an Open Virtual Appliance (OVA) source provider</h2></div></div></div><p class="_abstract _abstract">
				You can add Open Virtual Appliance (OVA) files that were created by VMware vSphere as a source provider by using the Red Hat OpenShift web console.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Access the <span class="strong strong"><strong>Create provider</strong></span> page for Open Virtual Appliance by doing one of the following:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								In the Red Hat OpenShift web console, click <span class="strong strong"><strong>Migration for Virtualization &gt; Providers</strong></span>.
							</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem">
										Click <span class="strong strong"><strong>Create Provider</strong></span>.
									</li><li class="listitem"><p class="simpara">
										Select a <span class="strong strong"><strong>Project</strong></span> from the list. The default project shown depends on the active project of MTV.
									</p><p class="simpara">
										If the active project is <span class="strong strong"><strong>All projects</strong></span>, then the default project is <code class="literal">openshift-mtv</code>. Otherwise, the default project is the same as the active project.
									</p><p class="simpara">
										If you have Administrator privileges, you can see all projects, otherwise, you can see only the projects you are authorized to work with.
									</p></li><li class="listitem">
										Click <span class="strong strong"><strong>Open Virtual Appliance</strong></span>.
									</li></ol></div></li><li class="listitem"><p class="simpara">
								If you have Administrator privileges, in the Red Hat OpenShift web console, click <span class="strong strong"><strong>Migration for Virtualization &gt; Overview</strong></span>.
							</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem"><p class="simpara">
										In the <span class="strong strong"><strong>Welcome</strong></span> pane, click <span class="strong strong"><strong>Open Virtual Appliance</strong></span>.
									</p><p class="simpara">
										If the <span class="strong strong"><strong>Welcome</strong></span> pane is not visible, click <span class="strong strong"><strong>Show the welcome card</strong></span> in the upper-right corner of the page, and click <span class="strong strong"><strong>Open Virtual Appliance</strong></span> when the <span class="strong strong"><strong>Welcome</strong></span> pane opens.
									</p></li><li class="listitem"><p class="simpara">
										Select a <span class="strong strong"><strong>Project</strong></span> from the list. The default project shown depends on the active project of MTV.
									</p><p class="simpara">
										If the active project is <span class="strong strong"><strong>All projects</strong></span>, then the default project is <code class="literal">openshift-mtv</code>. Otherwise, the default project is the same as the active project.
									</p><p class="simpara">
										If you have Administrator privileges, you can see all projects, otherwise, you can see only the projects you are authorized to work with.
									</p></li></ol></div></li></ol></div></li><li class="listitem"><p class="simpara">
						Specify the following fields:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<span class="strong strong"><strong>Provider resource name</strong></span>: Name of the source provider
							</li><li class="listitem"><p class="simpara">
								<span class="strong strong"><strong>URL</strong></span>: URL of the NFS file share that serves the OVA
							</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									After creating the provider, you can optionally configure OVA file upload by web browser to upload OVA files directly to the NFS share. For more information, see <a class="link" href="#proc_configuring-ova-web-upload_ova" title="13.8. Configuring OVA file upload by web browser">Configuring OVA file upload by web browser</a>.
								</p></div></div></li></ul></div></li><li class="listitem"><p class="simpara">
						Click <span class="strong strong"><strong>Create provider</strong></span> to add and save the provider.
					</p><p class="simpara">
						The provider appears in the list of providers.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							An error message might appear that states that an error has occurred. You can ignore this message.
						</p></div></div></li></ol></div></section><section class="section" id="adding-source-provider_dest_ova"><div class="titlepage"><div><div><h2 class="title">13.5. Adding an OpenShift Virtualization destination provider</h2></div></div></div><p class="_abstract _abstract">
				Use a Red Hat OpenShift Virtualization provider as both source and destination provider. You can migrate VMs from the cluster that Migration Toolkit for Virtualization (MTV) is deployed on to another cluster or from a remote cluster to the cluster that MTV is deployed on.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You must have an OpenShift Virtualization <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.20/html/authentication_and_authorization/using-service-accounts">service account token</a> with <code class="literal">cluster-admin</code> privileges.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Access the <span class="strong strong"><strong>Create OpenShift Virtualization provider</strong></span> interface by doing one of the following:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								In the Red Hat OpenShift web console, click <span class="strong strong"><strong>Migration for Virtualization &gt; Providers</strong></span>.
							</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem">
										Click <span class="strong strong"><strong>Create Provider</strong></span>.
									</li><li class="listitem"><p class="simpara">
										Select a <span class="strong strong"><strong>Project</strong></span> from the list. The default project shown depends on the active project of MTV.
									</p><p class="simpara">
										If the active project is <span class="strong strong"><strong>All projects</strong></span>, then the default project is <code class="literal">openshift-mtv</code>. Otherwise, the default project is the same as the active project.
									</p><p class="simpara">
										If you have Administrator privileges, you can see all projects, otherwise, you can see only the projects you are authorized to work with.
									</p></li><li class="listitem">
										Click <span class="strong strong"><strong>OpenShift Virtualization</strong></span>.
									</li></ol></div></li><li class="listitem"><p class="simpara">
								If you have Administrator privileges, in the Red Hat OpenShift web console, click <span class="strong strong"><strong>Migration for Virtualization &gt; Overview</strong></span>.
							</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem"><p class="simpara">
										In the <span class="strong strong"><strong>Welcome</strong></span> pane, click <span class="strong strong"><strong>OpenShift Virtualization</strong></span>.
									</p><p class="simpara">
										If the <span class="strong strong"><strong>Welcome</strong></span> pane is not visible, click <span class="strong strong"><strong>Show the welcome card</strong></span> in the upper-right corner of the page, and click <span class="strong strong"><strong>OpenShift Virtualization</strong></span> when the <span class="strong strong"><strong>Welcome</strong></span> pane opens.
									</p></li><li class="listitem"><p class="simpara">
										Select a <span class="strong strong"><strong>Project</strong></span> from the list. The default project shown depends on the active project of MTV.
									</p><p class="simpara">
										If the active project is <span class="strong strong"><strong>All projects</strong></span>, then the default project is <code class="literal">openshift-mtv</code>. Otherwise, the default project is the same as the active project.
									</p><p class="simpara">
										If you have Administrator privileges, you can see all projects, otherwise, you can see only the projects you are authorized to work with.
									</p></li></ol></div></li></ol></div></li><li class="listitem"><p class="simpara">
						Specify the following fields:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<span class="strong strong"><strong>Provider resource name</strong></span>: Name of the source provider
							</li><li class="listitem">
								<span class="strong strong"><strong>URL</strong></span>: URL of the endpoint of the API server
							</li><li class="listitem"><p class="simpara">
								<span class="strong strong"><strong>Service account bearer token</strong></span>: Token for a service account with <code class="literal">cluster-admin</code> privileges
							</p><p class="simpara">
								If both <span class="strong strong"><strong>URL</strong></span> and <span class="strong strong"><strong>Service account bearer token</strong></span> are left blank, the local OpenShift cluster is used.
							</p></li></ul></div></li><li class="listitem"><p class="simpara">
						Choose one of the following options for validating CA certificates:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<span class="strong strong"><strong>Use a custom CA certificate</strong></span>: Migrate after validating a custom CA certificate.
							</li><li class="listitem">
								<span class="strong strong"><strong>Use the system CA certificate</strong></span>: Migrate after validating the system CA certificate.
							</li><li class="listitem"><p class="simpara">
								<span class="strong strong"><strong>Skip certificate validation</strong></span> : Migrate without validating a CA certificate.
							</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
										To use a custom CA certificate, leave the <span class="strong strong"><strong>Skip certificate validation</strong></span> switch toggled to left, and <span class="emphasis"><em>either</em></span> drag the CA certificate to the text box <span class="emphasis"><em>or</em></span> browse for it and click <span class="strong strong"><strong>Select</strong></span>.
									</li><li class="listitem">
										To use the system CA certificate, leave the <span class="strong strong"><strong>Skip certificate validation</strong></span> switch toggled to the left, and leave the <span class="strong strong"><strong>CA certificate</strong></span> text box empty.
									</li><li class="listitem">
										To skip certificate validation, toggle the <span class="strong strong"><strong>Skip certificate validation</strong></span> switch to the right.
									</li></ol></div></li></ul></div></li><li class="listitem"><p class="simpara">
						Optional: Ask MTV to fetch a custom CA certificate from the provider’s API endpoint URL.
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Click <span class="strong strong"><strong>Fetch certificate from URL</strong></span>. The <span class="strong strong"><strong>Verify certificate</strong></span> window opens.
							</li><li class="listitem"><p class="simpara">
								If the details are correct, select the <span class="strong strong"><strong>I trust the authenticity of this certificate</strong></span> checkbox, and then, click <span class="strong strong"><strong>Confirm</strong></span>. If not, click <span class="strong strong"><strong>Cancel</strong></span>, and then, enter the correct certificate information manually.
							</p><p class="simpara">
								Once confirmed, the CA certificate will be used to validate subsequent communication with the API endpoint.
							</p></li></ol></div></li><li class="listitem"><p class="simpara">
						Click <span class="strong strong"><strong>Create provider</strong></span> to add and save the provider.
					</p><p class="simpara">
						The provider appears in the list of providers.
					</p></li></ol></div></section><section class="section" id="selecting-migration-network-for-virt-provider_dest_ova"><div class="titlepage"><div><div><h2 class="title">13.6. Selecting a migration network for an OpenShift Virtualization provider</h2></div></div></div><p class="_abstract _abstract">
				You can select a default migration network for an OpenShift Virtualization provider in the Red Hat OpenShift web console to improve performance. The default migration network is used to transfer disks to the namespaces in which it is configured.
			</p><p>
				After you select a transfer network, associate its network attachment definition (NAD) with the gateway to be used by this network.
			</p><p>
				In MTV version 2.9 and earlier, MTV used the <code class="literal">pod</code> network as the default network.
			</p><p>
				In version 2.10.0 and later, MTV detects if you have selected a user-defined network (UDN) as your default network. Therefore, if you set the UDN to be the migration’s namespace, you do not need to select a new default network when you create your migration plan.
			</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					MTV supports using UDNs for all providers except OpenShift Virtualization.
				</p></div></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					You can override the default migration network of the provider by selecting a different network when you create a migration plan.
				</p></div></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						In the Red Hat OpenShift web console, click <span class="strong strong"><strong>Migration for Virtualization</strong></span> &gt; <span class="strong strong"><strong>Providers</strong></span>.
					</li><li class="listitem"><p class="simpara">
						Click the OpenShift Virtualization provider whose migration network you want to change.
					</p><p class="simpara">
						When the <span class="strong strong"><strong>Providers detail</strong></span> page opens:
					</p></li><li class="listitem">
						Click the <span class="strong strong"><strong>Networks</strong></span> tab.
					</li><li class="listitem">
						Click <span class="strong strong"><strong>Set default transfer network</strong></span>.
					</li><li class="listitem">
						Select a default transfer network from the list and click <span class="strong strong"><strong>Save</strong></span>.
					</li><li class="listitem"><p class="simpara">
						Configure a gateway in the network used for MTV migrations by completing the following steps:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								In the Red Hat OpenShift web console, click <span class="strong strong"><strong>Networking</strong></span> &gt; <span class="strong strong"><strong>NetworkAttachmentDefinitions</strong></span>.
							</li><li class="listitem">
								Select the appropriate default transfer network NAD.
							</li><li class="listitem">
								Click the <span class="strong strong"><strong>YAML</strong></span> tab.
							</li><li class="listitem"><p class="simpara">
								Add <code class="literal">forklift.konveyor.io/route</code> to the metadata:annotations section of the YAML, as in the following example:
							</p><pre class="programlisting language-yaml">apiVersion: k8s.cni.cncf.io/v1
kind: NetworkAttachmentDefinition
metadata:
  name: localnet-network
  namespace: mtv-test
  annotations:
    forklift.konveyor.io/route: &lt;IP address&gt;</pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										The <code class="literal">NetworkAttachmentDefinition</code> parameter is needed to configure an IP address for the interface, either from the Dynamic Host Configuration Protocol (DHCP) or statically. Configuring the IP address enables the interface to reach the configured gateway.
									</li></ul></div></li><li class="listitem">
								Click <span class="strong strong"><strong>Save</strong></span>.
							</li></ol></div></li></ol></div></section><section class="section" id="creating-plan-wizard-ova_ova"><div class="titlepage"><div><div><h2 class="title">13.7. Creating an Open Virtualization Appliance (OVA) migration plan by using the MTV wizard</h2></div></div></div><p class="_abstract _abstract">
				You can migrate Open Virtual Appliance (OVA) files that were created by VMware vSphere by using the Migration Toolkit for Virtualization plan creation wizard.
			</p><p>
				The wizard is designed to lead you step-by-step in creating a migration plan.
			</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
					Do not include virtual machines with guest-initiated storage connections, such as Internet Small Computer Systems Interface (iSCSI) connections or Network File System (NFS) mounts. These require either additional planning before migration or reconfiguration after migration.
				</p><p>
					This prevents concurrent disk access to the storage the guest points to.
				</p></div></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					A plan cannot contain more than 500 VMs or 500 disks.
				</p></div></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					When you click <span class="strong strong"><strong>Create plan</strong></span> on the <span class="strong strong"><strong>Review and create</strong></span> page of the wizard, Migration Toolkit for Virtualization (MTV) validates your plan. If everything is OK, the <span class="strong strong"><strong>Plan details</strong></span> page for your plan opens. This page contains settings that do not appear in the wizard, but are important. Be sure to read and follow the instructions for this page carefully, even though it is outside the plan creation wizard. The page can be opened later, any time before you run the plan, so you can come back to it if needed.
				</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Have an OVA source provider and a OpenShift Virtualization destination provider. For more information, see <a class="link" href="#adding-source-provider_ova" title="13.4. Adding an Open Virtual Appliance (OVA) source provider">Adding an Open Virtual Appliance (OVA) source provider</a> or <a class="link" href="#adding-source-provider_dest_ova" title="13.5. Adding an OpenShift Virtualization destination provider">Adding an OpenShift Virtualization destination provider</a>.
					</li><li class="listitem">
						If you plan to create a <span class="strong strong"><strong>Network map</strong></span> or a <span class="strong strong"><strong>Storage map</strong></span> that will be used by more than one migration plan, create it in the <span class="strong strong"><strong>Network maps</strong></span> or <span class="strong strong"><strong>Storage maps</strong></span> page of the UI before you create a migration plan that uses that map.
					</li><li class="listitem">
						If you are using a user-defined network (UDN), note the name of its namespace as defined in OpenShift Virtualization.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						In the Red Hat OpenShift web console, click <span class="strong strong"><strong>Migration for Virtualization</strong></span> &gt; <span class="strong strong"><strong>Migration plans</strong></span>.
					</li><li class="listitem"><p class="simpara">
						Click <span class="strong strong"><strong>Create plan</strong></span>.
					</p><p class="simpara">
						The <span class="strong strong"><strong>Create migration plan</strong></span> wizard opens.
					</p></li><li class="listitem"><p class="simpara">
						On the <span class="strong strong"><strong>General</strong></span> page, specify the following fields:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<span class="strong strong"><strong>Plan name</strong></span>: Enter a name.
							</li><li class="listitem">
								<span class="strong strong"><strong>Plan project</strong></span>: Select from the list.
							</li><li class="listitem">
								<span class="strong strong"><strong>Source provider</strong></span>: Select from the list.
							</li><li class="listitem"><p class="simpara">
								<span class="strong strong"><strong>Target project</strong></span>: Click the list and do one of the following:
							</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
										Select an existing project from the list.
									</li><li class="listitem"><p class="simpara">
										Create a new project by clicking <span class="strong strong"><strong>Create project</strong></span> and doing the following:
									</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem">
												Enter the <span class="strong strong"><strong>Name</strong></span> of the project. A project name must consist of lowercase alphanumeric characters or <code class="literal">-</code>. A project name must start and end with alphanumeric characters. For example, <code class="literal">my-name</code> or <code class="literal">123-abc</code>.
											</li><li class="listitem">
												Optional: Enter a <span class="strong strong"><strong>Display name</strong></span> for the project.
											</li><li class="listitem">
												Optional: Enter a <span class="strong strong"><strong>Description</strong></span> of the project.
											</li><li class="listitem">
												Click <span class="strong strong"><strong>Create Project</strong></span>.
											</li></ol></div></li></ol></div></li></ul></div></li><li class="listitem">
						Click <span class="strong strong"><strong>Next</strong></span>.
					</li><li class="listitem">
						On the <span class="strong strong"><strong>Virtual machines</strong></span> page, select the virtual machines you want to migrate and click <span class="strong strong"><strong>Next</strong></span>.
					</li><li class="listitem">
						If you are using a UDN, verify that the IP address of the provider is outside the subnet of the UDN. If the IP address is within the subnet of the UDN, the migration fails.
					</li><li class="listitem"><p class="simpara">
						On the <span class="strong strong"><strong>Network map</strong></span> page, choose one of the following options:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								<span class="strong strong"><strong>Use an existing network map</strong></span>: Select an existing network map from the list.
							</p><p class="simpara">
								These are network maps available for all plans, and therefore, they are <span class="emphasis"><em>ownerless</em></span> in terms of the system. If you select this option and choose a map, a copy of that map is attached to your plan, and your plan is the <span class="emphasis"><em>owner</em></span> of that copy. Any changes you make to your copy do not affect the original plan or any copies that other users have.
							</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									If you choose an existing map, be sure it has the same source provider and the same target provider as the ones you want to use in your plan.
								</p></div></div></li><li class="listitem"><p class="simpara">
								<span class="strong strong"><strong>Use a new network map</strong></span>: Allows you to create a new network map by supplying the following data. This map is attached to this plan, which is then considered to be its owner. Maps that you create using this option are not available in the <span class="strong strong"><strong>Use an existing network map</strong></span> option because each is created with an owner.
							</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									You can create an ownerless network map, which you and others can use for additional migration plans, in the <span class="strong strong"><strong>Network maps</strong></span> section of the UI.
								</p></div></div><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										<span class="strong strong"><strong>Source network</strong></span>: Select from the list.
									</li><li class="listitem"><p class="simpara">
										<span class="strong strong"><strong>Target network</strong></span>: Select from the list.
									</p><p class="simpara">
										If needed, click <span class="strong strong"><strong>Add mapping</strong></span> to add another mapping.
									</p></li><li class="listitem">
										<span class="strong strong"><strong>Network map name</strong></span>: Enter a name or let MTV automatically generate a name for the network map.
									</li></ul></div></li></ul></div></li><li class="listitem">
						Click <span class="strong strong"><strong>Next</strong></span>.
					</li><li class="listitem"><p class="simpara">
						On the <span class="strong strong"><strong>Storage map</strong></span> page, choose one of the following options:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								<span class="strong strong"><strong>Use an existing storage map</strong></span>: Select an existing storage map from the list.
							</p><p class="simpara">
								These are storage maps available for all plans, and therefore, they are <span class="emphasis"><em>ownerless</em></span> in terms of the system. If you select this option and choose a map, a copy of that map is attached to your plan, and your plan is the <span class="emphasis"><em>owner</em></span> of that copy. Any changes you make to your copy do not affect the original plan or any copies that other users have.
							</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									If you choose an existing map, be sure it has the same source provider and the same target provider as the ones you want to use in your plan.
								</p></div></div></li><li class="listitem"><p class="simpara">
								<span class="strong strong"><strong>Use new storage map</strong></span>: Allows you to create one or two new storage maps by supplying the following data. These maps are attached to this plan, which is then their owner. Maps that you create using this option are not available in the <span class="strong strong"><strong>Use an existing storage map</strong></span> option because each is created with an owner.
							</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									You can create an ownerless storage map, which you and others can use for additional migration plans, in the <span class="strong strong"><strong>Storage maps</strong></span> section of the UI.
								</p></div></div><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										<span class="strong strong"><strong>Source storage</strong></span>: Select from the list.
									</li><li class="listitem"><p class="simpara">
										<span class="strong strong"><strong>Target storage</strong></span>: Select from the list.
									</p><p class="simpara">
										If needed, click <span class="strong strong"><strong>Add mapping</strong></span> to add another mapping.
									</p></li><li class="listitem">
										<span class="strong strong"><strong>Storage map name</strong></span>: Enter a name or let MTV automatically generate a name for the storage map.
									</li></ul></div></li></ul></div></li><li class="listitem">
						Click <span class="strong strong"><strong>Next</strong></span>.
					</li><li class="listitem"><p class="simpara">
						On the <span class="strong strong"><strong>Other settings (optional)</strong></span> page, you have the option to change the <span class="strong strong"><strong>Transfer network</strong></span> of your migration plan.
					</p><p class="simpara">
						The transfer network is the network used to transfer the VMs to OpenShift Virtualization. This is the default transfer network of the provider.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Verify that the transfer network is in the selected target project.
							</li><li class="listitem">
								To choose a different transfer network, select a different transfer network from the list.
							</li><li class="listitem"><p class="simpara">
								Optional: To configure another OpenShift network in the OpenShift web console, click <span class="strong strong"><strong>Networking &gt; NetworkAttachmentDefinitions</strong></span>.
							</p><p class="simpara">
								To learn more about the different types of networks OpenShift supports, see <a class="link" href="https://docs.redhat.com/en/documentation/openshift_container_platform/4.20/html-single/networking/index#additional-networks-provided_understanding-multiple-networks">Additional Networks in OpenShift Container Platform</a>.
							</p></li><li class="listitem">
								To adjust the maximum transmission unit (MTU) of the OpenShift transfer network, you must also change the MTU of the VMware migration network. For more information, see <a class="link" href="#selecting-migration-network-for-vmware-source-provider_vmware" title="10.5. Selecting a migration network for a VMware source provider">Selecting a migration network for a VMware source provider</a>.
							</li></ul></div></li><li class="listitem">
						Click <span class="strong strong"><strong>Next</strong></span>.
					</li><li class="listitem">
						On the <span class="strong strong"><strong>Hooks (optional)</strong></span> page, you can add a pre-migration hook, a post-migration hook, or both types of migration hooks. All are optional.
					</li><li class="listitem">
						To add a hook, select the appropriate <span class="strong strong"><strong>Enable hook</strong></span> checkbox.
					</li><li class="listitem">
						Enter the <span class="strong strong"><strong>Hook runner image</strong></span>.
					</li><li class="listitem"><p class="simpara">
						Enter the <span class="strong strong"><strong>Ansible playbook</strong></span> of the hook in the window.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							You cannot include more than one pre-migration hook or more than one post-migration hook in a migration plan.
						</p></div></div></li><li class="listitem">
						Click <span class="strong strong"><strong>Next</strong></span>.
					</li><li class="listitem">
						On the <span class="strong strong"><strong>Review and create</strong></span> page, review the information displayed.
					</li><li class="listitem"><p class="simpara">
						Edit any item by doing the following:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Click its <span class="strong strong"><strong>Edit step</strong></span> link.
							</p><p class="simpara">
								The wizard opens to the page where you defined the item.
							</p></li><li class="listitem">
								Edit the item.
							</li><li class="listitem">
								Either click <span class="strong strong"><strong>Next</strong></span> to advance to the next page of the wizard, or click <span class="strong strong"><strong>Skip to review</strong></span> to return directly to the <span class="strong strong"><strong>Review and create</strong></span> page.
							</li></ol></div></li><li class="listitem"><p class="simpara">
						When you finish reviewing the details of the plan, click <span class="strong strong"><strong>Create plan</strong></span>. MTV validates your plan.
					</p><p class="simpara">
						When your plan is validated, the <span class="strong strong"><strong>Plan details</strong></span> page for your plan opens in the <span class="strong strong"><strong>Details</strong></span> tab.
					</p></li><li class="listitem"><p class="simpara">
						In addition to listing details based on your entries in the wizard, the <span class="strong strong"><strong>Plan details</strong></span> tab includes the following two sections after the details of the plan:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<span class="strong strong"><strong>Migration history</strong></span>: Details about successful and unsuccessful attempts to run the plan
							</li><li class="listitem">
								<span class="strong strong"><strong>Conditions</strong></span>: Any changes that need to be made to the plan so that it can run successfully
							</li></ul></div></li><li class="listitem"><p class="simpara">
						When you have fixed all conditions listed, you can run your plan from the <span class="strong strong"><strong>Plans</strong></span> page.
					</p><p class="simpara">
						The <span class="strong strong"><strong>Plan details</strong></span> page also includes five additional tabs, which are described in the table that follows:
					</p><div class="table" id="idm46552698487344"><p class="title"><strong>Table 13.1. Tabs of the Plan details page</strong></p><div class="table-contents"><table class="gt-4-cols lt-7-rows"><colgroup><col style="width: 20%; " class="col_1"/><col style="width: 20%; " class="col_2"/><col style="width: 20%; " class="col_3"/><col style="width: 20%; " class="col_4"/><col style="width: 20%; " class="col_5"/></colgroup><thead><tr><th align="left" valign="top" id="idm46552698479712" scope="col">YAML</th><th align="left" valign="top" id="idm46552698478624" scope="col">Virtual Machines</th><th align="left" valign="top" id="idm46552698477536" scope="col">Resources</th><th align="left" valign="top" id="idm46552698476448" scope="col">Mappings</th><th align="left" valign="top" id="idm46552698475360" scope="col">Hooks</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm46552698479712">
									<p>
										Editable YAML <code class="literal">Plan</code> manifest based on your plan’s details including source provider, network and storage maps, VMs, and any issues with your VMs
									</p>
									</td><td align="left" valign="top" headers="idm46552698478624">
									<p>
										The VMs the plan migrates
									</p>
									</td><td align="left" valign="top" headers="idm46552698477536">
									<p>
										Calculated resources: VMs, CPUs, and total memory for both total VMs and running VMs
									</p>
									</td><td align="left" valign="top" headers="idm46552698476448">
									<p>
										Editable specification of the network and storage maps used by your plan
									</p>
									</td><td align="left" valign="top" headers="idm46552698475360">
									<p>
										Updatable specification of the hooks used by your plan, if any
									</p>
									</td></tr></tbody></table></div></div></li></ol></div></section><section class="section" id="proc_configuring-ova-web-upload_ova"><div class="titlepage"><div><div><h2 class="title">13.8. Configuring OVA file upload by web browser</h2></div></div></div><p class="_abstract _abstract">
				You can configure Open Virtual Appliance (OVA) file upload by web browser to upload an OVA file directly to an NFS share. To configure OVA file upload, you first enable OVA appliance management in the <code class="literal">ForkliftController</code> custom resource (CR) and then enable OVA upload for each OVA provider. When you enable OVA upload for an OVA provider, the <span class="strong strong"><strong>Upload local OVA files</strong></span> option populates on the provider’s <span class="strong strong"><strong>Details</strong></span> page in the MTV UI.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have an NFS share to point the OVA provider at.
					</li><li class="listitem">
						You have enough storage space in your NFS share.
					</li><li class="listitem">
						The NFS share is writable by the QEMU group (GID 107).
					</li><li class="listitem">
						You have a valid .ova file to upload.
					</li><li class="listitem">
						Your .ova file has a unique file name.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						In the Red Hat OpenShift web console, click <span class="strong strong"><strong>Operators</strong></span> &gt; <span class="strong strong"><strong>Installed Operators</strong></span>.
					</li><li class="listitem"><p class="simpara">
						Click <span class="strong strong"><strong>Migration Toolkit for Virtualization Operator</strong></span>.
					</p><p class="simpara">
						The Operator Details page opens in the <span class="strong strong"><strong>Details</strong></span> tab.
					</p></li><li class="listitem">
						Click the <span class="strong strong"><strong>ForkliftController</strong></span> tab, and open the <code class="literal">forklift-controller</code> resource.
					</li><li class="listitem"><p class="simpara">
						Click the <code class="literal">forklift-controller</code> <span class="strong strong"><strong>YAML</strong></span> tab, and add the <code class="literal">feature_ova_appliance_management</code> field to the <code class="literal">spec</code> section of the <code class="literal">forklift-controller</code> custom resource (CR):
					</p><p class="simpara">
						Example:
					</p><pre class="screen">spec:
  ...
  feature_ova_appliance_management: 'true'</pre><p class="simpara">
						Wait for the operator to redeploy the controller after updating the <code class="literal">forklift-controller</code> CR.
					</p></li><li class="listitem">
						In the Red Hat OpenShift web console, click <span class="strong strong"><strong>Migration for Virtualization</strong></span> &gt; <span class="strong strong"><strong>Providers</strong></span>.
					</li><li class="listitem"><p class="simpara">
						Click the provider to open the <span class="strong strong"><strong>Details</strong></span> page. Click the provider’s <span class="strong strong"><strong>YAML</strong></span> tab.
					</p><p class="simpara">
						For information about creating a provider, see <a class="link" href="#adding-source-provider_ova" title="13.4. Adding an Open Virtual Appliance (OVA) source provider">Adding an Open Virtual Appliance (OVA) source provider</a>.
					</p></li><li class="listitem"><p class="simpara">
						Scroll down the provider’s YAML file, and add the <code class="literal">applianceManagement</code> field to the <code class="literal">spec</code> section. Set <code class="literal">applianceManagement</code> to <code class="literal">'true'</code>:
					</p><p class="simpara">
						Example:
					</p><pre class="screen">spec:
  secret:
    ...
  settings:
    applianceManagement: 'true'
  type: ova
  ...</pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								A temporary <span class="emphasis"><em>ConnectionTestFailed</em></span> error message displays while the update is processing. You can ignore the error message.
							</li></ul></div></li><li class="listitem">
						Click the provider’s <span class="strong strong"><strong>Details</strong></span> tab, and scroll down to the <span class="strong strong"><strong>Conditions</strong></span> section. Verify that ApplianceManagementEnabled shows as True in the list of conditions.
					</li><li class="listitem">
						In the <span class="strong strong"><strong>Upload local OVA files</strong></span> section, click <span class="strong strong"><strong>Browse</strong></span> to find a valid .ova file.
					</li><li class="listitem"><p class="simpara">
						Click <span class="strong strong"><strong>Upload</strong></span>.
					</p><p class="simpara">
						A success message confirms the file upload. After several seconds, the number of virtual machines increases under the <span class="strong strong"><strong>Provider inventory</strong></span> section.
					</p></li></ol></div></section></section><section class="chapter" id="assembly_planning-migration-cnv_mtv"><div class="titlepage"><div><div><h1 class="title">Chapter 14. Planning a migration of virtual machines from OpenShift Virtualization</h1></div></div></div><p class="_abstract _abstract">
			Create a OpenShift Virtualization migration plan by setting up network maps, configuring source and destination providers with migration networks, and defining the migration plan in the Migration Toolkit for Virtualization (MTV) UI.
		</p><section class="section" id="creating-yaml-based-network-maps-ui_cnv"><div class="titlepage"><div><div><h2 class="title">14.1. Creating ownerless network maps in the MTV UI</h2></div></div></div><p class="_abstract _abstract">
				You can create ownerless network maps by using the Migration Toolkit for Virtualization (MTV) UI to map source networks to OpenShift Virtualization networks.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						In the Red Hat OpenShift web console, click <span class="strong strong"><strong>Migration for Virtualization</strong></span> &gt; <span class="strong strong"><strong>Network maps</strong></span>.
					</li><li class="listitem">
						Click <span class="strong strong"><strong>Create network map</strong></span> to open the <span class="strong strong"><strong>Create network map</strong></span> page.
					</li><li class="listitem">
						Enter the YAML or JSON definitions into the editor, or drag and drop a file into the editor.
					</li><li class="listitem">
						If you enter YAML definitions, use the following:
					</li></ol></div><pre class="programlisting language-yaml">$  cat &lt;&lt; EOF | oc apply -f -
apiVersion: forklift.konveyor.io/v1beta1
kind: NetworkMap
metadata:
  name: &lt;network_map&gt;
  namespace: &lt;namespace&gt;
spec:
  map:
    - destination:
        name: &lt;network_name&gt;
        type: pod
      source:
        name: &lt;network_name&gt;
        type: pod
    - destination:
        name: &lt;network_attachment_definition&gt;
        namespace: &lt;network_attachment_definition_namespace&gt;
        type: multus
      source:
        name: &lt;network_attachment_definition&gt;
        namespace: &lt;network_attachment_definition_namespace&gt;
        type: multus
  provider:
    source:
      name: &lt;source_provider&gt;
      namespace: &lt;namespace&gt;
    destination:
      name: &lt;destination_provider&gt;
      namespace: &lt;namespace&gt;
EOF</pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">type</code>: Allowed values are <code class="literal">pod</code> and <code class="literal">multus</code>.
					</li><li class="listitem">
						<code class="literal">&lt;network_attachment_definition&gt;</code>: Specify a network attachment definition for each additional OpenShift Virtualization network. Specify the <code class="literal">namespace</code> either by using the <code class="literal">namespace property</code> or with a name built as follows: <code class="literal">&lt;network_namespace&gt;/&lt;network_name&gt;</code>.
					</li><li class="listitem">
						<code class="literal">&lt;network_attachment_definition_namespace&gt;</code>: Required only when <code class="literal">type</code> is <code class="literal">multus</code>. Specify the namespace of the OpenShift Virtualization network attachment definition.
					</li></ul></div><div class="orderedlist"><ol class="orderedlist" start="5" type="1"><li class="listitem">
						Optional: To download your input, click <span class="strong strong"><strong>Download</strong></span>.
					</li><li class="listitem"><p class="simpara">
						Click <span class="strong strong"><strong>Create</strong></span>.
					</p><p class="simpara">
						Your map appears in the list of network maps.
					</p></li></ol></div></section><section class="section" id="creating-form-based-storage-maps-ui-cnv_cnv"><div class="titlepage"><div><div><h2 class="title">14.2. Creating ownerless storage maps using the form page of the MTV UI</h2></div></div></div><p class="_abstract _abstract">
				You can create ownerless storage maps by using the form page of the MTV UI.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Have a OpenShift Virtualization source provider and a OpenShift Virtualization destination provider. For more information, see <a class="link" href="#adding-source-provider_cnv" title="14.4. Adding a Red Hat OpenShift Virtualization source provider">Adding an OpenShift Virtualization source provider</a> or <a class="link" href="#adding-source-provider_cnv" title="14.4. Adding a Red Hat OpenShift Virtualization source provider">Adding an OpenShift Virtualization destination provider</a>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						In the Red Hat OpenShift web console, click <span class="strong strong"><strong>Migration for Virtualization</strong></span> &gt; <span class="strong strong"><strong>Storage maps</strong></span>.
					</li><li class="listitem">
						Click <span class="strong strong"><strong>Create storage map</strong></span> &gt; <span class="strong strong"><strong>Create with form</strong></span>.
					</li><li class="listitem"><p class="simpara">
						Specify the following:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<span class="strong strong"><strong>Map name</strong></span>: Name of the storage map.
							</li><li class="listitem">
								<span class="strong strong"><strong>Project</strong></span>: Select from the list.
							</li><li class="listitem">
								<span class="strong strong"><strong>Source provider</strong></span>: Select from the list.
							</li><li class="listitem">
								<span class="strong strong"><strong>Target provider</strong></span>: Select from the list.
							</li><li class="listitem">
								<span class="strong strong"><strong>Source storage</strong></span>: Select from the list.
							</li><li class="listitem">
								<span class="strong strong"><strong>Target storage</strong></span>: Select from the list.
							</li></ul></div></li><li class="listitem">
						Optional: Click <span class="strong strong"><strong>Add mapping</strong></span> to create additional storage maps, including mapping multiple storage sources to a single target storage class.
					</li><li class="listitem"><p class="simpara">
						Click <span class="strong strong"><strong>Create</strong></span>.
					</p><p class="simpara">
						Your map appears in the list of storage maps.
					</p></li></ol></div></section><section class="section" id="creating-yaml-based-stoarge-maps-ui_cnv"><div class="titlepage"><div><div><h2 class="title">14.3. Creating ownerless storage maps using YAML or JSON definitions in the MTV UI</h2></div></div></div><p class="_abstract _abstract">
				You can create ownerless storage maps by using YAML or JSON definitions in the Migration Toolkit for Virtualization (MTV) UI.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						In the Red Hat OpenShift web console, click <span class="strong strong"><strong>Migration for Virtualization</strong></span> &gt; <span class="strong strong"><strong>Storage maps</strong></span>.
					</li><li class="listitem"><p class="simpara">
						Click <span class="strong strong"><strong>Create storage map</strong></span> &gt; <span class="strong strong"><strong>Create with YAML</strong></span>.
					</p><p class="simpara">
						The <span class="strong strong"><strong>Create StorageMap</strong></span> page opens.
					</p></li><li class="listitem">
						Enter the YAML or JSON definitions into the editor, or drag and drop a file into the editor.
					</li><li class="listitem">
						If you enter YAML definitions, use the following:
					</li></ol></div><pre class="programlisting language-yaml">$ cat &lt;&lt; EOF | oc apply -f -
apiVersion: forklift.konveyor.io/v1beta1
kind: StorageMap
metadata:
  name: &lt;storage_map&gt;
  namespace: &lt;namespace&gt;
spec:
  map:
    - destination:
        storageClass: &lt;storage_class&gt;
        accessMode: &lt;access_mode&gt;
      source:
        name: &lt;storage_class&gt;
  provider:
    source:
      name: &lt;source_provider&gt;
      namespace: &lt;namespace&gt;
    destination:
      name: &lt;destination_provider&gt;
      namespace: &lt;namespace&gt;
EOF</pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">accessMode</code>: Allowed values are <code class="literal">ReadWriteOnce</code> and <code class="literal">ReadWriteMany</code>.
					</li></ul></div><div class="orderedlist"><ol class="orderedlist" start="5" type="1"><li class="listitem">
						Optional: To download your input, click <span class="strong strong"><strong>Download</strong></span>.
					</li><li class="listitem"><p class="simpara">
						Click <span class="strong strong"><strong>Create</strong></span>.
					</p><p class="simpara">
						Your map appears in the list of storage maps.
					</p></li></ol></div></section><section class="section" id="adding-source-provider_cnv"><div class="titlepage"><div><div><h2 class="title">14.4. Adding a Red Hat OpenShift Virtualization source provider</h2></div></div></div><p class="_abstract _abstract">
				You can use a Red Hat OpenShift Virtualization provider as both source and destination provider. You can migrate VMs from the cluster that Migration Toolkit for Virtualization (MTV) is deployed on to another cluster, or from a remote cluster to the cluster that MTV is deployed on.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					The Red Hat OpenShift cluster version of the source provider must be 4.16 or later.
				</p></div></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Access the <span class="strong strong"><strong>Create provider</strong></span> interface OpenShift Virtualization by doing one of the following:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								In the Red Hat OpenShift web console, click <span class="strong strong"><strong>Migration for Virtualization &gt; Providers</strong></span>.
							</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem">
										Click <span class="strong strong"><strong>Create Provider</strong></span>.
									</li><li class="listitem"><p class="simpara">
										Select a <span class="strong strong"><strong>Project</strong></span> from the list. The default project shown depends on the active project of MTV.
									</p><p class="simpara">
										If the active project is <span class="strong strong"><strong>All projects</strong></span>, then the default project is <code class="literal">openshift-mtv</code>. Otherwise, the default project is the same as the active project.
									</p><p class="simpara">
										If you have Administrator privileges, you can see all projects, otherwise, you can see only the projects you are authorized to work with.
									</p></li><li class="listitem">
										Click <span class="strong strong"><strong>OpenShift Virtualization</strong></span>.
									</li></ol></div></li><li class="listitem"><p class="simpara">
								If you have Administrator privileges, in the Red Hat OpenShift web console, click <span class="strong strong"><strong>Migration for Virtualization &gt; Overview</strong></span>.
							</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem"><p class="simpara">
										In the <span class="strong strong"><strong>Welcome</strong></span> pane, click <span class="strong strong"><strong>OpenShift Virtualization</strong></span>.
									</p><p class="simpara">
										If the <span class="strong strong"><strong>Welcome</strong></span> pane is not visible, click <span class="strong strong"><strong>Show the welcome card</strong></span> in the upper-right corner of the page, and click <span class="strong strong"><strong>OpenShift Virtualization</strong></span> when the <span class="strong strong"><strong>Welcome</strong></span> pane opens.
									</p></li><li class="listitem"><p class="simpara">
										Select a <span class="strong strong"><strong>Project</strong></span> from the list. The default project shown depends on the active project of MTV.
									</p><p class="simpara">
										If the active project is <span class="strong strong"><strong>All projects</strong></span>, then the default project is <code class="literal">openshift-mtv</code>. Otherwise, the default project is the same as the active project.
									</p><p class="simpara">
										If you have Administrator privileges, you can see all projects, otherwise, you can see only the projects you are authorized to work with.
									</p></li></ol></div></li></ol></div></li><li class="listitem"><p class="simpara">
						Specify the following fields:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<span class="strong strong"><strong>Provider resource name</strong></span>: Name of the source provider
							</li><li class="listitem">
								<span class="strong strong"><strong>URL</strong></span>: URL of the endpoint of the API server
							</li><li class="listitem"><p class="simpara">
								<span class="strong strong"><strong>Service account bearer token</strong></span>: Token for a service account with <code class="literal">cluster-admin</code> privileges
							</p><p class="simpara">
								If both <span class="strong strong"><strong>URL</strong></span> and <span class="strong strong"><strong>Service account bearer token</strong></span> are left blank, the local OpenShift cluster is used.
							</p></li></ul></div></li><li class="listitem"><p class="simpara">
						Choose one of the following options for validating CA certificates:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<span class="strong strong"><strong>Use a custom CA certificate</strong></span>: Migrate after validating a custom CA certificate.
							</li><li class="listitem">
								<span class="strong strong"><strong>Use the system CA certificate</strong></span>: Migrate after validating the system CA certificate.
							</li><li class="listitem"><p class="simpara">
								<span class="strong strong"><strong>Skip certificate validation</strong></span> : Migrate without validating a CA certificate.
							</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
										To use a custom CA certificate, leave the <span class="strong strong"><strong>Skip certificate validation</strong></span> switch toggled to left, and <span class="emphasis"><em>either</em></span> drag the CA certificate to the text box <span class="emphasis"><em>or</em></span> browse for it and click <span class="strong strong"><strong>Select</strong></span>.
									</li><li class="listitem">
										To use the system CA certificate, leave the <span class="strong strong"><strong>Skip certificate validation</strong></span> switch toggled to the left, and leave the <span class="strong strong"><strong>CA certificate</strong></span> text box empty.
									</li><li class="listitem">
										To skip certificate validation, toggle the <span class="strong strong"><strong>Skip certificate validation</strong></span> switch to the right.
									</li></ol></div></li></ul></div></li><li class="listitem"><p class="simpara">
						Optional: Ask MTV to fetch a custom CA certificate from the provider’s API endpoint URL.
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Click <span class="strong strong"><strong>Fetch certificate from URL</strong></span>. The <span class="strong strong"><strong>Verify certificate</strong></span> window opens.
							</li><li class="listitem"><p class="simpara">
								If the details are correct, select the <span class="strong strong"><strong>I trust the authenticity of this certificate</strong></span> checkbox, and then, click <span class="strong strong"><strong>Confirm</strong></span>. If not, click <span class="strong strong"><strong>Cancel</strong></span>, and then, enter the correct certificate information manually.
							</p><p class="simpara">
								Once confirmed, the CA certificate will be used to validate subsequent communication with the API endpoint.
							</p></li></ol></div></li><li class="listitem"><p class="simpara">
						Click <span class="strong strong"><strong>Create provider</strong></span> to add and save the provider.
					</p><p class="simpara">
						The provider appears in the list of providers.
					</p></li><li class="listitem"><p class="simpara">
						Optional: Add access to the UI of the provider:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								On the <span class="strong strong"><strong>Providers</strong></span> page, click the provider.
							</p><p class="simpara">
								The <span class="strong strong"><strong>Provider details</strong></span> page opens.
							</p></li><li class="listitem">
								Click the <span class="strong strong"><strong>Edit</strong></span> icon under <span class="strong strong"><strong>External UI web link</strong></span>.
							</li><li class="listitem"><p class="simpara">
								Enter the link and click <span class="strong strong"><strong>Save</strong></span>.
							</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									If you do not enter a link, MTV attempts to calculate the correct link.
								</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											If MTV succeeds, the hyperlink of the field points to the calculated link.
										</li><li class="listitem">
											If MTV does not succeed, the field remains empty.
										</li></ul></div></div></div></li></ol></div></li></ol></div></section><section class="section" id="adding-source-provider_dest_cnv"><div class="titlepage"><div><div><h2 class="title">14.5. Adding an OpenShift Virtualization destination provider</h2></div></div></div><p class="_abstract _abstract">
				Use a Red Hat OpenShift Virtualization provider as both source and destination provider. You can migrate VMs from the cluster that Migration Toolkit for Virtualization (MTV) is deployed on to another cluster or from a remote cluster to the cluster that MTV is deployed on.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You must have an OpenShift Virtualization <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.20/html/authentication_and_authorization/using-service-accounts">service account token</a> with <code class="literal">cluster-admin</code> privileges.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Access the <span class="strong strong"><strong>Create OpenShift Virtualization provider</strong></span> interface by doing one of the following:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								In the Red Hat OpenShift web console, click <span class="strong strong"><strong>Migration for Virtualization &gt; Providers</strong></span>.
							</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem">
										Click <span class="strong strong"><strong>Create Provider</strong></span>.
									</li><li class="listitem"><p class="simpara">
										Select a <span class="strong strong"><strong>Project</strong></span> from the list. The default project shown depends on the active project of MTV.
									</p><p class="simpara">
										If the active project is <span class="strong strong"><strong>All projects</strong></span>, then the default project is <code class="literal">openshift-mtv</code>. Otherwise, the default project is the same as the active project.
									</p><p class="simpara">
										If you have Administrator privileges, you can see all projects, otherwise, you can see only the projects you are authorized to work with.
									</p></li><li class="listitem">
										Click <span class="strong strong"><strong>OpenShift Virtualization</strong></span>.
									</li></ol></div></li><li class="listitem"><p class="simpara">
								If you have Administrator privileges, in the Red Hat OpenShift web console, click <span class="strong strong"><strong>Migration for Virtualization &gt; Overview</strong></span>.
							</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem"><p class="simpara">
										In the <span class="strong strong"><strong>Welcome</strong></span> pane, click <span class="strong strong"><strong>OpenShift Virtualization</strong></span>.
									</p><p class="simpara">
										If the <span class="strong strong"><strong>Welcome</strong></span> pane is not visible, click <span class="strong strong"><strong>Show the welcome card</strong></span> in the upper-right corner of the page, and click <span class="strong strong"><strong>OpenShift Virtualization</strong></span> when the <span class="strong strong"><strong>Welcome</strong></span> pane opens.
									</p></li><li class="listitem"><p class="simpara">
										Select a <span class="strong strong"><strong>Project</strong></span> from the list. The default project shown depends on the active project of MTV.
									</p><p class="simpara">
										If the active project is <span class="strong strong"><strong>All projects</strong></span>, then the default project is <code class="literal">openshift-mtv</code>. Otherwise, the default project is the same as the active project.
									</p><p class="simpara">
										If you have Administrator privileges, you can see all projects, otherwise, you can see only the projects you are authorized to work with.
									</p></li></ol></div></li></ol></div></li><li class="listitem"><p class="simpara">
						Specify the following fields:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<span class="strong strong"><strong>Provider resource name</strong></span>: Name of the source provider
							</li><li class="listitem">
								<span class="strong strong"><strong>URL</strong></span>: URL of the endpoint of the API server
							</li><li class="listitem"><p class="simpara">
								<span class="strong strong"><strong>Service account bearer token</strong></span>: Token for a service account with <code class="literal">cluster-admin</code> privileges
							</p><p class="simpara">
								If both <span class="strong strong"><strong>URL</strong></span> and <span class="strong strong"><strong>Service account bearer token</strong></span> are left blank, the local OpenShift cluster is used.
							</p></li></ul></div></li><li class="listitem"><p class="simpara">
						Choose one of the following options for validating CA certificates:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<span class="strong strong"><strong>Use a custom CA certificate</strong></span>: Migrate after validating a custom CA certificate.
							</li><li class="listitem">
								<span class="strong strong"><strong>Use the system CA certificate</strong></span>: Migrate after validating the system CA certificate.
							</li><li class="listitem"><p class="simpara">
								<span class="strong strong"><strong>Skip certificate validation</strong></span> : Migrate without validating a CA certificate.
							</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
										To use a custom CA certificate, leave the <span class="strong strong"><strong>Skip certificate validation</strong></span> switch toggled to left, and <span class="emphasis"><em>either</em></span> drag the CA certificate to the text box <span class="emphasis"><em>or</em></span> browse for it and click <span class="strong strong"><strong>Select</strong></span>.
									</li><li class="listitem">
										To use the system CA certificate, leave the <span class="strong strong"><strong>Skip certificate validation</strong></span> switch toggled to the left, and leave the <span class="strong strong"><strong>CA certificate</strong></span> text box empty.
									</li><li class="listitem">
										To skip certificate validation, toggle the <span class="strong strong"><strong>Skip certificate validation</strong></span> switch to the right.
									</li></ol></div></li></ul></div></li><li class="listitem"><p class="simpara">
						Optional: Ask MTV to fetch a custom CA certificate from the provider’s API endpoint URL.
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Click <span class="strong strong"><strong>Fetch certificate from URL</strong></span>. The <span class="strong strong"><strong>Verify certificate</strong></span> window opens.
							</li><li class="listitem"><p class="simpara">
								If the details are correct, select the <span class="strong strong"><strong>I trust the authenticity of this certificate</strong></span> checkbox, and then, click <span class="strong strong"><strong>Confirm</strong></span>. If not, click <span class="strong strong"><strong>Cancel</strong></span>, and then, enter the correct certificate information manually.
							</p><p class="simpara">
								Once confirmed, the CA certificate will be used to validate subsequent communication with the API endpoint.
							</p></li></ol></div></li><li class="listitem"><p class="simpara">
						Click <span class="strong strong"><strong>Create provider</strong></span> to add and save the provider.
					</p><p class="simpara">
						The provider appears in the list of providers.
					</p></li></ol></div></section><section class="section" id="selecting-migration-network-for-virt-provider_dest_cnv"><div class="titlepage"><div><div><h2 class="title">14.6. Selecting a migration network for an OpenShift Virtualization provider</h2></div></div></div><p class="_abstract _abstract">
				You can select a default migration network for an OpenShift Virtualization provider in the Red Hat OpenShift web console to improve performance. The default migration network is used to transfer disks to the namespaces in which it is configured.
			</p><p>
				After you select a transfer network, associate its network attachment definition (NAD) with the gateway to be used by this network.
			</p><p>
				In MTV version 2.9 and earlier, MTV used the <code class="literal">pod</code> network as the default network.
			</p><p>
				In version 2.10.0 and later, MTV detects if you have selected a user-defined network (UDN) as your default network. Therefore, if you set the UDN to be the migration’s namespace, you do not need to select a new default network when you create your migration plan.
			</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					MTV supports using UDNs for all providers except OpenShift Virtualization.
				</p></div></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					You can override the default migration network of the provider by selecting a different network when you create a migration plan.
				</p></div></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						In the Red Hat OpenShift web console, click <span class="strong strong"><strong>Migration for Virtualization</strong></span> &gt; <span class="strong strong"><strong>Providers</strong></span>.
					</li><li class="listitem"><p class="simpara">
						Click the OpenShift Virtualization provider whose migration network you want to change.
					</p><p class="simpara">
						When the <span class="strong strong"><strong>Providers detail</strong></span> page opens:
					</p></li><li class="listitem">
						Click the <span class="strong strong"><strong>Networks</strong></span> tab.
					</li><li class="listitem">
						Click <span class="strong strong"><strong>Set default transfer network</strong></span>.
					</li><li class="listitem">
						Select a default transfer network from the list and click <span class="strong strong"><strong>Save</strong></span>.
					</li><li class="listitem"><p class="simpara">
						Configure a gateway in the network used for MTV migrations by completing the following steps:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								In the Red Hat OpenShift web console, click <span class="strong strong"><strong>Networking</strong></span> &gt; <span class="strong strong"><strong>NetworkAttachmentDefinitions</strong></span>.
							</li><li class="listitem">
								Select the appropriate default transfer network NAD.
							</li><li class="listitem">
								Click the <span class="strong strong"><strong>YAML</strong></span> tab.
							</li><li class="listitem"><p class="simpara">
								Add <code class="literal">forklift.konveyor.io/route</code> to the metadata:annotations section of the YAML, as in the following example:
							</p><pre class="programlisting language-yaml">apiVersion: k8s.cni.cncf.io/v1
kind: NetworkAttachmentDefinition
metadata:
  name: localnet-network
  namespace: mtv-test
  annotations:
    forklift.konveyor.io/route: &lt;IP address&gt;</pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										The <code class="literal">NetworkAttachmentDefinition</code> parameter is needed to configure an IP address for the interface, either from the Dynamic Host Configuration Protocol (DHCP) or statically. Configuring the IP address enables the interface to reach the configured gateway.
									</li></ul></div></li><li class="listitem">
								Click <span class="strong strong"><strong>Save</strong></span>.
							</li></ol></div></li></ol></div></section><section class="section" id="creating-plan-wizard-cnv_cnv"><div class="titlepage"><div><div><h2 class="title">14.7. Creating an OpenShift Virtualization migration plan by using the MTV wizard</h2></div></div></div><p class="_abstract _abstract">
				You can migrate OpenShift Virtualization virtual machines (VMs) by using the Migration Toolkit for Virtualization plan creation wizard.
			</p><p>
				The wizard is designed to lead you step-by-step in creating a migration plan.
			</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
					Do not include virtual machines with guest-initiated storage connections, such as Internet Small Computer Systems Interface (iSCSI) connections or Network File System (NFS) mounts. These require either additional planning before migration or reconfiguration after migration.
				</p><p>
					This prevents concurrent disk access to the storage the guest points to.
				</p></div></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					A plan cannot contain more than 500 VMs or 500 disks.
				</p></div></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					When you click <span class="strong strong"><strong>Create plan</strong></span> on the <span class="strong strong"><strong>Review and create</strong></span> page of the wizard, Migration Toolkit for Virtualization (MTV) validates your plan. If everything is OK, the <span class="strong strong"><strong>Plan details</strong></span> page for your plan opens. This page contains settings that do not appear in the wizard, but are important. Be sure to read and follow the instructions for this page carefully, even though it is outside the plan creation wizard. The page can be opened later, any time before you run the plan, so you can come back to it if needed.
				</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Have an OpenShift Virtualization source provider and an OpenShift Virtualization destination provider. For more information, see <a class="link" href="#adding-source-provider_cnv" title="14.4. Adding a Red Hat OpenShift Virtualization source provider">Adding an OpenShift Virtualization source provider</a> or <a class="link" href="#adding-source-provider_dest_cnv" title="14.5. Adding an OpenShift Virtualization destination provider">Adding an OpenShift Virtualization destination provider</a>.
					</li><li class="listitem">
						If you plan to create a <span class="strong strong"><strong>Network map</strong></span> or a <span class="strong strong"><strong>Storage map</strong></span> that will be used by more than one migration plan, create it in the <span class="strong strong"><strong>Network maps</strong></span> or <span class="strong strong"><strong>Storage maps</strong></span> page of the UI before you create a migration plan that uses that map.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						In the Red Hat OpenShift web console, click <span class="strong strong"><strong>Migration for Virtualization</strong></span> &gt; <span class="strong strong"><strong>Migration plans</strong></span>.
					</li><li class="listitem"><p class="simpara">
						Click <span class="strong strong"><strong>Create plan</strong></span>.
					</p><p class="simpara">
						The <span class="strong strong"><strong>Create migration plan</strong></span> wizard opens.
					</p></li><li class="listitem"><p class="simpara">
						On the <span class="strong strong"><strong>General</strong></span> page, specify the following fields:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<span class="strong strong"><strong>Plan name</strong></span>: Enter a name.
							</li><li class="listitem">
								<span class="strong strong"><strong>Plan project</strong></span>: Select from the list.
							</li><li class="listitem">
								<span class="strong strong"><strong>Source provider</strong></span>: Select from the list.
							</li><li class="listitem">
								<span class="strong strong"><strong>Target provider</strong></span>: Select from the list.
							</li><li class="listitem"><p class="simpara">
								<span class="strong strong"><strong>Target project</strong></span>: Click the list and do one of the following:
							</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
										Select an existing project from the list.
									</li><li class="listitem"><p class="simpara">
										Create a new project by clicking <span class="strong strong"><strong>Create project</strong></span> and doing the following:
									</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem">
												Enter the <span class="strong strong"><strong>Name</strong></span> of the project. A project name must consist of lowercase alphanumeric characters or <code class="literal">-</code>. A project name must start and end with alphanumeric characters. For example, <code class="literal">my-name</code> or <code class="literal">123-abc</code>.
											</li><li class="listitem">
												Optional: Enter a <span class="strong strong"><strong>Display name</strong></span> for the project.
											</li><li class="listitem">
												Optional: Enter a <span class="strong strong"><strong>Description</strong></span> of the project.
											</li><li class="listitem">
												Click <span class="strong strong"><strong>Create Project</strong></span>.
											</li></ol></div></li></ol></div></li></ul></div></li><li class="listitem">
						Click <span class="strong strong"><strong>Next</strong></span>.
					</li><li class="listitem">
						On the <span class="strong strong"><strong>Virtual machines</strong></span> page, select the virtual machines you want to migrate and click <span class="strong strong"><strong>Next</strong></span>.
					</li><li class="listitem"><p class="simpara">
						On the <span class="strong strong"><strong>Network map</strong></span> page, choose one of the following options:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								<span class="strong strong"><strong>Use an existing network map</strong></span>: Select an existing network map from the list.
							</p><p class="simpara">
								These are network maps available for all plans, and therefore, they are <span class="emphasis"><em>ownerless</em></span> in terms of the system. If you select this option and choose a map, a copy of that map is attached to your plan, and your plan is the <span class="emphasis"><em>owner</em></span> of that copy. Any changes you make to your copy do not affect the original plan or any copies that other users have.
							</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									If you choose an existing map, be sure it has the same source provider and target provider as the ones you want to use in your plan.
								</p></div></div></li><li class="listitem"><p class="simpara">
								<span class="strong strong"><strong>Use a new network map</strong></span>: Allows you to create a new network map by supplying the following data. This map is attached to this plan, which is then considered to be its owner. Maps that you create using this option are not available in the <span class="strong strong"><strong>Use an existing network map</strong></span> option because each is created with an owner.
							</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									You can create an ownerless network map, which you and others can use for additional migration plans, in the <span class="strong strong"><strong>Network maps</strong></span> section of the UI.
								</p></div></div><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										<span class="strong strong"><strong>Source network</strong></span>: Select from the list.
									</li><li class="listitem"><p class="simpara">
										<span class="strong strong"><strong>Target network</strong></span>: Select from the list.
									</p><p class="simpara">
										If needed, click <span class="strong strong"><strong>Add mapping</strong></span> to add another mapping.
									</p></li><li class="listitem">
										<span class="strong strong"><strong>Network map name</strong></span>: Enter a name or let MTV automatically generate a name for the network map.
									</li></ul></div></li></ul></div></li><li class="listitem">
						Click <span class="strong strong"><strong>Next</strong></span>.
					</li><li class="listitem"><p class="simpara">
						On the <span class="strong strong"><strong>Storage map</strong></span> page, choose one of the following options:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								<span class="strong strong"><strong>Use an existing storage map</strong></span>: Select an existing storage map from the list.
							</p><p class="simpara">
								These are storage maps available for all plans, and therefore, they are <span class="emphasis"><em>ownerless</em></span> in terms of the system. If you select this option and choose a map, a copy of that map is attached to your plan, and your plan is the <span class="emphasis"><em>owner</em></span> of that copy. Any changes you make to your copy do not affect the original plan or any copies that other users have.
							</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									If you choose an existing map, be sure it has the same source provider and the same target provider as the ones you want to use in your plan.
								</p></div></div></li><li class="listitem"><p class="simpara">
								<span class="strong strong"><strong>Use new storage map</strong></span>: Allows you to create one or two new storage maps by supplying the following data. These maps are attached to this plan, which is then their owner. Maps that you create using this option are not available in the <span class="strong strong"><strong>Use an existing storage map</strong></span> option because each is created with an owner.
							</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									You can create an ownerless storage map, which you and others can use for additional migration plans, in the <span class="strong strong"><strong>Storage maps</strong></span> section of the UI.
								</p></div></div><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										<span class="strong strong"><strong>Source storage</strong></span>: Select from the list.
									</li><li class="listitem"><p class="simpara">
										<span class="strong strong"><strong>Target storage</strong></span>: Select from the list.
									</p><p class="simpara">
										If needed, click <span class="strong strong"><strong>Add mapping</strong></span> to add another mapping.
									</p></li><li class="listitem">
										<span class="strong strong"><strong>Storage map name</strong></span>: Enter a name or let MTV automatically generate a name for the storage map.
									</li></ul></div></li></ul></div></li><li class="listitem">
						Click <span class="strong strong"><strong>Next</strong></span>.
					</li><li class="listitem"><p class="simpara">
						On the <span class="strong strong"><strong>Other settings (optional)</strong></span> page, you have the option to change the <span class="strong strong"><strong>Transfer network</strong></span> of your migration plan.
					</p><p class="simpara">
						The transfer network is the network used to transfer the VMs to OpenShift Virtualization. This is the default transfer network of the provider.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Verify that the transfer network is in the selected target project.
							</li><li class="listitem">
								To choose a different transfer network, select a different transfer network from the list.
							</li><li class="listitem"><p class="simpara">
								Optional: To configure another OpenShift network in the OpenShift web console, click <span class="strong strong"><strong>Networking &gt; NetworkAttachmentDefinitions</strong></span>.
							</p><p class="simpara">
								To learn more about the different types of networks OpenShift supports, see <a class="link" href="https://docs.redhat.com/en/documentation/openshift_container_platform/4.20/html-single/networking/index#additional-networks-provided_understanding-multiple-networks">Additional Networks in OpenShift Container Platform</a>.
							</p></li><li class="listitem">
								To adjust the maximum transmission unit (MTU) of the OpenShift transfer network, you must also change the MTU of the VMware migration network. For more information, see <a class="link" href="#selecting-migration-network-for-vmware-source-provider_vmware" title="10.5. Selecting a migration network for a VMware source provider">Selecting a migration network for a VMware source provider</a>.
							</li></ul></div></li><li class="listitem">
						Click <span class="strong strong"><strong>Next</strong></span>.
					</li><li class="listitem">
						On the <span class="strong strong"><strong>Hooks (optional)</strong></span> page, you can add a pre-migration hook, a post-migration hook, or both types of migration hooks. All are optional.
					</li><li class="listitem">
						To add a hook, select the appropriate <span class="strong strong"><strong>Enable hook</strong></span> checkbox.
					</li><li class="listitem">
						Enter the <span class="strong strong"><strong>Hook runner image</strong></span>.
					</li><li class="listitem"><p class="simpara">
						Enter the <span class="strong strong"><strong>Ansible playbook</strong></span> of the hook in the window.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							You cannot include more than one pre-migration hook or more than one post-migration hook in a migration plan.
						</p></div></div></li><li class="listitem">
						Click <span class="strong strong"><strong>Next</strong></span>.
					</li><li class="listitem">
						On the <span class="strong strong"><strong>Review and create</strong></span> page, review the information displayed.
					</li><li class="listitem"><p class="simpara">
						Edit any item by doing the following:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Click its <span class="strong strong"><strong>Edit step</strong></span> link.
							</p><p class="simpara">
								The wizard opens to the page where you defined the item.
							</p></li><li class="listitem">
								Edit the item.
							</li><li class="listitem">
								Either click <span class="strong strong"><strong>Next</strong></span> to advance to the next page of the wizard, or click <span class="strong strong"><strong>Skip to review</strong></span> to return directly to the <span class="strong strong"><strong>Review and create</strong></span> page.
							</li></ol></div></li><li class="listitem"><p class="simpara">
						When you finish reviewing the details of the plan, click <span class="strong strong"><strong>Create plan</strong></span>. MTV validates your plan.
					</p><p class="simpara">
						When your plan is validated, the <span class="strong strong"><strong>Plan details</strong></span> page for your plan opens in the <span class="strong strong"><strong>Details</strong></span> tab.
					</p></li><li class="listitem"><p class="simpara">
						In addition to listing details based on your entries in the wizard, the <span class="strong strong"><strong>Plan details</strong></span> tab includes the following two sections after the details of the plan:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<span class="strong strong"><strong>Migration history</strong></span>: Details about successful and unsuccessful attempts to run the plan
							</li><li class="listitem">
								<span class="strong strong"><strong>Conditions</strong></span>: Any changes that need to be made to the plan so that it can run successfully
							</li></ul></div></li><li class="listitem"><p class="simpara">
						When you have fixed all conditions listed, you can run your plan from the <span class="strong strong"><strong>Plans</strong></span> page.
					</p><p class="simpara">
						The <span class="strong strong"><strong>Plan details</strong></span> page also includes five additional tabs, which are described in the table that follows:
					</p><div class="table" id="idm46552699823312"><p class="title"><strong>Table 14.1. Tabs of the Plan details page</strong></p><div class="table-contents"><table class="gt-4-cols lt-7-rows"><colgroup><col style="width: 20%; " class="col_1"/><col style="width: 20%; " class="col_2"/><col style="width: 20%; " class="col_3"/><col style="width: 20%; " class="col_4"/><col style="width: 20%; " class="col_5"/></colgroup><thead><tr><th align="left" valign="top" id="idm46552699815680" scope="col">YAML</th><th align="left" valign="top" id="idm46552699814592" scope="col">Virtual Machines</th><th align="left" valign="top" id="idm46552699813504" scope="col">Resources</th><th align="left" valign="top" id="idm46552699812416" scope="col">Mappings</th><th align="left" valign="top" id="idm46552699811328" scope="col">Hooks</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm46552699815680">
									<p>
										Editable YAML <code class="literal">Plan</code> manifest based on your plan’s details including source provider, network and storage maps, VMs, and any issues with your VMs
									</p>
									</td><td align="left" valign="top" headers="idm46552699814592">
									<p>
										The VMs the plan migrates
									</p>
									</td><td align="left" valign="top" headers="idm46552699813504">
									<p>
										Calculated resources: VMs, CPUs, and total memory for both total VMs and running VMs
									</p>
									</td><td align="left" valign="top" headers="idm46552699812416">
									<p>
										Editable specification of the network and storage maps used by your plan
									</p>
									</td><td align="left" valign="top" headers="idm46552699811328">
									<p>
										Updatable specification of the hooks used by your plan, if any
									</p>
									</td></tr></tbody></table></div></div></li></ol></div><section class="section" id="creating-plan-wizard-cnv-live_cnv"><div class="titlepage"><div><div><h3 class="title">14.7.1. Creating a migration plan for a live migration by using the MTV wizard</h3></div></div></div><p class="_abstract _abstract">
					You create a migration plan for a live migration of virtual machines (VMs) almost exactly as you create a migration plan for a cold migration. The only difference is that you specify it is a <span class="strong strong"><strong>Live migration</strong></span> in the <span class="strong strong"><strong>Migration type</strong></span> page.
				</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
						Live migration is a Technology Preview feature only. Technology Preview features are not supported with Red Hat production service level agreements (SLAs) and might not be functionally complete. Red Hat does not recommend using them in production. These features provide early access to upcoming product features, enabling customers to test functionality and provide feedback during the development process. For more information about the support scope of Red Hat Technology Preview features, see <a class="link" href="https://access.redhat.com/support/offerings/techpreview/">https://access.redhat.com/support/offerings/techpreview/</a>.
					</p></div></div><div class="formalpara"><p class="title"><strong>Prerequisites</strong></p><p>
						As described in <a class="link" href="#cnv-cnv-live-prerequisites_mtv" title="5.5.1. OpenShift Virtualization live migration prerequisites">OpenShift Virtualization live migration prerequisites</a>.
					</p></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In the Red Hat OpenShift web console, click <span class="strong strong"><strong>Migration for Virtualization</strong></span> &gt; <span class="strong strong"><strong>Migration plans</strong></span>.
						</li><li class="listitem"><p class="simpara">
							Click <span class="strong strong"><strong>Create plan</strong></span>.
						</p><p class="simpara">
							The <span class="strong strong"><strong>Create migration plan</strong></span> wizard opens.
						</p></li><li class="listitem"><p class="simpara">
							On the <span class="strong strong"><strong>General</strong></span> page, specify the following fields:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<span class="strong strong"><strong>Plan name</strong></span>: Enter a name.
								</li><li class="listitem">
									<span class="strong strong"><strong>Plan project</strong></span>: Select from the list.
								</li><li class="listitem">
									<span class="strong strong"><strong>Source provider</strong></span>: Select from the list. You can use any OpenShift Virtualization provider. You do not need to create a new one for a live migration.
								</li><li class="listitem">
									<span class="strong strong"><strong>Target provider</strong></span>: Select from the list. Be sure to select the correct OpenShift Virtualization target provider.
								</li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Target project</strong></span>: Click the list and do one of the following:
								</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
											Select an existing project from the list.
										</li><li class="listitem"><p class="simpara">
											Create a new project by clicking <span class="strong strong"><strong>Create project</strong></span> and doing the following:
										</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem">
													Enter the <span class="strong strong"><strong>Name</strong></span> of the project. A project name must consist of lowercase alphanumeric characters or <code class="literal">-</code>. A project name must start and end with alphanumeric characters. For example, <code class="literal">my-name</code> or <code class="literal">123-abc</code>.
												</li><li class="listitem">
													Optional: Enter a <span class="strong strong"><strong>Display name</strong></span> for the project.
												</li><li class="listitem">
													Optional: Enter a <span class="strong strong"><strong>Description</strong></span> of the project.
												</li><li class="listitem">
													Click <span class="strong strong"><strong>Create project</strong></span>.
												</li></ol></div></li></ol></div></li></ul></div></li><li class="listitem">
							Click <span class="strong strong"><strong>Next</strong></span>.
						</li><li class="listitem">
							On the <span class="strong strong"><strong>Virtual machines</strong></span> page, select the virtual machines you want to migrate and ensure they are powered on. A live migration fails if any of its VMs are powered off.
						</li><li class="listitem">
							Click <span class="strong strong"><strong>Next</strong></span>.
						</li><li class="listitem"><p class="simpara">
							On the <span class="strong strong"><strong>Network map</strong></span> page, choose one of the following options:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Use an existing network map</strong></span>: Select an existing network map from the list.
								</p><p class="simpara">
									These are network maps available for all plans, and therefore, they are <span class="emphasis"><em>ownerless</em></span> in terms of the system. If you select this option and choose a map, a copy of that map is attached to your plan, and your plan is the <span class="emphasis"><em>owner</em></span> of that copy. Any changes you make to your copy do not affect the original plan or any copies that other users have.
								</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
										If you select an existing map, be sure it has the same source provider and target provider as the ones you want to use in your plan.
									</p></div></div></li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Use a new network map</strong></span>: Allows you to create a new network map by supplying the following data. This map is attached to this plan, which is then considered to be its owner. Maps that you create using this option are not available in the <span class="strong strong"><strong>Use an existing network map</strong></span> option because each is created with an owner.
								</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
										You can create an ownerless network map, which you and others can use for additional migration plans, in the <span class="strong strong"><strong>Network maps</strong></span> section of the UI.
									</p></div></div><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
											<span class="strong strong"><strong>Source network</strong></span>: Select from the list.
										</li><li class="listitem"><p class="simpara">
											<span class="strong strong"><strong>Target network</strong></span>: Select from the list.
										</p><p class="simpara">
											If needed, click <span class="strong strong"><strong>Add mapping</strong></span> to add another mapping.
										</p></li><li class="listitem">
											<span class="strong strong"><strong>Network map name</strong></span>: Enter a name or let MTV automatically generate a name for the network map.
										</li></ul></div></li></ul></div></li><li class="listitem">
							Click <span class="strong strong"><strong>Next</strong></span>.
						</li><li class="listitem"><p class="simpara">
							On the <span class="strong strong"><strong>Storage map</strong></span> page, choose one of the following options:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Use an existing storage map</strong></span>: Select an existing storage map from the list.
								</p><p class="simpara">
									These are storage maps available for all plans, and therefore, they are <span class="emphasis"><em>ownerless</em></span> in terms of the system. If you select this option and choose a map, a copy of that map is attached to your plan, and your plan is the <span class="emphasis"><em>owner</em></span> of that copy. Any changes you make to your copy do not affect the original plan or any copies that other users have.
								</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
										If you choose an existing map, be sure it has the same source provider and the same target provider as the ones you want to use in your plan.
									</p></div></div></li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Use new storage map</strong></span>: Allows you to create one or two new storage maps by supplying the following data. These maps are attached to this plan, which is then their owner. Maps that you create using this option are not available in the <span class="strong strong"><strong>Use an existing storage map</strong></span> option because each is created with an owner.
								</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
										You can create an ownerless storage map, which you and others can use for additional migration plans, in the <span class="strong strong"><strong>Storage maps</strong></span> section of the UI.
									</p></div></div><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
											<span class="strong strong"><strong>Source storage</strong></span>: Select from the list.
										</li><li class="listitem"><p class="simpara">
											<span class="strong strong"><strong>Target storage</strong></span>: Select from the list.
										</p><p class="simpara">
											If needed, click <span class="strong strong"><strong>Add mapping</strong></span> to add another mapping.
										</p></li><li class="listitem">
											<span class="strong strong"><strong>Storage map name</strong></span>: Enter a name or let MTV automatically generate a name for the storage map.
										</li></ul></div></li></ul></div></li><li class="listitem">
							Click <span class="strong strong"><strong>Next</strong></span>.
						</li><li class="listitem"><p class="simpara">
							On the <span class="strong strong"><strong>Migration type</strong></span> page, choose <span class="strong strong"><strong>Live migration</strong></span>.
						</p><p class="simpara">
							If <span class="strong strong"><strong>Live migration</strong></span> does not appear as an option, return to the <span class="strong strong"><strong>General</strong></span> page and verify that both the source provider and target provider are OpenShift Virtualization clusters.
						</p><p class="simpara">
							If they are both OpenShift Virtualization clusters, have someone with <code class="literal">cluster-admin</code> privileges ensure that the prerequisites for live migration are met. For more information, see <a class="link" href="#cnv-cnv-live-prerequisites_mtv" title="5.5.1. OpenShift Virtualization live migration prerequisites">OpenShift Virtualization live migration prerequisites</a>.
						</p></li><li class="listitem">
							Click <span class="strong strong"><strong>Next</strong></span>.
						</li><li class="listitem">
							On the <span class="strong strong"><strong>Other settings (optional)</strong></span> page, click <span class="strong strong"><strong>Next</strong></span> without doing anything else.
						</li><li class="listitem">
							On the <span class="strong strong"><strong>Hooks (optional)</strong></span> page, you can add a pre-migration hook, a post-migration hook, or both types of migration hooks. All are optional.
						</li><li class="listitem">
							To add a hook, select the appropriate <span class="strong strong"><strong>Enable hook</strong></span> checkbox.
						</li><li class="listitem">
							Enter the <span class="strong strong"><strong>Hook runner image</strong></span>.
						</li><li class="listitem"><p class="simpara">
							Enter the <span class="strong strong"><strong>Ansible playbook</strong></span> of the hook in the window.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								You cannot include more than one pre-migration hook or more than one post-migration hook in a migration plan.
							</p></div></div></li><li class="listitem">
							Click <span class="strong strong"><strong>Next</strong></span>.
						</li><li class="listitem">
							On the <span class="strong strong"><strong>Review and create</strong></span> page, review the information displayed.
						</li><li class="listitem"><p class="simpara">
							Edit any item by doing the following:
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
									Click its <span class="strong strong"><strong>Edit step</strong></span> link.
								</p><p class="simpara">
									The wizard opens to the page where you defined the item.
								</p></li><li class="listitem">
									Edit the item.
								</li><li class="listitem">
									Either click <span class="strong strong"><strong>Next</strong></span> to advance to the next page of the wizard, or click <span class="strong strong"><strong>Skip to review</strong></span> to return directly to the <span class="strong strong"><strong>Review and create</strong></span> page.
								</li></ol></div></li><li class="listitem"><p class="simpara">
							When you finish reviewing the details of the plan, click <span class="strong strong"><strong>Create plan</strong></span>. MTV validates your plan.
						</p><p class="simpara">
							When your plan is validated, the <span class="strong strong"><strong>Plan details</strong></span> page for your plan opens in the <span class="strong strong"><strong>Details</strong></span> tab.
						</p></li><li class="listitem"><p class="simpara">
							In addition to listing details based on your entries in the wizard, the <span class="strong strong"><strong>Plan details</strong></span> tab includes the following two sections after the details of the plan:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<span class="strong strong"><strong>Migration history</strong></span>: Details about successful and unsuccessful attempts to run the plan
								</li><li class="listitem">
									<span class="strong strong"><strong>Conditions</strong></span>: Any changes that need to be made to the plan so that it can run successfully
								</li></ul></div></li><li class="listitem"><p class="simpara">
							When you have fixed all conditions listed, you can run your plan from the <span class="strong strong"><strong>Plans</strong></span> page.
						</p><p class="simpara">
							The <span class="strong strong"><strong>Plan details</strong></span> page also includes five additional tabs, which are described in the table that follows:
						</p><div class="table" id="idm46552699682288"><p class="title"><strong>Table 14.2. Tabs of the Plan details page</strong></p><div class="table-contents"><table class="gt-4-cols lt-7-rows"><colgroup><col style="width: 20%; " class="col_1"/><col style="width: 20%; " class="col_2"/><col style="width: 20%; " class="col_3"/><col style="width: 20%; " class="col_4"/><col style="width: 20%; " class="col_5"/></colgroup><thead><tr><th align="left" valign="top" id="idm46552699674656" scope="col">YAML</th><th align="left" valign="top" id="idm46552699673568" scope="col">Virtual Machines</th><th align="left" valign="top" id="idm46552699672480" scope="col">Resources</th><th align="left" valign="top" id="idm46552699671392" scope="col">Mappings</th><th align="left" valign="top" id="idm46552699670304" scope="col">Hooks</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm46552699674656">
										<p>
											Editable YAML <code class="literal">Plan</code> manifest based on your plan’s details including source provider, network and storage maps, VMs, and any issues with your VMs
										</p>
										</td><td align="left" valign="top" headers="idm46552699673568">
										<p>
											The VMs the plan migrates
										</p>
										</td><td align="left" valign="top" headers="idm46552699672480">
										<p>
											Calculated resources: VMs, CPUs, and total memory for both total VMs and running VMs
										</p>
										</td><td align="left" valign="top" headers="idm46552699671392">
										<p>
											Editable specification of the network and storage maps used by your plan
										</p>
										</td><td align="left" valign="top" headers="idm46552699670304">
										<p>
											Updatable specification of the hooks used by your plan, if any
										</p>
										</td></tr></tbody></table></div></div></li></ol></div></section></section></section><div><div xml:lang="en-US" class="legalnotice" id="idm46552704715808"><h1 class="legalnotice">Legal Notice</h1><div class="para">
		Copyright <span class="trademark"/>© 2026 Red Hat, Inc.
	</div><div class="para">
		The text of and illustrations in this document are licensed by Red Hat under a Creative Commons Attribution–Share Alike 3.0 Unported license ("CC-BY-SA"). An explanation of CC-BY-SA is available at <a class="uri" href="http://creativecommons.org/licenses/by-sa/3.0/">http://creativecommons.org/licenses/by-sa/3.0/</a>. In accordance with CC-BY-SA, if you distribute this document or an adaptation of it, you must provide the URL for the original version.
	</div><div class="para">
		Red Hat, as the licensor of this document, waives the right to enforce, and agrees not to assert, Section 4d of CC-BY-SA to the fullest extent permitted by applicable law.
	</div><div class="para">
		Red Hat, Red Hat Enterprise Linux, the Shadowman logo, the Red Hat logo, JBoss, OpenShift, Fedora, the Infinity logo, and RHCE are trademarks of Red Hat, Inc., registered in the United States and other countries.
	</div><div class="para">
		<span class="trademark">Linux</span>® is the registered trademark of Linus Torvalds in the United States and other countries.
	</div><div class="para">
		<span class="trademark">Java</span>® is a registered trademark of Oracle and/or its affiliates.
	</div><div class="para">
		<span class="trademark">XFS</span>® is a trademark of Silicon Graphics International Corp. or its subsidiaries in the United States and/or other countries.
	</div><div class="para">
		<span class="trademark">MySQL</span>® is a registered trademark of MySQL AB in the United States, the European Union and other countries.
	</div><div class="para">
		<span class="trademark">Node.js</span>® is an official trademark of Joyent. Red Hat is not formally related to or endorsed by the official Joyent Node.js open source or commercial project.
	</div><div class="para">
		The <span class="trademark">OpenStack</span>® Word Mark and OpenStack logo are either registered trademarks/service marks or trademarks/service marks of the OpenStack Foundation, in the United States and other countries and are used with the OpenStack Foundation's permission. We are not affiliated with, endorsed or sponsored by the OpenStack Foundation, or the OpenStack community.
	</div><div class="para">
		All other trademarks are the property of their respective owners.
	</div></div></div></div></div></div><script type="text/javascript">
                        jQuery(document).ready(function() {
                            initSwitchery();
                            jQuery('pre[class*="language-"]').each(function(i, block){hljs.highlightBlock(block);});
                        });
                    </script></body></html>